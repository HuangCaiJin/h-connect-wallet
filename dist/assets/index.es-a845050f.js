import{g as ku,a as nn,c as rt,_ as Im}from"./index-eaeb17e0.js";var Wu={exports:{}},Fi=typeof Reflect=="object"?Reflect:null,mh=Fi&&typeof Fi.apply=="function"?Fi.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},Vo;Fi&&typeof Fi.ownKeys=="function"?Vo=Fi.ownKeys:Object.getOwnPropertySymbols?Vo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vo=function(e){return Object.getOwnPropertyNames(e)};function Pm(r){console&&console.warn&&console.warn(r)}var lp=Number.isNaN||function(e){return e!==e};function at(){at.init.call(this)}Wu.exports=at;Wu.exports.once=Tm;at.EventEmitter=at;at.prototype._events=void 0;at.prototype._eventsCount=0;at.prototype._maxListeners=void 0;var wh=10;function ta(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(at,"defaultMaxListeners",{enumerable:!0,get:function(){return wh},set:function(r){if(typeof r!="number"||r<0||lp(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");wh=r}});at.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};at.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||lp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function hp(r){return r._maxListeners===void 0?at.defaultMaxListeners:r._maxListeners}at.prototype.getMaxListeners=function(){return hp(this)};at.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var o=e==="error",a=this._events;if(a!==void 0)o=o&&a.error===void 0;else if(!o)return!1;if(o){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var f=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw f.context=u,f}var g=a[e];if(g===void 0)return!1;if(typeof g=="function")mh(g,this,t);else for(var d=g.length,_=_p(g,d),i=0;i<d;++i)mh(_[i],this,t);return!0};function dp(r,e,t,i){var o,a,u;if(ta(t),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),a=r._events),u=a[e]),u===void 0)u=a[e]=t,++r._eventsCount;else if(typeof u=="function"?u=a[e]=i?[t,u]:[u,t]:i?u.unshift(t):u.push(t),o=hp(r),o>0&&u.length>o&&!u.warned){u.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=u.length,Pm(f)}return r}at.prototype.addListener=function(e,t){return dp(this,e,t,!1)};at.prototype.on=at.prototype.addListener;at.prototype.prependListener=function(e,t){return dp(this,e,t,!0)};function Am(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pp(r,e,t){var i={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},o=Am.bind(i);return o.listener=t,i.wrapFn=o,o}at.prototype.once=function(e,t){return ta(t),this.on(e,pp(this,e,t)),this};at.prototype.prependOnceListener=function(e,t){return ta(t),this.prependListener(e,pp(this,e,t)),this};at.prototype.removeListener=function(e,t){var i,o,a,u,f;if(ta(t),o=this._events,o===void 0)return this;if(i=o[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(a=-1,u=i.length-1;u>=0;u--)if(i[u]===t||i[u].listener===t){f=i[u].listener,a=u;break}if(a<0)return this;a===0?i.shift():Cm(i,a),i.length===1&&(o[e]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};at.prototype.off=at.prototype.removeListener;at.prototype.removeAllListeners=function(e){var t,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var a=Object.keys(i),u;for(o=0;o<a.length;++o)u=a[o],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function gp(r,e,t){var i=r._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Rm(o):_p(o,o.length)}at.prototype.listeners=function(e){return gp(this,e,!0)};at.prototype.rawListeners=function(e){return gp(this,e,!1)};at.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):yp.call(r,e)};at.prototype.listenerCount=yp;function yp(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}at.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function _p(r,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=r[i];return t}function Cm(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Rm(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Tm(r,e){return new Promise(function(t,i){function o(u){r.removeListener(e,a),i(u)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",o),t([].slice.call(arguments))}vp(r,e,a,{once:!0}),e!=="error"&&$m(r,o,{once:!0})})}function $m(r,e,t){typeof r.on=="function"&&vp(r,"error",e,t)}function vp(r,e,t,i){if(typeof r.on=="function")i.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function o(a){i.once&&r.removeEventListener(e,o),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var xr=Wu.exports;const Ju=ku(xr);var Yu={},ra={},Fe={},bp={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(f,g){var d=f>>>16&65535,_=f&65535,O=g>>>16&65535,S=g&65535;return _*S+(d*S+_*O<<16>>>0)|0}r.mul=Math.imul||e;function t(f,g){return f+g|0}r.add=t;function i(f,g){return f-g|0}r.sub=i;function o(f,g){return f<<g|f>>>32-g}r.rotl=o;function a(f,g){return f<<32-g|f>>>g}r.rotr=a;function u(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}r.isInteger=Number.isInteger||u,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(f){return r.isInteger(f)&&f>=-r.MAX_SAFE_INTEGER&&f<=r.MAX_SAFE_INTEGER}})(bp);Object.defineProperty(Fe,"__esModule",{value:!0});var mp=bp;function Nm(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Fe.readInt16BE=Nm;function jm(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Fe.readUint16BE=jm;function Fm(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Fe.readInt16LE=Fm;function Lm(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Fe.readUint16LE=Lm;function wp(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Fe.writeUint16BE=wp;Fe.writeInt16BE=wp;function Ep(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Fe.writeUint16LE=Ep;Fe.writeInt16LE=Ep;function iu(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Fe.readInt32BE=iu;function su(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Fe.readUint32BE=su;function ou(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Fe.readInt32LE=ou;function au(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Fe.readUint32LE=au;function Jo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Fe.writeUint32BE=Jo;Fe.writeInt32BE=Jo;function Yo(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Fe.writeUint32LE=Yo;Fe.writeInt32LE=Yo;function Um(r,e){e===void 0&&(e=0);var t=iu(r,e),i=iu(r,e+4);return t*4294967296+i-(i>>31)*4294967296}Fe.readInt64BE=Um;function Mm(r,e){e===void 0&&(e=0);var t=su(r,e),i=su(r,e+4);return t*4294967296+i}Fe.readUint64BE=Mm;function Bm(r,e){e===void 0&&(e=0);var t=ou(r,e),i=ou(r,e+4);return i*4294967296+t-(t>>31)*4294967296}Fe.readInt64LE=Bm;function qm(r,e){e===void 0&&(e=0);var t=au(r,e),i=au(r,e+4);return i*4294967296+t}Fe.readUint64LE=qm;function Sp(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Jo(r/4294967296>>>0,e,t),Jo(r>>>0,e,t+4),e}Fe.writeUint64BE=Sp;Fe.writeInt64BE=Sp;function Dp(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Yo(r>>>0,e,t),Yo(r/4294967296>>>0,e,t+4),e}Fe.writeUint64LE=Dp;Fe.writeInt64LE=Dp;function zm(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,o=1,a=r/8+t-1;a>=t;a--)i+=e[a]*o,o*=256;return i}Fe.readUintBE=zm;function Hm(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,o=1,a=t;a<t+r/8;a++)i+=e[a]*o,o*=256;return i}Fe.readUintLE=Hm;function Km(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!mp.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,a=r/8+i-1;a>=i;a--)t[a]=e/o&255,o*=256;return t}Fe.writeUintBE=Km;function Vm(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!mp.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,a=i;a<i+r/8;a++)t[a]=e/o&255,o*=256;return t}Fe.writeUintLE=Vm;function Gm(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Fe.readFloat32BE=Gm;function km(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Fe.readFloat32LE=km;function Wm(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Fe.readFloat64BE=Wm;function Jm(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Fe.readFloat64LE=Jm;function Ym(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}Fe.writeFloat32BE=Ym;function Xm(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}Fe.writeFloat32LE=Xm;function Qm(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}Fe.writeFloat64BE=Qm;function Zm(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}Fe.writeFloat64LE=Zm;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function ew(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Ir.wipe=ew;Object.defineProperty(ra,"__esModule",{value:!0});var tr=Fe,cu=Ir,tw=20;function rw(r,e,t){for(var i=1634760805,o=857760878,a=2036477234,u=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],g=t[7]<<24|t[6]<<16|t[5]<<8|t[4],d=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],O=t[19]<<24|t[18]<<16|t[17]<<8|t[16],S=t[23]<<24|t[22]<<16|t[21]<<8|t[20],P=t[27]<<24|t[26]<<16|t[25]<<8|t[24],C=t[31]<<24|t[30]<<16|t[29]<<8|t[28],q=e[3]<<24|e[2]<<16|e[1]<<8|e[0],K=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ie=e[11]<<24|e[10]<<16|e[9]<<8|e[8],N=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=i,x=o,T=a,E=u,l=f,m=g,k=d,W=_,se=O,ce=S,de=P,w=C,A=q,ee=K,X=ie,V=N,G=0;G<tw;G+=2)L=L+l|0,A^=L,A=A>>>32-16|A<<16,se=se+A|0,l^=se,l=l>>>32-12|l<<12,x=x+m|0,ee^=x,ee=ee>>>32-16|ee<<16,ce=ce+ee|0,m^=ce,m=m>>>32-12|m<<12,T=T+k|0,X^=T,X=X>>>32-16|X<<16,de=de+X|0,k^=de,k=k>>>32-12|k<<12,E=E+W|0,V^=E,V=V>>>32-16|V<<16,w=w+V|0,W^=w,W=W>>>32-12|W<<12,T=T+k|0,X^=T,X=X>>>32-8|X<<8,de=de+X|0,k^=de,k=k>>>32-7|k<<7,E=E+W|0,V^=E,V=V>>>32-8|V<<8,w=w+V|0,W^=w,W=W>>>32-7|W<<7,x=x+m|0,ee^=x,ee=ee>>>32-8|ee<<8,ce=ce+ee|0,m^=ce,m=m>>>32-7|m<<7,L=L+l|0,A^=L,A=A>>>32-8|A<<8,se=se+A|0,l^=se,l=l>>>32-7|l<<7,L=L+m|0,V^=L,V=V>>>32-16|V<<16,de=de+V|0,m^=de,m=m>>>32-12|m<<12,x=x+k|0,A^=x,A=A>>>32-16|A<<16,w=w+A|0,k^=w,k=k>>>32-12|k<<12,T=T+W|0,ee^=T,ee=ee>>>32-16|ee<<16,se=se+ee|0,W^=se,W=W>>>32-12|W<<12,E=E+l|0,X^=E,X=X>>>32-16|X<<16,ce=ce+X|0,l^=ce,l=l>>>32-12|l<<12,T=T+W|0,ee^=T,ee=ee>>>32-8|ee<<8,se=se+ee|0,W^=se,W=W>>>32-7|W<<7,E=E+l|0,X^=E,X=X>>>32-8|X<<8,ce=ce+X|0,l^=ce,l=l>>>32-7|l<<7,x=x+k|0,A^=x,A=A>>>32-8|A<<8,w=w+A|0,k^=w,k=k>>>32-7|k<<7,L=L+m|0,V^=L,V=V>>>32-8|V<<8,de=de+V|0,m^=de,m=m>>>32-7|m<<7;tr.writeUint32LE(L+i|0,r,0),tr.writeUint32LE(x+o|0,r,4),tr.writeUint32LE(T+a|0,r,8),tr.writeUint32LE(E+u|0,r,12),tr.writeUint32LE(l+f|0,r,16),tr.writeUint32LE(m+g|0,r,20),tr.writeUint32LE(k+d|0,r,24),tr.writeUint32LE(W+_|0,r,28),tr.writeUint32LE(se+O|0,r,32),tr.writeUint32LE(ce+S|0,r,36),tr.writeUint32LE(de+P|0,r,40),tr.writeUint32LE(w+C|0,r,44),tr.writeUint32LE(A+q|0,r,48),tr.writeUint32LE(ee+K|0,r,52),tr.writeUint32LE(X+ie|0,r,56),tr.writeUint32LE(V+N|0,r,60)}function Op(r,e,t,i,o){if(o===void 0&&(o=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var a,u;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),u=a.length-e.length,a.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,u=o}for(var f=new Uint8Array(64),g=0;g<t.length;g+=64){rw(f,a,r);for(var d=g;d<g+64&&d<t.length;d++)i[d]=t[d]^f[d-g];iw(a,0,u)}return cu.wipe(f),o===0&&cu.wipe(a),i}ra.streamXOR=Op;function nw(r,e,t,i){return i===void 0&&(i=0),cu.wipe(t),Op(r,e,t,t,i)}ra.stream=nw;function iw(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var xp={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});function sw(r,e,t){return~(r-1)&e|r-1&t}Bn.select=sw;function ow(r,e){return(r|0)-(e|0)-1>>>31&1}Bn.lessOrEqual=ow;function Ip(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}Bn.compare=Ip;function aw(r,e){return r.length===0||e.length===0?!1:Ip(r,e)!==0}Bn.equal=aw;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Bn,t=Ir;r.DIGEST_LENGTH=16;var i=function(){function u(f){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var d=f[2]|f[3]<<8;this._r[1]=(g>>>13|d<<3)&8191;var _=f[4]|f[5]<<8;this._r[2]=(d>>>10|_<<6)&7939;var O=f[6]|f[7]<<8;this._r[3]=(_>>>7|O<<9)&8191;var S=f[8]|f[9]<<8;this._r[4]=(O>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var P=f[10]|f[11]<<8;this._r[6]=(S>>>14|P<<2)&8191;var C=f[12]|f[13]<<8;this._r[7]=(P>>>11|C<<5)&8065;var q=f[14]|f[15]<<8;this._r[8]=(C>>>8|q<<8)&8191,this._r[9]=q>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return u.prototype._blocks=function(f,g,d){for(var _=this._fin?0:2048,O=this._h[0],S=this._h[1],P=this._h[2],C=this._h[3],q=this._h[4],K=this._h[5],ie=this._h[6],N=this._h[7],L=this._h[8],x=this._h[9],T=this._r[0],E=this._r[1],l=this._r[2],m=this._r[3],k=this._r[4],W=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],w=this._r[9];d>=16;){var A=f[g+0]|f[g+1]<<8;O+=A&8191;var ee=f[g+2]|f[g+3]<<8;S+=(A>>>13|ee<<3)&8191;var X=f[g+4]|f[g+5]<<8;P+=(ee>>>10|X<<6)&8191;var V=f[g+6]|f[g+7]<<8;C+=(X>>>7|V<<9)&8191;var G=f[g+8]|f[g+9]<<8;q+=(V>>>4|G<<12)&8191,K+=G>>>1&8191;var Y=f[g+10]|f[g+11]<<8;ie+=(G>>>14|Y<<2)&8191;var re=f[g+12]|f[g+13]<<8;N+=(Y>>>11|re<<5)&8191;var me=f[g+14]|f[g+15]<<8;L+=(re>>>8|me<<8)&8191,x+=me>>>5|_;var oe=0,we=oe;we+=O*T,we+=S*(5*w),we+=P*(5*de),we+=C*(5*ce),we+=q*(5*se),oe=we>>>13,we&=8191,we+=K*(5*W),we+=ie*(5*k),we+=N*(5*m),we+=L*(5*l),we+=x*(5*E),oe+=we>>>13,we&=8191;var le=oe;le+=O*E,le+=S*T,le+=P*(5*w),le+=C*(5*de),le+=q*(5*ce),oe=le>>>13,le&=8191,le+=K*(5*se),le+=ie*(5*W),le+=N*(5*k),le+=L*(5*m),le+=x*(5*l),oe+=le>>>13,le&=8191;var _e=oe;_e+=O*l,_e+=S*E,_e+=P*T,_e+=C*(5*w),_e+=q*(5*de),oe=_e>>>13,_e&=8191,_e+=K*(5*ce),_e+=ie*(5*se),_e+=N*(5*W),_e+=L*(5*k),_e+=x*(5*m),oe+=_e>>>13,_e&=8191;var z=oe;z+=O*m,z+=S*l,z+=P*E,z+=C*T,z+=q*(5*w),oe=z>>>13,z&=8191,z+=K*(5*de),z+=ie*(5*ce),z+=N*(5*se),z+=L*(5*W),z+=x*(5*k),oe+=z>>>13,z&=8191;var B=oe;B+=O*k,B+=S*m,B+=P*l,B+=C*E,B+=q*T,oe=B>>>13,B&=8191,B+=K*(5*w),B+=ie*(5*de),B+=N*(5*ce),B+=L*(5*se),B+=x*(5*W),oe+=B>>>13,B&=8191;var j=oe;j+=O*W,j+=S*k,j+=P*m,j+=C*l,j+=q*E,oe=j>>>13,j&=8191,j+=K*T,j+=ie*(5*w),j+=N*(5*de),j+=L*(5*ce),j+=x*(5*se),oe+=j>>>13,j&=8191;var p=oe;p+=O*se,p+=S*W,p+=P*k,p+=C*m,p+=q*l,oe=p>>>13,p&=8191,p+=K*E,p+=ie*T,p+=N*(5*w),p+=L*(5*de),p+=x*(5*ce),oe+=p>>>13,p&=8191;var R=oe;R+=O*ce,R+=S*se,R+=P*W,R+=C*k,R+=q*m,oe=R>>>13,R&=8191,R+=K*l,R+=ie*E,R+=N*T,R+=L*(5*w),R+=x*(5*de),oe+=R>>>13,R&=8191;var ae=oe;ae+=O*de,ae+=S*ce,ae+=P*se,ae+=C*W,ae+=q*k,oe=ae>>>13,ae&=8191,ae+=K*m,ae+=ie*l,ae+=N*E,ae+=L*T,ae+=x*(5*w),oe+=ae>>>13,ae&=8191;var he=oe;he+=O*w,he+=S*de,he+=P*ce,he+=C*se,he+=q*W,oe=he>>>13,he&=8191,he+=K*k,he+=ie*m,he+=N*l,he+=L*E,he+=x*T,oe+=he>>>13,he&=8191,oe=(oe<<2)+oe|0,oe=oe+we|0,we=oe&8191,oe=oe>>>13,le+=oe,O=we,S=le,P=_e,C=z,q=B,K=j,ie=p,N=R,L=ae,x=he,g+=16,d-=16}this._h[0]=O,this._h[1]=S,this._h[2]=P,this._h[3]=C,this._h[4]=q,this._h[5]=K,this._h[6]=ie,this._h[7]=N,this._h[8]=L,this._h[9]=x},u.prototype.finish=function(f,g){g===void 0&&(g=0);var d=new Uint16Array(10),_,O,S,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(_=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=_,_=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=_*5,_=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=_,_=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=_,d[0]=this._h[0]+5,_=d[0]>>>13,d[0]&=8191,P=1;P<10;P++)d[P]=this._h[P]+_,_=d[P]>>>13,d[P]&=8191;for(d[9]-=8192,O=(_^1)-1,P=0;P<10;P++)d[P]&=O;for(O=~O,P=0;P<10;P++)this._h[P]=this._h[P]&O|d[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,P=1;P<8;P++)S=(this._h[P]+this._pad[P]|0)+(S>>>16)|0,this._h[P]=S&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(f){var g=0,d=f.length,_;if(this._leftover){_=16-this._leftover,_>d&&(_=d);for(var O=0;O<_;O++)this._buffer[this._leftover+O]=f[g+O];if(d-=_,g+=_,this._leftover+=_,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(d>=16&&(_=d-d%16,this._blocks(f,g,_),g+=_,d-=_),d){for(var O=0;O<d;O++)this._buffer[this._leftover+O]=f[g+O];this._leftover+=d}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},u.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();r.Poly1305=i;function o(u,f){var g=new i(u);g.update(f);var d=g.digest();return g.clean(),d}r.oneTimeAuth=o;function a(u,f){return u.length!==r.DIGEST_LENGTH||f.length!==r.DIGEST_LENGTH?!1:e.equal(u,f)}r.equal=a})(xp);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ra,t=xp,i=Ir,o=Fe,a=Bn;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var u=new Uint8Array(16),f=function(){function g(d){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,d.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(d)}return g.prototype.seal=function(d,_,O,S){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var P=new Uint8Array(16);P.set(d,P.length-d.length);var C=new Uint8Array(32);e.stream(this._key,P,C,4);var q=_.length+this.tagLength,K;if(S){if(S.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");K=S}else K=new Uint8Array(q);return e.streamXOR(this._key,P,_,K,4),this._authenticate(K.subarray(K.length-this.tagLength,K.length),C,K.subarray(0,K.length-this.tagLength),O),i.wipe(P),K},g.prototype.open=function(d,_,O,S){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(_.length<this.tagLength)return null;var P=new Uint8Array(16);P.set(d,P.length-d.length);var C=new Uint8Array(32);e.stream(this._key,P,C,4);var q=new Uint8Array(this.tagLength);if(this._authenticate(q,C,_.subarray(0,_.length-this.tagLength),O),!a.equal(q,_.subarray(_.length-this.tagLength,_.length)))return null;var K=_.length-this.tagLength,ie;if(S){if(S.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");ie=S}else ie=new Uint8Array(K);return e.streamXOR(this._key,P,_.subarray(0,_.length-this.tagLength),ie,4),i.wipe(P),ie},g.prototype.clean=function(){return i.wipe(this._key),this},g.prototype._authenticate=function(d,_,O,S){var P=new t.Poly1305(_);S&&(P.update(S),S.length%16>0&&P.update(u.subarray(S.length%16))),P.update(O),O.length%16>0&&P.update(u.subarray(O.length%16));var C=new Uint8Array(8);S&&o.writeUint64LE(S.length,C),P.update(C),o.writeUint64LE(O.length,C),P.update(C);for(var q=P.digest(),K=0;K<q.length;K++)d[K]=q[K];P.clean(),i.wipe(q),i.wipe(C)},g}();r.ChaCha20Poly1305=f})(Yu);var Pp={},Rs={},Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});function cw(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}Xu.isSerializableHash=cw;Object.defineProperty(Rs,"__esModule",{value:!0});var Qr=Xu,uw=Bn,fw=Ir,Ap=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var o=0;o<i.length;o++)i[o]^=54;this._inner.update(i);for(var o=0;o<i.length;o++)i[o]^=106;this._outer.update(i),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),fw.wipe(i)}return r.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Rs.HMAC=Ap;function lw(r,e,t){var i=new Ap(r,e);i.update(t);var o=i.digest();return i.clean(),o}Rs.hmac=lw;Rs.equal=uw.equal;Object.defineProperty(Pp,"__esModule",{value:!0});var Eh=Rs,Sh=Ir,hw=function(){function r(e,t,i,o){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var a=Eh.hmac(this._hash,i,t);this._hmac=new Eh.HMAC(e,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),Sh.wipe(this._buffer),Sh.wipe(this._counter),this._bufpos=0},r}(),dw=Pp.HKDF=hw,Mi={},na={},ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.BrowserRandomSource=void 0;const Dh=65536;class pw{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=Dh)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,Dh)));return t}}ia.BrowserRandomSource=pw;function gw(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sa={};const yw={},_w=Object.freeze(Object.defineProperty({__proto__:null,default:yw},Symbol.toStringTag,{value:"Module"})),vw=nn(_w);Object.defineProperty(sa,"__esModule",{value:!0});sa.NodeRandomSource=void 0;const bw=Ir;class mw{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof gw<"u"){const e=vw;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let o=0;o<i.length;o++)i[o]=t[o];return(0,bw.wipe)(t),i}}sa.NodeRandomSource=mw;Object.defineProperty(na,"__esModule",{value:!0});na.SystemRandomSource=void 0;const ww=ia,Ew=sa;class Sw{constructor(){if(this.isAvailable=!1,this.name="",this._source=new ww.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ew.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}na.SystemRandomSource=Sw;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=na,t=Fe,i=Ir;r.defaultRandomSource=new e.SystemRandomSource;function o(d,_=r.defaultRandomSource){return _.randomBytes(d)}r.randomBytes=o;function a(d=r.defaultRandomSource){const _=o(4,d),O=(0,t.readUint32LE)(_);return(0,i.wipe)(_),O}r.randomUint32=a;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(d,_=u,O=r.defaultRandomSource){if(_.length<2)throw new Error("randomString charset is too short");if(_.length>256)throw new Error("randomString charset is too long");let S="";const P=_.length,C=256-256%P;for(;d>0;){const q=o(Math.ceil(d*256/C),O);for(let K=0;K<q.length&&d>0;K++){const ie=q[K];ie<C&&(S+=_.charAt(ie%P),d--)}(0,i.wipe)(q)}return S}r.randomString=f;function g(d,_=u,O=r.defaultRandomSource){const S=Math.ceil(d/(Math.log(_.length)/Math.LN2));return f(S,_,O)}r.randomStringForEntropy=g})(Mi);var oa={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Fe,t=Ir;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function f(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(g,d){if(d===void 0&&(d=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var _=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&d>0;)this._buffer[this._bufferLength++]=g[_++],d--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(_=a(this._temp,this._state,g,_,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=g[_++],d--;return this},f.prototype.finish=function(g){if(!this._finished){var d=this._bytesHashed,_=this._bufferLength,O=d/536870912|0,S=d<<3,P=d%64<56?64:128;this._buffer[_]=128;for(var C=_+1;C<P-8;C++)this._buffer[C]=0;e.writeUint32BE(O,this._buffer,P-8),e.writeUint32BE(S,this._buffer,P-4),a(this._temp,this._state,this._buffer,0,P),this._finished=!0}for(var C=0;C<this.digestLength/4;C++)e.writeUint32BE(this._state[C],g,C*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.state),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();r.SHA256=i;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(f,g,d,_,O){for(;O>=64;){for(var S=g[0],P=g[1],C=g[2],q=g[3],K=g[4],ie=g[5],N=g[6],L=g[7],x=0;x<16;x++){var T=_+x*4;f[x]=e.readUint32BE(d,T)}for(var x=16;x<64;x++){var E=f[x-2],l=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=f[x-15];var m=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;f[x]=(l+f[x-7]|0)+(m+f[x-16]|0)}for(var x=0;x<64;x++){var l=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&ie^~K&N)|0)+(L+(o[x]+f[x]|0)|0)|0,m=((S>>>2|S<<32-2)^(S>>>13|S<<32-13)^(S>>>22|S<<32-22))+(S&P^S&C^P&C)|0;L=N,N=ie,ie=K,K=q+l|0,q=C,C=P,P=S,S=l+m|0}g[0]+=S,g[1]+=P,g[2]+=C,g[3]+=q,g[4]+=K,g[5]+=ie,g[6]+=N,g[7]+=L,_+=64,O-=64}return _}function u(f){var g=new i;g.update(f);var d=g.digest();return g.clean(),d}r.hash=u})(oa);var Qu={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=Mi,t=Ir;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(x){const T=new Float64Array(16);if(x)for(let E=0;E<x.length;E++)T[E]=x[E];return T}const o=new Uint8Array(32);o[0]=9;const a=i([56129,1]);function u(x){let T=1;for(let E=0;E<16;E++){let l=x[E]+T+65535;T=Math.floor(l/65536),x[E]=l-T*65536}x[0]+=T-1+37*(T-1)}function f(x,T,E){const l=~(E-1);for(let m=0;m<16;m++){const k=l&(x[m]^T[m]);x[m]^=k,T[m]^=k}}function g(x,T){const E=i(),l=i();for(let m=0;m<16;m++)l[m]=T[m];u(l),u(l),u(l);for(let m=0;m<2;m++){E[0]=l[0]-65517;for(let W=1;W<15;W++)E[W]=l[W]-65535-(E[W-1]>>16&1),E[W-1]&=65535;E[15]=l[15]-32767-(E[14]>>16&1);const k=E[15]>>16&1;E[14]&=65535,f(l,E,1-k)}for(let m=0;m<16;m++)x[2*m]=l[m]&255,x[2*m+1]=l[m]>>8}function d(x,T){for(let E=0;E<16;E++)x[E]=T[2*E]+(T[2*E+1]<<8);x[15]&=32767}function _(x,T,E){for(let l=0;l<16;l++)x[l]=T[l]+E[l]}function O(x,T,E){for(let l=0;l<16;l++)x[l]=T[l]-E[l]}function S(x,T,E){let l,m,k=0,W=0,se=0,ce=0,de=0,w=0,A=0,ee=0,X=0,V=0,G=0,Y=0,re=0,me=0,oe=0,we=0,le=0,_e=0,z=0,B=0,j=0,p=0,R=0,ae=0,he=0,Oe=0,ze=0,Ve=0,Le=0,yt=0,_t=0,Me=E[0],xe=E[1],$e=E[2],Ne=E[3],Be=E[4],Pe=E[5],je=E[6],De=E[7],Ae=E[8],He=E[9],Ie=E[10],Ge=E[11],We=E[12],et=E[13],tt=E[14],Ye=E[15];l=T[0],k+=l*Me,W+=l*xe,se+=l*$e,ce+=l*Ne,de+=l*Be,w+=l*Pe,A+=l*je,ee+=l*De,X+=l*Ae,V+=l*He,G+=l*Ie,Y+=l*Ge,re+=l*We,me+=l*et,oe+=l*tt,we+=l*Ye,l=T[1],W+=l*Me,se+=l*xe,ce+=l*$e,de+=l*Ne,w+=l*Be,A+=l*Pe,ee+=l*je,X+=l*De,V+=l*Ae,G+=l*He,Y+=l*Ie,re+=l*Ge,me+=l*We,oe+=l*et,we+=l*tt,le+=l*Ye,l=T[2],se+=l*Me,ce+=l*xe,de+=l*$e,w+=l*Ne,A+=l*Be,ee+=l*Pe,X+=l*je,V+=l*De,G+=l*Ae,Y+=l*He,re+=l*Ie,me+=l*Ge,oe+=l*We,we+=l*et,le+=l*tt,_e+=l*Ye,l=T[3],ce+=l*Me,de+=l*xe,w+=l*$e,A+=l*Ne,ee+=l*Be,X+=l*Pe,V+=l*je,G+=l*De,Y+=l*Ae,re+=l*He,me+=l*Ie,oe+=l*Ge,we+=l*We,le+=l*et,_e+=l*tt,z+=l*Ye,l=T[4],de+=l*Me,w+=l*xe,A+=l*$e,ee+=l*Ne,X+=l*Be,V+=l*Pe,G+=l*je,Y+=l*De,re+=l*Ae,me+=l*He,oe+=l*Ie,we+=l*Ge,le+=l*We,_e+=l*et,z+=l*tt,B+=l*Ye,l=T[5],w+=l*Me,A+=l*xe,ee+=l*$e,X+=l*Ne,V+=l*Be,G+=l*Pe,Y+=l*je,re+=l*De,me+=l*Ae,oe+=l*He,we+=l*Ie,le+=l*Ge,_e+=l*We,z+=l*et,B+=l*tt,j+=l*Ye,l=T[6],A+=l*Me,ee+=l*xe,X+=l*$e,V+=l*Ne,G+=l*Be,Y+=l*Pe,re+=l*je,me+=l*De,oe+=l*Ae,we+=l*He,le+=l*Ie,_e+=l*Ge,z+=l*We,B+=l*et,j+=l*tt,p+=l*Ye,l=T[7],ee+=l*Me,X+=l*xe,V+=l*$e,G+=l*Ne,Y+=l*Be,re+=l*Pe,me+=l*je,oe+=l*De,we+=l*Ae,le+=l*He,_e+=l*Ie,z+=l*Ge,B+=l*We,j+=l*et,p+=l*tt,R+=l*Ye,l=T[8],X+=l*Me,V+=l*xe,G+=l*$e,Y+=l*Ne,re+=l*Be,me+=l*Pe,oe+=l*je,we+=l*De,le+=l*Ae,_e+=l*He,z+=l*Ie,B+=l*Ge,j+=l*We,p+=l*et,R+=l*tt,ae+=l*Ye,l=T[9],V+=l*Me,G+=l*xe,Y+=l*$e,re+=l*Ne,me+=l*Be,oe+=l*Pe,we+=l*je,le+=l*De,_e+=l*Ae,z+=l*He,B+=l*Ie,j+=l*Ge,p+=l*We,R+=l*et,ae+=l*tt,he+=l*Ye,l=T[10],G+=l*Me,Y+=l*xe,re+=l*$e,me+=l*Ne,oe+=l*Be,we+=l*Pe,le+=l*je,_e+=l*De,z+=l*Ae,B+=l*He,j+=l*Ie,p+=l*Ge,R+=l*We,ae+=l*et,he+=l*tt,Oe+=l*Ye,l=T[11],Y+=l*Me,re+=l*xe,me+=l*$e,oe+=l*Ne,we+=l*Be,le+=l*Pe,_e+=l*je,z+=l*De,B+=l*Ae,j+=l*He,p+=l*Ie,R+=l*Ge,ae+=l*We,he+=l*et,Oe+=l*tt,ze+=l*Ye,l=T[12],re+=l*Me,me+=l*xe,oe+=l*$e,we+=l*Ne,le+=l*Be,_e+=l*Pe,z+=l*je,B+=l*De,j+=l*Ae,p+=l*He,R+=l*Ie,ae+=l*Ge,he+=l*We,Oe+=l*et,ze+=l*tt,Ve+=l*Ye,l=T[13],me+=l*Me,oe+=l*xe,we+=l*$e,le+=l*Ne,_e+=l*Be,z+=l*Pe,B+=l*je,j+=l*De,p+=l*Ae,R+=l*He,ae+=l*Ie,he+=l*Ge,Oe+=l*We,ze+=l*et,Ve+=l*tt,Le+=l*Ye,l=T[14],oe+=l*Me,we+=l*xe,le+=l*$e,_e+=l*Ne,z+=l*Be,B+=l*Pe,j+=l*je,p+=l*De,R+=l*Ae,ae+=l*He,he+=l*Ie,Oe+=l*Ge,ze+=l*We,Ve+=l*et,Le+=l*tt,yt+=l*Ye,l=T[15],we+=l*Me,le+=l*xe,_e+=l*$e,z+=l*Ne,B+=l*Be,j+=l*Pe,p+=l*je,R+=l*De,ae+=l*Ae,he+=l*He,Oe+=l*Ie,ze+=l*Ge,Ve+=l*We,Le+=l*et,yt+=l*tt,_t+=l*Ye,k+=38*le,W+=38*_e,se+=38*z,ce+=38*B,de+=38*j,w+=38*p,A+=38*R,ee+=38*ae,X+=38*he,V+=38*Oe,G+=38*ze,Y+=38*Ve,re+=38*Le,me+=38*yt,oe+=38*_t,m=1,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=ce+m+65535,m=Math.floor(l/65536),ce=l-m*65536,l=de+m+65535,m=Math.floor(l/65536),de=l-m*65536,l=w+m+65535,m=Math.floor(l/65536),w=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=re+m+65535,m=Math.floor(l/65536),re=l-m*65536,l=me+m+65535,m=Math.floor(l/65536),me=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=we+m+65535,m=Math.floor(l/65536),we=l-m*65536,k+=m-1+37*(m-1),m=1,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=ce+m+65535,m=Math.floor(l/65536),ce=l-m*65536,l=de+m+65535,m=Math.floor(l/65536),de=l-m*65536,l=w+m+65535,m=Math.floor(l/65536),w=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=re+m+65535,m=Math.floor(l/65536),re=l-m*65536,l=me+m+65535,m=Math.floor(l/65536),me=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=we+m+65535,m=Math.floor(l/65536),we=l-m*65536,k+=m-1+37*(m-1),x[0]=k,x[1]=W,x[2]=se,x[3]=ce,x[4]=de,x[5]=w,x[6]=A,x[7]=ee,x[8]=X,x[9]=V,x[10]=G,x[11]=Y,x[12]=re,x[13]=me,x[14]=oe,x[15]=we}function P(x,T){S(x,T,T)}function C(x,T){const E=i();for(let l=0;l<16;l++)E[l]=T[l];for(let l=253;l>=0;l--)P(E,E),l!==2&&l!==4&&S(E,E,T);for(let l=0;l<16;l++)x[l]=E[l]}function q(x,T){const E=new Uint8Array(32),l=new Float64Array(80),m=i(),k=i(),W=i(),se=i(),ce=i(),de=i();for(let X=0;X<31;X++)E[X]=x[X];E[31]=x[31]&127|64,E[0]&=248,d(l,T);for(let X=0;X<16;X++)k[X]=l[X];m[0]=se[0]=1;for(let X=254;X>=0;--X){const V=E[X>>>3]>>>(X&7)&1;f(m,k,V),f(W,se,V),_(ce,m,W),O(m,m,W),_(W,k,se),O(k,k,se),P(se,ce),P(de,m),S(m,W,m),S(W,k,ce),_(ce,m,W),O(m,m,W),P(k,m),O(W,se,de),S(m,W,a),_(m,m,se),S(W,W,m),S(m,se,de),S(se,k,l),P(k,ce),f(m,k,V),f(W,se,V)}for(let X=0;X<16;X++)l[X+16]=m[X],l[X+32]=W[X],l[X+48]=k[X],l[X+64]=se[X];const w=l.subarray(32),A=l.subarray(16);C(w,w),S(A,A,w);const ee=new Uint8Array(32);return g(ee,A),ee}r.scalarMult=q;function K(x){return q(x,o)}r.scalarMultBase=K;function ie(x){if(x.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const T=new Uint8Array(x);return{publicKey:K(T),secretKey:T}}r.generateKeyPairFromSeed=ie;function N(x){const T=(0,e.randomBytes)(32,x),E=ie(T);return(0,t.wipe)(T),E}r.generateKeyPair=N;function L(x,T,E=!1){if(x.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(T.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=q(x,T);if(E){let m=0;for(let k=0;k<l.length;k++)m|=l[k];if(m===0)throw new Error("X25519: invalid shared key")}return l}r.sharedKey=L})(Qu);function Zu(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Cp(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zu(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function uu(r,e){e||(e=r.reduce((o,a)=>o+a.length,0));const t=Cp(e);let i=0;for(const o of r)t.set(o,i),i+=o.length;return Zu(t)}function Dw(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<r.length;o++){var a=r.charAt(o),u=a.charCodeAt(0);if(t[u]!==255)throw new TypeError(a+" is ambiguous");t[u]=o}var f=r.length,g=r.charAt(0),d=Math.log(f)/Math.log(256),_=Math.log(256)/Math.log(f);function O(C){if(C instanceof Uint8Array||(ArrayBuffer.isView(C)?C=new Uint8Array(C.buffer,C.byteOffset,C.byteLength):Array.isArray(C)&&(C=Uint8Array.from(C))),!(C instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(C.length===0)return"";for(var q=0,K=0,ie=0,N=C.length;ie!==N&&C[ie]===0;)ie++,q++;for(var L=(N-ie)*_+1>>>0,x=new Uint8Array(L);ie!==N;){for(var T=C[ie],E=0,l=L-1;(T!==0||E<K)&&l!==-1;l--,E++)T+=256*x[l]>>>0,x[l]=T%f>>>0,T=T/f>>>0;if(T!==0)throw new Error("Non-zero carry");K=E,ie++}for(var m=L-K;m!==L&&x[m]===0;)m++;for(var k=g.repeat(q);m<L;++m)k+=r.charAt(x[m]);return k}function S(C){if(typeof C!="string")throw new TypeError("Expected String");if(C.length===0)return new Uint8Array;var q=0;if(C[q]!==" "){for(var K=0,ie=0;C[q]===g;)K++,q++;for(var N=(C.length-q)*d+1>>>0,L=new Uint8Array(N);C[q];){var x=t[C.charCodeAt(q)];if(x===255)return;for(var T=0,E=N-1;(x!==0||T<ie)&&E!==-1;E--,T++)x+=f*L[E]>>>0,L[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ie=T,q++}if(C[q]!==" "){for(var l=N-ie;l!==N&&L[l]===0;)l++;for(var m=new Uint8Array(K+(N-l)),k=K;l!==N;)m[k++]=L[l++];return m}}}function P(C){var q=S(C);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:S,decode:P}}var Ow=Dw,xw=Ow;const Iw=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Pw=r=>new TextEncoder().encode(r),Aw=r=>new TextDecoder().decode(r);class Cw{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Rw{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rp(this,e)}}class Tw{constructor(e){this.decoders=e}or(e){return Rp(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rp=(r,e)=>new Tw({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class $w{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new Cw(e,t,i),this.decoder=new Rw(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const aa=({name:r,prefix:e,encode:t,decode:i})=>new $w(r,e,t,i),Ts=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:o}=xw(t,e);return aa({prefix:r,name:e,encode:i,decode:a=>Iw(o(a))})},Nw=(r,e,t,i)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let a=r.length;for(;r[a-1]==="=";)--a;const u=new Uint8Array(a*t/8|0);let f=0,g=0,d=0;for(let _=0;_<a;++_){const O=o[r[_]];if(O===void 0)throw new SyntaxError(`Non-${i} character`);g=g<<t|O,f+=t,f>=8&&(f-=8,u[d++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return u},jw=(r,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let a="",u=0,f=0;for(let g=0;g<r.length;++g)for(f=f<<8|r[g],u+=8;u>t;)u-=t,a+=e[o&f>>u];if(u&&(a+=e[o&f<<t-u]),i)for(;a.length*t&7;)a+="=";return a},Xt=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>aa({prefix:e,name:r,encode(o){return jw(o,i,t)},decode(o){return Nw(o,i,t,r)}}),Fw=aa({prefix:"\0",name:"identity",encode:r=>Aw(r),decode:r=>Pw(r)}),Lw=Object.freeze(Object.defineProperty({__proto__:null,identity:Fw},Symbol.toStringTag,{value:"Module"})),Uw=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Mw=Object.freeze(Object.defineProperty({__proto__:null,base2:Uw},Symbol.toStringTag,{value:"Module"})),Bw=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),qw=Object.freeze(Object.defineProperty({__proto__:null,base8:Bw},Symbol.toStringTag,{value:"Module"})),zw=Ts({prefix:"9",name:"base10",alphabet:"0123456789"}),Hw=Object.freeze(Object.defineProperty({__proto__:null,base10:zw},Symbol.toStringTag,{value:"Module"})),Kw=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vw=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Gw=Object.freeze(Object.defineProperty({__proto__:null,base16:Kw,base16upper:Vw},Symbol.toStringTag,{value:"Module"})),kw=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ww=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jw=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Yw=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xw=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qw=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zw=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eE=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tE=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rE=Object.freeze(Object.defineProperty({__proto__:null,base32:kw,base32hex:Xw,base32hexpad:Zw,base32hexpadupper:eE,base32hexupper:Qw,base32pad:Jw,base32padupper:Yw,base32upper:Ww,base32z:tE},Symbol.toStringTag,{value:"Module"})),nE=Ts({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),iE=Ts({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),sE=Object.freeze(Object.defineProperty({__proto__:null,base36:nE,base36upper:iE},Symbol.toStringTag,{value:"Module"})),oE=Ts({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aE=Ts({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),cE=Object.freeze(Object.defineProperty({__proto__:null,base58btc:oE,base58flickr:aE},Symbol.toStringTag,{value:"Module"})),uE=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fE=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lE=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hE=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dE=Object.freeze(Object.defineProperty({__proto__:null,base64:uE,base64pad:fE,base64url:lE,base64urlpad:hE},Symbol.toStringTag,{value:"Module"})),Tp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),pE=Tp.reduce((r,e,t)=>(r[t]=e,r),[]),gE=Tp.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function yE(r){return r.reduce((e,t)=>(e+=pE[t],e),"")}function _E(r){const e=[];for(const t of r){const i=gE[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const vE=aa({prefix:"ðŸš€",name:"base256emoji",encode:yE,decode:_E}),bE=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:vE},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Oh={...Lw,...Mw,...qw,...Hw,...Gw,...rE,...sE,...cE,...dE,...bE};function $p(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const xh=$p("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Lc=$p("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Cp(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Np={utf8:xh,"utf-8":xh,hex:Oh.base16,latin1:Lc,ascii:Lc,binary:Lc,...Oh};function br(r,e="utf8"){const t=Np[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zu(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function lr(r,e="utf8"){const t=Np[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ih=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,a;i<o;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return r.concat(a||Array.prototype.slice.call(e))},mE=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),wE=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),EE=function(){function r(e,t,i,o){this.name=e,this.version=t,this.os=i,this.bot=o,this.type="bot-device"}return r}(),SE=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),DE=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),OE=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,xE=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ph=3,IE=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",OE]],Ah=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function PE(r){return r?Ch(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new DE:typeof navigator<"u"?Ch(navigator.userAgent):RE()}function AE(r){return r!==""&&IE.reduce(function(e,t){var i=t[0],o=t[1];if(e)return e;var a=o.exec(r);return!!a&&[i,a]},!1)}function Ch(r){var e=AE(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new SE;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<Ph&&(o=Ih(Ih([],o,!0),TE(Ph-o.length),!0)):o=[];var a=o.join("."),u=CE(r),f=xE.exec(r);return f&&f[1]?new EE(t,a,u,f[1]):new mE(t,a,u)}function CE(r){for(var e=0,t=Ah.length;e<t;e++){var i=Ah[e],o=i[0],a=i[1],u=a.exec(r);if(u)return o}return null}function RE(){var r=typeof process<"u"&&process.version;return r?new wE(process.version.slice(1)):null}function TE(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fu=function(r,e){return fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},fu(r,e)};function $E(r,e){fu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var lu=function(){return lu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},lu.apply(this,arguments)};function NE(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function jE(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function FE(r,e){return function(t,i){e(t,i,r)}}function LE(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function UE(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function ME(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function BE(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function qE(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function hu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jp(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function zE(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(jp(arguments[e]));return r}function HE(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Es(r){return this instanceof Es?(this.v=r,this):new Es(r)}function KE(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Es?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function VE(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Es(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function GE(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof hu=="function"?hu(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function kE(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function WE(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function JE(r){return r&&r.__esModule?r:{default:r}}function YE(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function XE(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const QE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return lu},__asyncDelegator:VE,__asyncGenerator:KE,__asyncValues:GE,__await:Es,__awaiter:UE,__classPrivateFieldGet:YE,__classPrivateFieldSet:XE,__createBinding:BE,__decorate:jE,__exportStar:qE,__extends:$E,__generator:ME,__importDefault:JE,__importStar:WE,__makeTemplateObject:kE,__metadata:LE,__param:FE,__read:jp,__rest:NE,__spread:zE,__spreadArrays:HE,__values:hu},Symbol.toStringTag,{value:"Module"})),ca=nn(QE);var Uc={},as={},Rh;function ZE(){if(Rh)return as;Rh=1,Object.defineProperty(as,"__esModule",{value:!0}),as.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return as.delay=r,as}var ni={},Mc={},ii={},Th;function e3(){return Th||(Th=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.ONE_THOUSAND=ii.ONE_HUNDRED=void 0,ii.ONE_HUNDRED=100,ii.ONE_THOUSAND=1e3),ii}var Bc={},$h;function t3(){return $h||($h=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(Bc)),Bc}var Nh;function Fp(){return Nh||(Nh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ca;e.__exportStar(e3(),r),e.__exportStar(t3(),r)}(Mc)),Mc}var jh;function r3(){if(jh)return ni;jh=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.fromMiliseconds=ni.toMiliseconds=void 0;const r=Fp();function e(i){return i*r.ONE_THOUSAND}ni.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return ni.fromMiliseconds=t,ni}var Fh;function n3(){return Fh||(Fh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ca;e.__exportStar(ZE(),r),e.__exportStar(r3(),r)}(Uc)),Uc}var $i={},Lh;function i3(){if(Lh)return $i;Lh=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:o})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return $i.Watch=r,$i.default=r,$i}var qc={},cs={},Uh;function s3(){if(Uh)return cs;Uh=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.IWatch=void 0;class r{}return cs.IWatch=r,cs}var Mh;function o3(){return Mh||(Mh=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ca.__exportStar(s3(),r)}(qc)),qc}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ca;e.__exportStar(n3(),r),e.__exportStar(i3(),r),e.__exportStar(o3(),r),e.__exportStar(Fp(),r)})(ve);var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=Up=dt.getLocation=dt.getLocationOrThrow=ef=dt.getNavigator=dt.getNavigatorOrThrow=Lp=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function ui(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}dt.getFromWindow=ui;function Bi(r){const e=ui(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}dt.getFromWindowOrThrow=Bi;function a3(){return Bi("document")}dt.getDocumentOrThrow=a3;function c3(){return ui("document")}var Lp=dt.getDocument=c3;function u3(){return Bi("navigator")}dt.getNavigatorOrThrow=u3;function f3(){return ui("navigator")}var ef=dt.getNavigator=f3;function l3(){return Bi("location")}dt.getLocationOrThrow=l3;function h3(){return ui("location")}var Up=dt.getLocation=h3;function d3(){return Bi("crypto")}dt.getCryptoOrThrow=d3;function p3(){return ui("crypto")}dt.getCrypto=p3;function g3(){return Bi("localStorage")}dt.getLocalStorageOrThrow=g3;function y3(){return ui("localStorage")}dt.getLocalStorage=y3;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});var Mp=tf.getWindowMetadata=void 0;const Bh=dt;function _3(){let r,e;try{r=Bh.getDocumentOrThrow(),e=Bh.getLocationOrThrow()}catch{return null}function t(){const O=r.getElementsByTagName("link"),S=[];for(let P=0;P<O.length;P++){const C=O[P],q=C.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const K=C.getAttribute("href");if(K)if(K.toLowerCase().indexOf("https:")===-1&&K.toLowerCase().indexOf("http:")===-1&&K.indexOf("//")!==0){let ie=e.protocol+"//"+e.host;if(K.indexOf("/")===0)ie+=K;else{const N=e.pathname.split("/");N.pop();const L=N.join("/");ie+=L+"/"+K}S.push(ie)}else if(K.indexOf("//")===0){const ie=e.protocol+K;S.push(ie)}else S.push(K)}}return S}function i(...O){const S=r.getElementsByTagName("meta");for(let P=0;P<S.length;P++){const C=S[P],q=["itemprop","property","name"].map(K=>C.getAttribute(K)).filter(K=>K?O.includes(K):!1);if(q.length&&q){const K=C.getAttribute("content");if(K)return K}}return""}function o(){let O=i("name","og:site_name","og:title","twitter:title");return O||(O=r.title),O}function a(){return i("description","og:description","twitter:description","keywords")}const u=o(),f=a(),g=e.origin,d=t();return{description:f,url:g,icons:d,name:u}}Mp=tf.getWindowMetadata=_3;var Ss={},v3=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Bp="%[a-f0-9]{2}",qh=new RegExp("("+Bp+")|([^%]+?)","gi"),zh=new RegExp("("+Bp+")+","gi");function du(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],du(t),du(i))}function b3(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(qh)||[],t=1;t<e.length;t++)r=du(e,t).join(""),e=r.match(qh)||[];return r}}function m3(r){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},t=zh.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=b3(t[0]);i!==t[0]&&(e[t[0]]=i)}t=zh.exec(r)}e["%C2"]="ï¿½";for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];r=r.replace(new RegExp(u,"g"),e[u])}return r}var w3=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return m3(r)}},E3=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},S3=function(r,e){for(var t={},i=Object.keys(r),o=Array.isArray(e),a=0;a<i.length;a++){var u=i[a],f=r[u];(o?e.indexOf(u)!==-1:e(u,f,r))&&(t[u]=f)}return t};(function(r){const e=v3,t=w3,i=E3,o=S3,a=N=>N==null,u=Symbol("encodeFragmentIdentifier");function f(N){switch(N.arrayFormat){case"index":return L=>(x,T)=>{const E=x.length;return T===void 0||N.skipNull&&T===null||N.skipEmptyString&&T===""?x:T===null?[...x,[_(L,N),"[",E,"]"].join("")]:[...x,[_(L,N),"[",_(E,N),"]=",_(T,N)].join("")]};case"bracket":return L=>(x,T)=>T===void 0||N.skipNull&&T===null||N.skipEmptyString&&T===""?x:T===null?[...x,[_(L,N),"[]"].join("")]:[...x,[_(L,N),"[]=",_(T,N)].join("")];case"colon-list-separator":return L=>(x,T)=>T===void 0||N.skipNull&&T===null||N.skipEmptyString&&T===""?x:T===null?[...x,[_(L,N),":list="].join("")]:[...x,[_(L,N),":list=",_(T,N)].join("")];case"comma":case"separator":case"bracket-separator":{const L=N.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(T,E)=>E===void 0||N.skipNull&&E===null||N.skipEmptyString&&E===""?T:(E=E===null?"":E,T.length===0?[[_(x,N),L,_(E,N)].join("")]:[[T,_(E,N)].join(N.arrayFormatSeparator)])}default:return L=>(x,T)=>T===void 0||N.skipNull&&T===null||N.skipEmptyString&&T===""?x:T===null?[...x,_(L,N)]:[...x,[_(L,N),"=",_(T,N)].join("")]}}function g(N){let L;switch(N.arrayFormat){case"index":return(x,T,E)=>{if(L=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!L){E[x]=T;return}E[x]===void 0&&(E[x]={}),E[x][L[1]]=T};case"bracket":return(x,T,E)=>{if(L=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!L){E[x]=T;return}if(E[x]===void 0){E[x]=[T];return}E[x]=[].concat(E[x],T)};case"colon-list-separator":return(x,T,E)=>{if(L=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!L){E[x]=T;return}if(E[x]===void 0){E[x]=[T];return}E[x]=[].concat(E[x],T)};case"comma":case"separator":return(x,T,E)=>{const l=typeof T=="string"&&T.includes(N.arrayFormatSeparator),m=typeof T=="string"&&!l&&O(T,N).includes(N.arrayFormatSeparator);T=m?O(T,N):T;const k=l||m?T.split(N.arrayFormatSeparator).map(W=>O(W,N)):T===null?T:O(T,N);E[x]=k};case"bracket-separator":return(x,T,E)=>{const l=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!l){E[x]=T&&O(T,N);return}const m=T===null?[]:T.split(N.arrayFormatSeparator).map(k=>O(k,N));if(E[x]===void 0){E[x]=m;return}E[x]=[].concat(E[x],m)};default:return(x,T,E)=>{if(E[x]===void 0){E[x]=T;return}E[x]=[].concat(E[x],T)}}}function d(N){if(typeof N!="string"||N.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(N,L){return L.encode?L.strict?e(N):encodeURIComponent(N):N}function O(N,L){return L.decode?t(N):N}function S(N){return Array.isArray(N)?N.sort():typeof N=="object"?S(Object.keys(N)).sort((L,x)=>Number(L)-Number(x)).map(L=>N[L]):N}function P(N){const L=N.indexOf("#");return L!==-1&&(N=N.slice(0,L)),N}function C(N){let L="";const x=N.indexOf("#");return x!==-1&&(L=N.slice(x)),L}function q(N){N=P(N);const L=N.indexOf("?");return L===-1?"":N.slice(L+1)}function K(N,L){return L.parseNumbers&&!Number.isNaN(Number(N))&&typeof N=="string"&&N.trim()!==""?N=Number(N):L.parseBooleans&&N!==null&&(N.toLowerCase()==="true"||N.toLowerCase()==="false")&&(N=N.toLowerCase()==="true"),N}function ie(N,L){L=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},L),d(L.arrayFormatSeparator);const x=g(L),T=Object.create(null);if(typeof N!="string"||(N=N.trim().replace(/^[?#&]/,""),!N))return T;for(const E of N.split("&")){if(E==="")continue;let[l,m]=i(L.decode?E.replace(/\+/g," "):E,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(L.arrayFormat)?m:O(m,L),x(O(l,L),m,T)}for(const E of Object.keys(T)){const l=T[E];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=K(l[m],L);else T[E]=K(l,L)}return L.sort===!1?T:(L.sort===!0?Object.keys(T).sort():Object.keys(T).sort(L.sort)).reduce((E,l)=>{const m=T[l];return m&&typeof m=="object"&&!Array.isArray(m)?E[l]=S(m):E[l]=m,E},Object.create(null))}r.extract=q,r.parse=ie,r.stringify=(N,L)=>{if(!N)return"";L=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},L),d(L.arrayFormatSeparator);const x=m=>L.skipNull&&a(N[m])||L.skipEmptyString&&N[m]==="",T=f(L),E={};for(const m of Object.keys(N))x(m)||(E[m]=N[m]);const l=Object.keys(E);return L.sort!==!1&&l.sort(L.sort),l.map(m=>{const k=N[m];return k===void 0?"":k===null?_(m,L):Array.isArray(k)?k.length===0&&L.arrayFormat==="bracket-separator"?_(m,L)+"[]":k.reduce(T(m),[]).join("&"):_(m,L)+"="+_(k,L)}).filter(m=>m.length>0).join("&")},r.parseUrl=(N,L)=>{L=Object.assign({decode:!0},L);const[x,T]=i(N,"#");return Object.assign({url:x.split("?")[0]||"",query:ie(q(N),L)},L&&L.parseFragmentIdentifier&&T?{fragmentIdentifier:O(T,L)}:{})},r.stringifyUrl=(N,L)=>{L=Object.assign({encode:!0,strict:!0,[u]:!0},L);const x=P(N.url).split("?")[0]||"",T=r.extract(N.url),E=r.parse(T,{sort:!1}),l=Object.assign(E,N.query);let m=r.stringify(l,L);m&&(m=`?${m}`);let k=C(N.url);return N.fragmentIdentifier&&(k=`#${L[u]?_(N.fragmentIdentifier,L):N.fragmentIdentifier}`),`${x}${m}${k}`},r.pick=(N,L,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[u]:!1},x);const{url:T,query:E,fragmentIdentifier:l}=r.parseUrl(N,x);return r.stringifyUrl({url:T,query:o(E,L),fragmentIdentifier:l},x)},r.exclude=(N,L,x)=>{const T=Array.isArray(L)?E=>!L.includes(E):(E,l)=>!L(E,l);return r.pick(N,T,x)}})(Ss);const D3={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function O3(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const o=r[i];t.push(...o.accounts)}),t}function qp(r,e){return r.includes(":")?[r]:e.chains||[]}const zp="base10",fr="base16",pu="base64pad",rf="utf8",Hp=0,fi=1,x3=0,Hh=1,gu=12,nf=32;function I3(){const r=Qu.generateKeyPair();return{privateKey:lr(r.secretKey,fr),publicKey:lr(r.publicKey,fr)}}function yu(){const r=Mi.randomBytes(nf);return lr(r,fr)}function P3(r,e){const t=Qu.sharedKey(br(r,fr),br(e,fr)),i=new dw(oa.SHA256,t).expand(nf);return lr(i,fr)}function A3(r){const e=oa.hash(br(r,fr));return lr(e,fr)}function Li(r){const e=oa.hash(br(r,rf));return lr(e,fr)}function C3(r){return br(`${r}`,zp)}function $s(r){return Number(lr(r,zp))}function R3(r){const e=C3(typeof r.type<"u"?r.type:Hp);if($s(e)===fi&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?br(r.senderPublicKey,fr):void 0,i=typeof r.iv<"u"?br(r.iv,fr):Mi.randomBytes(gu),o=new Yu.ChaCha20Poly1305(br(r.symKey,fr)).seal(i,br(r.message,rf));return $3({type:e,sealed:o,iv:i,senderPublicKey:t})}function T3(r){const e=new Yu.ChaCha20Poly1305(br(r.symKey,fr)),{sealed:t,iv:i}=Xo(r.encoded),o=e.open(i,t);if(o===null)throw new Error("Failed to decrypt");return lr(o,rf)}function $3(r){if($s(r.type)===fi){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lr(uu([r.type,r.senderPublicKey,r.iv,r.sealed]),pu)}return lr(uu([r.type,r.iv,r.sealed]),pu)}function Xo(r){const e=br(r,pu),t=e.slice(x3,Hh),i=Hh;if($s(t)===fi){const f=i+nf,g=f+gu,d=e.slice(i,f),_=e.slice(f,g),O=e.slice(g);return{type:t,sealed:O,iv:_,senderPublicKey:d}}const o=i+gu,a=e.slice(i,o),u=e.slice(o);return{type:t,sealed:u,iv:a}}function N3(r,e){const t=Xo(r);return Kp({type:$s(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?lr(t.senderPublicKey,fr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Kp(r){const e=(r==null?void 0:r.type)||Hp;if(e===fi){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function Kh(r){return r.type===fi&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var j3=Object.defineProperty,Vh=Object.getOwnPropertySymbols,F3=Object.prototype.hasOwnProperty,L3=Object.prototype.propertyIsEnumerable,Gh=(r,e,t)=>e in r?j3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kh=(r,e)=>{for(var t in e||(e={}))F3.call(e,t)&&Gh(r,t,e[t]);if(Vh)for(var t of Vh(e))L3.call(e,t)&&Gh(r,t,e[t]);return r};const U3="ReactNative",ai={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},M3="js";function sf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Vp(){return!Lp()&&!!ef()&&navigator.product===U3}function of(){return!sf()&&!!ef()}function Gp(){return Vp()?ai.reactNative:sf()?ai.node:of()?ai.browser:ai.unknown}function B3(r,e){let t=Ss.parse(r);return t=kh(kh({},t),e),r=Ss.stringify(t),r}function q3(){return Mp()||{name:"",description:"",url:"",icons:[""]}}function z3(){const r=PE();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function H3(){var r;const e=Gp();return e===ai.browser?[e,((r=Up())==null?void 0:r.host)||"unknown"].join(":"):e}function K3(r,e,t){const i=z3(),o=H3();return[[r,e].join("-"),[M3,t].join("-"),i,o].join("/")}function V3({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:o,projectId:a,useOnCloseEvent:u}){const f=t.split("?"),g=K3(r,e,i),d={auth:o,ua:g,projectId:a,useOnCloseEvent:u||void 0},_=B3(f[1]||"",d);return f[0]+"?"+_}function ci(r,e){return r.filter(t=>e.includes(t)).length===r.length}function kp(r){return Object.fromEntries(r.entries())}function Wp(r){return new Map(Object.entries(r))}function Ni(r=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(r||ve.FIVE_MINUTES);let i,o,a;return{resolve:u=>{a&&i&&(clearTimeout(a),i(u))},reject:u=>{a&&o&&(clearTimeout(a),o(u))},done:()=>new Promise((u,f)=>{a=setTimeout(()=>{f(new Error(e))},t),i=u,o=f})}}function Qo(r,e,t){return new Promise(async(i,o)=>{const a=setTimeout(()=>o(new Error(t)),e);try{const u=await r;i(u)}catch(u){o(u)}clearTimeout(a)})}function Jp(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function G3(r){return Jp("topic",r)}function k3(r){return Jp("id",r)}function Yp(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function tn(r,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(r))}function Un(r){return Date.now()>=ve.toMiliseconds(r)}function Kt(r,e){return`${r}${e?`:${e}`:""}`}function zc(r=[],e=[]){return[...new Set([...r,...e])]}async function W3({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let o=i==null?void 0:i.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const a=`${o}/wc?requestId=${r}&sessionTopic=${e}`,u=Gp();u===ai.browser?window.open(a,"_self","noreferrer noopener"):u===ai.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(a)}catch(i){console.error(i)}}const J3="irn";function _u(r){return(r==null?void 0:r.relay)||{protocol:J3}}function Go(r){const e=D3[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var Y3=Object.defineProperty,Wh=Object.getOwnPropertySymbols,X3=Object.prototype.hasOwnProperty,Q3=Object.prototype.propertyIsEnumerable,Jh=(r,e,t)=>e in r?Y3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Z3=(r,e)=>{for(var t in e||(e={}))X3.call(e,t)&&Jh(r,t,e[t]);if(Wh)for(var t of Wh(e))Q3.call(e,t)&&Jh(r,t,e[t]);return r};function eS(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(o=>{if(o.startsWith(i)){const a=o.replace(i,""),u=r[o];t[a]=u}}),t}function tS(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),o=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",u=Ss.parse(a);return{protocol:i,topic:rS(o[0]),version:parseInt(o[1],10),symKey:u.symKey,relay:eS(u)}}function rS(r){return r.startsWith("//")?r.substring(2):r}function nS(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(o=>{const a=t+e+o;r[o]&&(i[a]=r[o])}),i}function iS(r){return`${r.protocol}:${r.topic}@${r.version}?`+Ss.stringify(Z3({symKey:r.symKey},nS(r.relay)))}function qi(r){const e=[];return r.forEach(t=>{const[i,o]=t.split(":");e.push(`${i}:${o}`)}),e}function sS(r){const e=[];return Object.values(r).forEach(t=>{e.push(...qi(t.accounts))}),e}function oS(r,e){const t=[];return Object.values(r).forEach(i=>{qi(i.accounts).includes(e)&&t.push(...i.methods)}),t}function aS(r,e){const t=[];return Object.values(r).forEach(i=>{qi(i.accounts).includes(e)&&t.push(...i.events)}),t}function cS(r,e){const t=Wo(r,e);if(t)throw new Error(t.message);const i={};for(const[o,a]of Object.entries(r))i[o]={methods:a.methods,events:a.events,chains:a.accounts.map(u=>`${u.split(":")[0]}:${u.split(":")[1]}`)};return i}function Xp(r){return r.includes(":")}function ko(r){return Xp(r)?r.split(":")[0]:r}const uS={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},fS={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function fe(r,e){const{message:t,code:i}=fS[r];return{message:e?`${t} ${e}`:t,code:i}}function jt(r,e){const{message:t,code:i}=uS[r];return{message:e?`${t} ${e}`:t,code:i}}function xn(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function Ui(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ur(r){return typeof r>"u"}function Jt(r,e){return e&&ur(r)?!0:typeof r=="string"&&!!r.trim().length}function af(r,e){return e&&ur(r)?!0:typeof r=="number"&&!isNaN(r)}function lS(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),o=Object.keys(t);let a=!0;return ci(o,i)?(i.forEach(u=>{const{accounts:f,methods:g,events:d}=r.namespaces[u],_=qi(f),O=t[u];(!ci(qp(u,O),_)||!ci(O.methods,g)||!ci(O.events,d))&&(a=!1)}),a):!1}function cf(r){return Jt(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function hS(r){if(Jt(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&cf(t)}}return!1}function dS(r){if(Jt(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function pS(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function gS(r){return r==null?void 0:r.topic}function yS(r,e){let t=null;return Jt(r==null?void 0:r.publicKey,!1)||(t=fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Yh(r){let e=!0;return xn(r)?r.length&&(e=r.every(t=>Jt(t,!1))):e=!1,e}function _S(r,e,t){let i=null;return xn(e)?e.forEach(o=>{i||(!cf(o)||!o.includes(r))&&(i=jt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):i=jt("UNSUPPORTED_CHAINS",`${t}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),i}function vS(r,e){let t=null;return Object.entries(r).forEach(([i,o])=>{if(t)return;const a=_S(i,qp(i,o),`${e} requiredNamespace`);a&&(t=a)}),t}function bS(r,e){let t=null;return xn(r)?r.forEach(i=>{t||hS(i)||(t=jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function mS(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const o=bS(i==null?void 0:i.accounts,`${e} namespace`);o&&(t=o)}),t}function wS(r,e){let t=null;return Yh(r==null?void 0:r.methods)?Yh(r==null?void 0:r.events)||(t=jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Qp(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const o=wS(i,`${e}, namespace`);o&&(t=o)}),t}function ES(r,e,t){let i=null;if(r&&Ui(r)){const o=Qp(r,e);o&&(i=o);const a=vS(r,e);a&&(i=a)}else i=fe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Wo(r,e){let t=null;if(r&&Ui(r)){const i=Qp(r,e);i&&(t=i);const o=mS(r,e);o&&(t=o)}else t=fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Zp(r){return Jt(r.protocol,!0)}function SS(r,e){let t=!1;return e&&!r?t=!0:r&&xn(r)&&r.length&&r.forEach(i=>{t=Zp(i)}),t}function DS(r){return typeof r=="number"}function vr(r){return typeof r<"u"&&typeof r!==null}function OS(r){return!(!r||typeof r!="object"||!r.code||!af(r.code,!1)||!r.message||!Jt(r.message,!1))}function xS(r){return!(ur(r)||!Jt(r.method,!1))}function IS(r){return!(ur(r)||ur(r.result)&&ur(r.error)||!af(r.id,!1)||!Jt(r.jsonrpc,!1))}function PS(r){return!(ur(r)||!Jt(r.name,!1))}function Xh(r,e){return!(!cf(e)||!sS(r).includes(e))}function AS(r,e,t){return Jt(t,!1)?oS(r,e).includes(t):!1}function CS(r,e,t){return Jt(t,!1)?aS(r,e).includes(t):!1}function Qh(r,e,t){let i=null;const o=RS(r),a=TS(e),u=Object.keys(o),f=Object.keys(a),g=Zh(Object.keys(r)),d=Zh(Object.keys(e)),_=g.filter(O=>!d.includes(O));return _.length&&(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${_.toString()}
      Received: ${Object.keys(e).toString()}`)),ci(u,f)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(O=>{if(!O.includes(":")||i)return;const S=qi(e[O].accounts);S.includes(O)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${O}
        Required: ${O}
        Approved: ${S.toString()}`))}),u.forEach(O=>{i||(ci(o[O].methods,a[O].methods)?ci(o[O].events,a[O].events)||(i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${O}`)):i=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${O}`))}),i}function RS(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(o=>{e[o]={methods:r[t].methods,events:r[t].events}})}),e}function Zh(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function TS(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=qi(r[t].accounts);i==null||i.forEach(o=>{e[o]={accounts:r[t].accounts.filter(a=>a.includes(`${o}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function $S(r,e){return af(r,!1)&&r<=e.max&&r>=e.min}var ua={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vu=function(r,e){return vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},vu(r,e)};function NS(r,e){vu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var bu=function(){return bu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},bu.apply(this,arguments)};function jS(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function FS(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function LS(r,e){return function(t,i){e(t,i,r)}}function US(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function MS(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function BS(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function qS(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function zS(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function mu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eg(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function HS(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(eg(arguments[e]));return r}function KS(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Ds(r){return this instanceof Ds?(this.v=r,this):new Ds(r)}function VS(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Ds?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function GS(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Ds(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function kS(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof mu=="function"?mu(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function WS(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function JS(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function YS(r){return r&&r.__esModule?r:{default:r}}function XS(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function QS(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const ZS=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return bu},__asyncDelegator:GS,__asyncGenerator:VS,__asyncValues:kS,__await:Ds,__awaiter:MS,__classPrivateFieldGet:XS,__classPrivateFieldSet:QS,__createBinding:qS,__decorate:FS,__exportStar:zS,__extends:NS,__generator:BS,__importDefault:YS,__importStar:JS,__makeTemplateObject:WS,__metadata:US,__param:LS,__read:eg,__rest:jS,__spread:HS,__spreadArrays:KS,__values:mu},Symbol.toStringTag,{value:"Module"})),tg=nn(ZS);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});function e2(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch{return r}}Ns.safeJsonParse=e2;function t2(r){return typeof r=="string"?r:JSON.stringify(r,(e,t)=>typeof t>"u"?null:t)}Ns.safeJsonStringify=t2;var us={exports:{}},ed;function r2(){return ed||(ed=1,function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof rt<"u"&&rt.localStorage?us.exports=rt.localStorage:typeof window<"u"&&window.localStorage?us.exports=window.localStorage:us.exports=new e}()),us.exports}var Hc={},fs={},td;function n2(){if(td)return fs;td=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.IKeyValueStorage=void 0;class r{}return fs.IKeyValueStorage=r,fs}var ls={},rd;function i2(){if(rd)return ls;rd=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.parseEntry=void 0;const r=Ns;function e(t){var i;return[t[0],r.safeJsonParse((i=t[1])!==null&&i!==void 0?i:"")]}return ls.parseEntry=e,ls}var nd;function s2(){return nd||(nd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=tg;e.__exportStar(n2(),r),e.__exportStar(i2(),r)}(Hc)),Hc}Object.defineProperty(ua,"__esModule",{value:!0});ua.KeyValueStorage=void 0;const ji=tg,id=Ns,o2=ji.__importDefault(r2()),a2=s2();class rg{constructor(){this.localStorage=o2.default}getKeys(){return ji.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ji.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(a2.parseEntry)})}getItem(e){return ji.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return id.safeJsonParse(t)})}setItem(e,t){return ji.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,id.safeJsonStringify(t))})}removeItem(e){return ji.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ua.KeyValueStorage=rg;var c2=ua.default=rg,js={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wu=function(r,e){return wu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},wu(r,e)};function u2(r,e){wu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Eu=function(){return Eu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Eu.apply(this,arguments)};function f2(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function l2(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function h2(r,e){return function(t,i){e(t,i,r)}}function d2(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function p2(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function g2(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function y2(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function _2(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Su(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ng(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function v2(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(ng(arguments[e]));return r}function b2(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Os(r){return this instanceof Os?(this.v=r,this):new Os(r)}function m2(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Os?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function w2(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Os(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function E2(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Su=="function"?Su(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function S2(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function D2(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function O2(r){return r&&r.__esModule?r:{default:r}}function x2(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function I2(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const P2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Eu},__asyncDelegator:w2,__asyncGenerator:m2,__asyncValues:E2,__await:Os,__awaiter:p2,__classPrivateFieldGet:x2,__classPrivateFieldSet:I2,__createBinding:y2,__decorate:l2,__exportStar:_2,__extends:u2,__generator:g2,__importDefault:O2,__importStar:D2,__makeTemplateObject:S2,__metadata:d2,__param:h2,__read:ng,__rest:f2,__spread:v2,__spreadArrays:b2,__values:Su},Symbol.toStringTag,{value:"Module"})),fa=nn(P2);var hs={},Kc={},ds={};let li=class{};const A2=Object.freeze(Object.defineProperty({__proto__:null,IEvents:li},Symbol.toStringTag,{value:"Module"})),C2=nn(A2);var sd;function R2(){if(sd)return ds;sd=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.IHeartBeat=void 0;const r=C2;class e extends r.IEvents{constructor(i){super()}}return ds.IHeartBeat=e,ds}var od;function ig(){return od||(od=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),fa.__exportStar(R2(),r)}(Kc)),Kc}var Vc={},si={},ad;function T2(){if(ad)return si;ad=1,Object.defineProperty(si,"__esModule",{value:!0}),si.HEARTBEAT_EVENTS=si.HEARTBEAT_INTERVAL=void 0;const r=ve;return si.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,si.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},si}var cd;function sg(){return cd||(cd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),fa.__exportStar(T2(),r)}(Vc)),Vc}var ud;function $2(){if(ud)return hs;ud=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.HeartBeat=void 0;const r=fa,e=xr,t=ve,i=ig(),o=sg();class a extends i.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return r.__awaiter(this,void 0,void 0,function*(){const g=new a(f);return yield g.init(),g})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return hs.HeartBeat=a,hs}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=fa;e.__exportStar($2(),r),e.__exportStar(ig(),r),e.__exportStar(sg(),r)})(js);var Ze={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Du=function(r,e){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Du(r,e)};function N2(r,e){Du(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ou=function(){return Ou=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ou.apply(this,arguments)};function j2(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function F2(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function L2(r,e){return function(t,i){e(t,i,r)}}function U2(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function M2(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function B2(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function q2(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function z2(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function xu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function og(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function H2(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(og(arguments[e]));return r}function K2(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function xs(r){return this instanceof xs?(this.v=r,this):new xs(r)}function V2(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof xs?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function G2(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:xs(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function k2(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xu=="function"?xu(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function W2(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function J2(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Y2(r){return r&&r.__esModule?r:{default:r}}function X2(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function Q2(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const Z2=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ou},__asyncDelegator:G2,__asyncGenerator:V2,__asyncValues:k2,__await:xs,__awaiter:M2,__classPrivateFieldGet:X2,__classPrivateFieldSet:Q2,__createBinding:q2,__decorate:F2,__exportStar:z2,__extends:N2,__generator:B2,__importDefault:Y2,__importStar:J2,__makeTemplateObject:W2,__metadata:U2,__param:L2,__read:og,__rest:j2,__spread:H2,__spreadArrays:K2,__values:xu},Symbol.toStringTag,{value:"Module"})),e6=nn(Z2);var Gc,fd;function t6(){if(fd)return Gc;fd=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Gc=e;function e(t,i,o){var a=o&&o.stringify||r,u=1;if(typeof t=="object"&&t!==null){var f=i.length+u;if(f===1)return t;var g=new Array(f);g[0]=a(t);for(var d=1;d<f;d++)g[d]=a(i[d]);return g.join(" ")}if(typeof t!="string")return t;var _=i.length;if(_===0)return t;for(var O="",S=1-u,P=-1,C=t&&t.length||0,q=0;q<C;){if(t.charCodeAt(q)===37&&q+1<C){switch(P=P>-1?P:0,t.charCodeAt(q+1)){case 100:case 102:if(S>=_||i[S]==null)break;P<q&&(O+=t.slice(P,q)),O+=Number(i[S]),P=q+2,q++;break;case 105:if(S>=_||i[S]==null)break;P<q&&(O+=t.slice(P,q)),O+=Math.floor(Number(i[S])),P=q+2,q++;break;case 79:case 111:case 106:if(S>=_||i[S]===void 0)break;P<q&&(O+=t.slice(P,q));var K=typeof i[S];if(K==="string"){O+="'"+i[S]+"'",P=q+2,q++;break}if(K==="function"){O+=i[S].name||"<anonymous>",P=q+2,q++;break}O+=a(i[S]),P=q+2,q++;break;case 115:if(S>=_)break;P<q&&(O+=t.slice(P,q)),O+=String(i[S]),P=q+2,q++;break;case 37:P<q&&(O+=t.slice(P,q)),O+="%",P=q+2,q++,S--;break}++S}++q}return P===-1?t:(P<C&&(O+=t.slice(P)),O)}return Gc}var kc,ld;function r6(){if(ld)return kc;ld=1;const r=t6();kc=o;const e=T().console||{},t={mapHttpRequest:C,mapHttpResponse:C,wrapRequestSerializer:q,wrapResponseSerializer:q,wrapErrorSerializer:q,req:C,res:C,err:S};function i(E,l){return Array.isArray(E)?E.filter(function(k){return k!=="!stdSerializers.err"}):E===!0?Object.keys(l):!1}function o(E){E=E||{},E.browser=E.browser||{};const l=E.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const k=E.serializers||{},W=i(E.browser.serialize,k);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),E.enabled===!1&&(E.level="silent");const de=E.level||"info",w=Object.create(m);w.log||(w.log=K),Object.defineProperty(w,"levelVal",{get:ee}),Object.defineProperty(w,"level",{get:X,set:V});const A={transmit:l,serialize:W,asObject:E.browser.asObject,levels:ce,timestamp:P(E)};w.levels=o.levels,w.level=de,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=K,w.serializers=k,w._serialize=W,w._stdErrSerialize=se,w.child=G,l&&(w._logEvent=O());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function V(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,a(A,w,"error","log"),a(A,w,"fatal","error"),a(A,w,"warn","error"),a(A,w,"info","log"),a(A,w,"debug","log"),a(A,w,"trace","log")}function G(Y,re){if(!Y)throw new Error("missing bindings for child Pino");re=re||{},W&&Y.serializers&&(re.serializers=Y.serializers);const me=re.serializers;if(W&&me){var oe=Object.assign({},k,me),we=E.browser.serialize===!0?Object.keys(oe):W;delete Y.serializers,g([Y],we,oe,this._stdErrSerialize)}function le(_e){this._childLevel=(_e._childLevel|0)+1,this.error=d(_e,Y,"error"),this.fatal=d(_e,Y,"fatal"),this.warn=d(_e,Y,"warn"),this.info=d(_e,Y,"info"),this.debug=d(_e,Y,"debug"),this.trace=d(_e,Y,"trace"),oe&&(this.serializers=oe,this._serialize=we),l&&(this._logEvent=O([].concat(_e._logEvent.bindings,Y)))}return le.prototype=this,new le(this)}return w}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ie,epochTime:N,unixTime:L,isoTime:x});function a(E,l,m,k){const W=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?K:W[m]?W[m]:e[m]||e[k]||K,u(E,l,m)}function u(E,l,m){!E.transmit&&l[m]===K||(l[m]=function(k){return function(){const se=E.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var w=0;w<ce.length;w++)ce[w]=arguments[w];if(E.serialize&&!E.asObject&&g(ce,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?k.call(de,f(this,m,ce,se)):k.apply(de,ce),E.transmit){const A=E.transmit.level||l.level,ee=o.levels.values[A],X=o.levels.values[m];if(X<ee)return;_(this,{ts:se,methodLevel:m,methodValue:X,transmitLevel:A,transmitValue:o.levels.values[E.transmit.level||l.level],send:E.transmit.send,val:l.levelVal},ce)}}}(l[m]))}function f(E,l,m,k){E._serialize&&g(m,E._serialize,E.serializers,E._stdErrSerialize);const W=m.slice();let se=W[0];const ce={};k&&(ce.time=k),ce.level=o.levels.values[l];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof W[0]=="object";)Object.assign(ce,W.shift());se=W.length?r(W.shift(),W):void 0}else typeof se=="string"&&(se=r(W.shift(),W));return se!==void 0&&(ce.msg=se),ce}function g(E,l,m,k){for(const W in E)if(k&&E[W]instanceof Error)E[W]=o.stdSerializers.err(E[W]);else if(typeof E[W]=="object"&&!Array.isArray(E[W]))for(const se in E[W])l&&l.indexOf(se)>-1&&se in m&&(E[W][se]=m[se](E[W][se]))}function d(E,l,m){return function(){const k=new Array(1+arguments.length);k[0]=l;for(var W=1;W<k.length;W++)k[W]=arguments[W-1];return E[m].apply(this,k)}}function _(E,l,m){const k=l.send,W=l.ts,se=l.methodLevel,ce=l.methodValue,de=l.val,w=E._logEvent.bindings;g(m,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=W,E._logEvent.messages=m.filter(function(A){return w.indexOf(A)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ce,k(se,E._logEvent,de),E._logEvent=O(w)}function O(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function S(E){const l={type:E.constructor.name,msg:E.message,stack:E.stack};for(const m in E)l[m]===void 0&&(l[m]=E[m]);return l}function P(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ie:N}function C(){return{}}function q(E){return E}function K(){}function ie(){return!1}function N(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function T(){function E(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return kc}var oi={},hd;function ag(){return hd||(hd=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.PINO_CUSTOM_CONTEXT_KEY=oi.PINO_LOGGER_DEFAULTS=void 0,oi.PINO_LOGGER_DEFAULTS={level:"info"},oi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),oi}var cr={},dd;function n6(){if(dd)return cr;dd=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const r=ag();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||r.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,g=r.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}cr.getBrowserLoggerContext=t;function i(f,g,d=r.PINO_CUSTOM_CONTEXT_KEY){return f[d]=g,f}cr.setBrowserLoggerContext=i;function o(f,g=r.PINO_CUSTOM_CONTEXT_KEY){let d="";return typeof f.bindings>"u"?d=t(f,g):d=f.bindings().context||"",d}cr.getLoggerContext=o;function a(f,g,d=r.PINO_CUSTOM_CONTEXT_KEY){const _=o(f,d);return _.trim()?`${_}/${g}`:g}cr.formatChildLoggerContext=a;function u(f,g,d=r.PINO_CUSTOM_CONTEXT_KEY){const _=a(f,g,d),O=f.child({context:_});return i(O,_,d)}return cr.generateChildLogger=u,cr}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;const e=e6,t=e.__importDefault(r6());Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(ag(),r),e.__exportStar(n6(),r)})(Ze);class i6 extends li{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class s6 extends li{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class o6{constructor(e,t){this.logger=e,this.core=t}}let a6=class extends li{constructor(e,t){super(),this.relayer=e,this.logger=t}},c6=class extends li{constructor(e){super()}},u6=class{constructor(e,t,i,o){this.core=e,this.logger=t,this.name=i}};class f6 extends li{constructor(e,t){super(),this.relayer=e,this.logger=t}}class l6 extends li{constructor(e,t){super(),this.core=e,this.logger=t}}let h6=class{constructor(e,t){this.projectId=e,this.logger=t}},d6=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class p6{constructor(e){this.client=e}}const g6=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),y6=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function _6(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return y6(r)}catch{return r}}function v6(r){return typeof r=="string"?r:g6(r)||""}var uf={},cg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Fe,t=Ir;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function f(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,d){if(d===void 0&&(d=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var _=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=g[_++],d--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(_=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,_,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=g[_++],d--;return this},f.prototype.finish=function(g){if(!this._finished){var d=this._bytesHashed,_=this._bufferLength,O=d/536870912|0,S=d<<3,P=d%128<112?128:256;this._buffer[_]=128;for(var C=_+1;C<P-8;C++)this._buffer[C]=0;e.writeUint32BE(O,this._buffer,P-8),e.writeUint32BE(S,this._buffer,P-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var C=0;C<this.digestLength/8;C++)e.writeUint32BE(this._stateHi[C],g,C*8),e.writeUint32BE(this._stateLo[C],g,C*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){t.wipe(g.stateHi),t.wipe(g.stateLo),g.buffer&&t.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();r.SHA512=i;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(f,g,d,_,O,S,P){for(var C=d[0],q=d[1],K=d[2],ie=d[3],N=d[4],L=d[5],x=d[6],T=d[7],E=_[0],l=_[1],m=_[2],k=_[3],W=_[4],se=_[5],ce=_[6],de=_[7],w,A,ee,X,V,G,Y,re;P>=128;){for(var me=0;me<16;me++){var oe=8*me+S;f[me]=e.readUint32BE(O,oe),g[me]=e.readUint32BE(O,oe+4)}for(var me=0;me<80;me++){var we=C,le=q,_e=K,z=ie,B=N,j=L,p=x,R=T,ae=E,he=l,Oe=m,ze=k,Ve=W,Le=se,yt=ce,_t=de;if(w=T,A=de,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=(N>>>14|W<<32-14)^(N>>>18|W<<32-18)^(W>>>41-32|N<<32-(41-32)),A=(W>>>14|N<<32-14)^(W>>>18|N<<32-18)^(N>>>41-32|W<<32-(41-32)),V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,w=N&L^~N&x,A=W&se^~W&ce,V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,w=o[me*2],A=o[me*2+1],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,w=f[me%16],A=g[me%16],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,ee=Y&65535|re<<16,X=V&65535|G<<16,w=ee,A=X,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=(C>>>28|E<<32-28)^(E>>>34-32|C<<32-(34-32))^(E>>>39-32|C<<32-(39-32)),A=(E>>>28|C<<32-28)^(C>>>34-32|E<<32-(34-32))^(C>>>39-32|E<<32-(39-32)),V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,w=C&q^C&K^q&K,A=E&l^E&m^l&m,V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,R=Y&65535|re<<16,_t=V&65535|G<<16,w=z,A=ze,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=ee,A=X,V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,z=Y&65535|re<<16,ze=V&65535|G<<16,q=we,K=le,ie=_e,N=z,L=B,x=j,T=p,C=R,l=ae,m=he,k=Oe,W=ze,se=Ve,ce=Le,de=yt,E=_t,me%16===15)for(var oe=0;oe<16;oe++)w=f[oe],A=g[oe],V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=f[(oe+9)%16],A=g[(oe+9)%16],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,ee=f[(oe+1)%16],X=g[(oe+1)%16],w=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,A=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,ee=f[(oe+14)%16],X=g[(oe+14)%16],w=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,A=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,f[oe]=Y&65535|re<<16,g[oe]=V&65535|G<<16}w=C,A=E,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[0],A=_[0],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[0]=C=Y&65535|re<<16,_[0]=E=V&65535|G<<16,w=q,A=l,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[1],A=_[1],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[1]=q=Y&65535|re<<16,_[1]=l=V&65535|G<<16,w=K,A=m,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[2],A=_[2],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[2]=K=Y&65535|re<<16,_[2]=m=V&65535|G<<16,w=ie,A=k,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[3],A=_[3],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[3]=ie=Y&65535|re<<16,_[3]=k=V&65535|G<<16,w=N,A=W,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[4],A=_[4],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[4]=N=Y&65535|re<<16,_[4]=W=V&65535|G<<16,w=L,A=se,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[5],A=_[5],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[5]=L=Y&65535|re<<16,_[5]=se=V&65535|G<<16,w=x,A=ce,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[6],A=_[6],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[6]=x=Y&65535|re<<16,_[6]=ce=V&65535|G<<16,w=T,A=de,V=A&65535,G=A>>>16,Y=w&65535,re=w>>>16,w=d[7],A=_[7],V+=A&65535,G+=A>>>16,Y+=w&65535,re+=w>>>16,G+=V>>>16,Y+=G>>>16,re+=Y>>>16,d[7]=T=Y&65535|re<<16,_[7]=de=V&65535|G<<16,S+=128,P-=128}return S}function u(f){var g=new i;g.update(f);var d=g.digest();return g.clean(),d}r.hash=u})(cg);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=Mi,t=cg,i=Ir;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function o(z){const B=new Float64Array(16);if(z)for(let j=0;j<z.length;j++)B[j]=z[j];return B}const a=new Uint8Array(32);a[0]=9;const u=o(),f=o([1]),g=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(z,B){for(let j=0;j<16;j++)z[j]=B[j]|0}function C(z){let B=1;for(let j=0;j<16;j++){let p=z[j]+B+65535;B=Math.floor(p/65536),z[j]=p-B*65536}z[0]+=B-1+37*(B-1)}function q(z,B,j){const p=~(j-1);for(let R=0;R<16;R++){const ae=p&(z[R]^B[R]);z[R]^=ae,B[R]^=ae}}function K(z,B){const j=o(),p=o();for(let R=0;R<16;R++)p[R]=B[R];C(p),C(p),C(p);for(let R=0;R<2;R++){j[0]=p[0]-65517;for(let he=1;he<15;he++)j[he]=p[he]-65535-(j[he-1]>>16&1),j[he-1]&=65535;j[15]=p[15]-32767-(j[14]>>16&1);const ae=j[15]>>16&1;j[14]&=65535,q(p,j,1-ae)}for(let R=0;R<16;R++)z[2*R]=p[R]&255,z[2*R+1]=p[R]>>8}function ie(z,B){let j=0;for(let p=0;p<32;p++)j|=z[p]^B[p];return(1&j-1>>>8)-1}function N(z,B){const j=new Uint8Array(32),p=new Uint8Array(32);return K(j,z),K(p,B),ie(j,p)}function L(z){const B=new Uint8Array(32);return K(B,z),B[0]&1}function x(z,B){for(let j=0;j<16;j++)z[j]=B[2*j]+(B[2*j+1]<<8);z[15]&=32767}function T(z,B,j){for(let p=0;p<16;p++)z[p]=B[p]+j[p]}function E(z,B,j){for(let p=0;p<16;p++)z[p]=B[p]-j[p]}function l(z,B,j){let p,R,ae=0,he=0,Oe=0,ze=0,Ve=0,Le=0,yt=0,_t=0,Me=0,xe=0,$e=0,Ne=0,Be=0,Pe=0,je=0,De=0,Ae=0,He=0,Ie=0,Ge=0,We=0,et=0,tt=0,Ye=0,rr=0,hr=0,Gr=0,nr=0,sn=0,In=0,Hn=0,St=j[0],vt=j[1],Dt=j[2],Ot=j[3],wt=j[4],bt=j[5],Lt=j[6],Ut=j[7],xt=j[8],Mt=j[9],It=j[10],Rt=j[11],Pt=j[12],ht=j[13],Bt=j[14],qt=j[15];p=B[0],ae+=p*St,he+=p*vt,Oe+=p*Dt,ze+=p*Ot,Ve+=p*wt,Le+=p*bt,yt+=p*Lt,_t+=p*Ut,Me+=p*xt,xe+=p*Mt,$e+=p*It,Ne+=p*Rt,Be+=p*Pt,Pe+=p*ht,je+=p*Bt,De+=p*qt,p=B[1],he+=p*St,Oe+=p*vt,ze+=p*Dt,Ve+=p*Ot,Le+=p*wt,yt+=p*bt,_t+=p*Lt,Me+=p*Ut,xe+=p*xt,$e+=p*Mt,Ne+=p*It,Be+=p*Rt,Pe+=p*Pt,je+=p*ht,De+=p*Bt,Ae+=p*qt,p=B[2],Oe+=p*St,ze+=p*vt,Ve+=p*Dt,Le+=p*Ot,yt+=p*wt,_t+=p*bt,Me+=p*Lt,xe+=p*Ut,$e+=p*xt,Ne+=p*Mt,Be+=p*It,Pe+=p*Rt,je+=p*Pt,De+=p*ht,Ae+=p*Bt,He+=p*qt,p=B[3],ze+=p*St,Ve+=p*vt,Le+=p*Dt,yt+=p*Ot,_t+=p*wt,Me+=p*bt,xe+=p*Lt,$e+=p*Ut,Ne+=p*xt,Be+=p*Mt,Pe+=p*It,je+=p*Rt,De+=p*Pt,Ae+=p*ht,He+=p*Bt,Ie+=p*qt,p=B[4],Ve+=p*St,Le+=p*vt,yt+=p*Dt,_t+=p*Ot,Me+=p*wt,xe+=p*bt,$e+=p*Lt,Ne+=p*Ut,Be+=p*xt,Pe+=p*Mt,je+=p*It,De+=p*Rt,Ae+=p*Pt,He+=p*ht,Ie+=p*Bt,Ge+=p*qt,p=B[5],Le+=p*St,yt+=p*vt,_t+=p*Dt,Me+=p*Ot,xe+=p*wt,$e+=p*bt,Ne+=p*Lt,Be+=p*Ut,Pe+=p*xt,je+=p*Mt,De+=p*It,Ae+=p*Rt,He+=p*Pt,Ie+=p*ht,Ge+=p*Bt,We+=p*qt,p=B[6],yt+=p*St,_t+=p*vt,Me+=p*Dt,xe+=p*Ot,$e+=p*wt,Ne+=p*bt,Be+=p*Lt,Pe+=p*Ut,je+=p*xt,De+=p*Mt,Ae+=p*It,He+=p*Rt,Ie+=p*Pt,Ge+=p*ht,We+=p*Bt,et+=p*qt,p=B[7],_t+=p*St,Me+=p*vt,xe+=p*Dt,$e+=p*Ot,Ne+=p*wt,Be+=p*bt,Pe+=p*Lt,je+=p*Ut,De+=p*xt,Ae+=p*Mt,He+=p*It,Ie+=p*Rt,Ge+=p*Pt,We+=p*ht,et+=p*Bt,tt+=p*qt,p=B[8],Me+=p*St,xe+=p*vt,$e+=p*Dt,Ne+=p*Ot,Be+=p*wt,Pe+=p*bt,je+=p*Lt,De+=p*Ut,Ae+=p*xt,He+=p*Mt,Ie+=p*It,Ge+=p*Rt,We+=p*Pt,et+=p*ht,tt+=p*Bt,Ye+=p*qt,p=B[9],xe+=p*St,$e+=p*vt,Ne+=p*Dt,Be+=p*Ot,Pe+=p*wt,je+=p*bt,De+=p*Lt,Ae+=p*Ut,He+=p*xt,Ie+=p*Mt,Ge+=p*It,We+=p*Rt,et+=p*Pt,tt+=p*ht,Ye+=p*Bt,rr+=p*qt,p=B[10],$e+=p*St,Ne+=p*vt,Be+=p*Dt,Pe+=p*Ot,je+=p*wt,De+=p*bt,Ae+=p*Lt,He+=p*Ut,Ie+=p*xt,Ge+=p*Mt,We+=p*It,et+=p*Rt,tt+=p*Pt,Ye+=p*ht,rr+=p*Bt,hr+=p*qt,p=B[11],Ne+=p*St,Be+=p*vt,Pe+=p*Dt,je+=p*Ot,De+=p*wt,Ae+=p*bt,He+=p*Lt,Ie+=p*Ut,Ge+=p*xt,We+=p*Mt,et+=p*It,tt+=p*Rt,Ye+=p*Pt,rr+=p*ht,hr+=p*Bt,Gr+=p*qt,p=B[12],Be+=p*St,Pe+=p*vt,je+=p*Dt,De+=p*Ot,Ae+=p*wt,He+=p*bt,Ie+=p*Lt,Ge+=p*Ut,We+=p*xt,et+=p*Mt,tt+=p*It,Ye+=p*Rt,rr+=p*Pt,hr+=p*ht,Gr+=p*Bt,nr+=p*qt,p=B[13],Pe+=p*St,je+=p*vt,De+=p*Dt,Ae+=p*Ot,He+=p*wt,Ie+=p*bt,Ge+=p*Lt,We+=p*Ut,et+=p*xt,tt+=p*Mt,Ye+=p*It,rr+=p*Rt,hr+=p*Pt,Gr+=p*ht,nr+=p*Bt,sn+=p*qt,p=B[14],je+=p*St,De+=p*vt,Ae+=p*Dt,He+=p*Ot,Ie+=p*wt,Ge+=p*bt,We+=p*Lt,et+=p*Ut,tt+=p*xt,Ye+=p*Mt,rr+=p*It,hr+=p*Rt,Gr+=p*Pt,nr+=p*ht,sn+=p*Bt,In+=p*qt,p=B[15],De+=p*St,Ae+=p*vt,He+=p*Dt,Ie+=p*Ot,Ge+=p*wt,We+=p*bt,et+=p*Lt,tt+=p*Ut,Ye+=p*xt,rr+=p*Mt,hr+=p*It,Gr+=p*Rt,nr+=p*Pt,sn+=p*ht,In+=p*Bt,Hn+=p*qt,ae+=38*Ae,he+=38*He,Oe+=38*Ie,ze+=38*Ge,Ve+=38*We,Le+=38*et,yt+=38*tt,_t+=38*Ye,Me+=38*rr,xe+=38*hr,$e+=38*Gr,Ne+=38*nr,Be+=38*sn,Pe+=38*In,je+=38*Hn,R=1,p=ae+R+65535,R=Math.floor(p/65536),ae=p-R*65536,p=he+R+65535,R=Math.floor(p/65536),he=p-R*65536,p=Oe+R+65535,R=Math.floor(p/65536),Oe=p-R*65536,p=ze+R+65535,R=Math.floor(p/65536),ze=p-R*65536,p=Ve+R+65535,R=Math.floor(p/65536),Ve=p-R*65536,p=Le+R+65535,R=Math.floor(p/65536),Le=p-R*65536,p=yt+R+65535,R=Math.floor(p/65536),yt=p-R*65536,p=_t+R+65535,R=Math.floor(p/65536),_t=p-R*65536,p=Me+R+65535,R=Math.floor(p/65536),Me=p-R*65536,p=xe+R+65535,R=Math.floor(p/65536),xe=p-R*65536,p=$e+R+65535,R=Math.floor(p/65536),$e=p-R*65536,p=Ne+R+65535,R=Math.floor(p/65536),Ne=p-R*65536,p=Be+R+65535,R=Math.floor(p/65536),Be=p-R*65536,p=Pe+R+65535,R=Math.floor(p/65536),Pe=p-R*65536,p=je+R+65535,R=Math.floor(p/65536),je=p-R*65536,p=De+R+65535,R=Math.floor(p/65536),De=p-R*65536,ae+=R-1+37*(R-1),R=1,p=ae+R+65535,R=Math.floor(p/65536),ae=p-R*65536,p=he+R+65535,R=Math.floor(p/65536),he=p-R*65536,p=Oe+R+65535,R=Math.floor(p/65536),Oe=p-R*65536,p=ze+R+65535,R=Math.floor(p/65536),ze=p-R*65536,p=Ve+R+65535,R=Math.floor(p/65536),Ve=p-R*65536,p=Le+R+65535,R=Math.floor(p/65536),Le=p-R*65536,p=yt+R+65535,R=Math.floor(p/65536),yt=p-R*65536,p=_t+R+65535,R=Math.floor(p/65536),_t=p-R*65536,p=Me+R+65535,R=Math.floor(p/65536),Me=p-R*65536,p=xe+R+65535,R=Math.floor(p/65536),xe=p-R*65536,p=$e+R+65535,R=Math.floor(p/65536),$e=p-R*65536,p=Ne+R+65535,R=Math.floor(p/65536),Ne=p-R*65536,p=Be+R+65535,R=Math.floor(p/65536),Be=p-R*65536,p=Pe+R+65535,R=Math.floor(p/65536),Pe=p-R*65536,p=je+R+65535,R=Math.floor(p/65536),je=p-R*65536,p=De+R+65535,R=Math.floor(p/65536),De=p-R*65536,ae+=R-1+37*(R-1),z[0]=ae,z[1]=he,z[2]=Oe,z[3]=ze,z[4]=Ve,z[5]=Le,z[6]=yt,z[7]=_t,z[8]=Me,z[9]=xe,z[10]=$e,z[11]=Ne,z[12]=Be,z[13]=Pe,z[14]=je,z[15]=De}function m(z,B){l(z,B,B)}function k(z,B){const j=o();let p;for(p=0;p<16;p++)j[p]=B[p];for(p=253;p>=0;p--)m(j,j),p!==2&&p!==4&&l(j,j,B);for(p=0;p<16;p++)z[p]=j[p]}function W(z,B){const j=o();let p;for(p=0;p<16;p++)j[p]=B[p];for(p=250;p>=0;p--)m(j,j),p!==1&&l(j,j,B);for(p=0;p<16;p++)z[p]=j[p]}function se(z,B){const j=o(),p=o(),R=o(),ae=o(),he=o(),Oe=o(),ze=o(),Ve=o(),Le=o();E(j,z[1],z[0]),E(Le,B[1],B[0]),l(j,j,Le),T(p,z[0],z[1]),T(Le,B[0],B[1]),l(p,p,Le),l(R,z[3],B[3]),l(R,R,d),l(ae,z[2],B[2]),T(ae,ae,ae),E(he,p,j),E(Oe,ae,R),T(ze,ae,R),T(Ve,p,j),l(z[0],he,Oe),l(z[1],Ve,ze),l(z[2],ze,Oe),l(z[3],he,Ve)}function ce(z,B,j){for(let p=0;p<4;p++)q(z[p],B[p],j)}function de(z,B){const j=o(),p=o(),R=o();k(R,B[2]),l(j,B[0],R),l(p,B[1],R),K(z,p),z[31]^=L(j)<<7}function w(z,B,j){P(z[0],u),P(z[1],f),P(z[2],f),P(z[3],u);for(let p=255;p>=0;--p){const R=j[p/8|0]>>(p&7)&1;ce(z,B,R),se(B,z),se(z,z),ce(z,B,R)}}function A(z,B){const j=[o(),o(),o(),o()];P(j[0],_),P(j[1],O),P(j[2],f),l(j[3],_,O),w(z,j,B)}function ee(z){if(z.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const B=(0,t.hash)(z);B[0]&=248,B[31]&=127,B[31]|=64;const j=new Uint8Array(32),p=[o(),o(),o(),o()];A(p,B),de(j,p);const R=new Uint8Array(64);return R.set(z),R.set(j,32),{publicKey:j,secretKey:R}}r.generateKeyPairFromSeed=ee;function X(z){const B=(0,e.randomBytes)(32,z),j=ee(B);return(0,i.wipe)(B),j}r.generateKeyPair=X;function V(z){if(z.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}r.extractPublicKeyFromSecretKey=V;const G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(z,B){let j,p,R,ae;for(p=63;p>=32;--p){for(j=0,R=p-32,ae=p-12;R<ae;++R)B[R]+=j-16*B[p]*G[R-(p-32)],j=Math.floor((B[R]+128)/256),B[R]-=j*256;B[R]+=j,B[p]=0}for(j=0,R=0;R<32;R++)B[R]+=j-(B[31]>>4)*G[R],j=B[R]>>8,B[R]&=255;for(R=0;R<32;R++)B[R]-=j*G[R];for(p=0;p<32;p++)B[p+1]+=B[p]>>8,z[p]=B[p]&255}function re(z){const B=new Float64Array(64);for(let j=0;j<64;j++)B[j]=z[j];for(let j=0;j<64;j++)z[j]=0;Y(z,B)}function me(z,B){const j=new Float64Array(64),p=[o(),o(),o(),o()],R=(0,t.hash)(z.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ae=new Uint8Array(64);ae.set(R.subarray(32),32);const he=new t.SHA512;he.update(ae.subarray(32)),he.update(B);const Oe=he.digest();he.clean(),re(Oe),A(p,Oe),de(ae,p),he.reset(),he.update(ae.subarray(0,32)),he.update(z.subarray(32)),he.update(B);const ze=he.digest();re(ze);for(let Ve=0;Ve<32;Ve++)j[Ve]=Oe[Ve];for(let Ve=0;Ve<32;Ve++)for(let Le=0;Le<32;Le++)j[Ve+Le]+=ze[Ve]*R[Le];return Y(ae.subarray(32),j),ae}r.sign=me;function oe(z,B){const j=o(),p=o(),R=o(),ae=o(),he=o(),Oe=o(),ze=o();return P(z[2],f),x(z[1],B),m(R,z[1]),l(ae,R,g),E(R,R,z[2]),T(ae,z[2],ae),m(he,ae),m(Oe,he),l(ze,Oe,he),l(j,ze,R),l(j,j,ae),W(j,j),l(j,j,R),l(j,j,ae),l(j,j,ae),l(z[0],j,ae),m(p,z[0]),l(p,p,ae),N(p,R)&&l(z[0],z[0],S),m(p,z[0]),l(p,p,ae),N(p,R)?-1:(L(z[0])===B[31]>>7&&E(z[0],u,z[0]),l(z[3],z[0],z[1]),0)}function we(z,B,j){const p=new Uint8Array(32),R=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(j.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(oe(ae,z))return!1;const he=new t.SHA512;he.update(j.subarray(0,32)),he.update(z),he.update(B);const Oe=he.digest();return re(Oe),w(R,ae,Oe),A(ae,j.subarray(32)),se(R,ae),de(p,R),!ie(j,p)}r.verify=we;function le(z){let B=[o(),o(),o(),o()];if(oe(B,z))throw new Error("Ed25519: invalid public key");let j=o(),p=o(),R=B[1];T(j,f,R),E(p,f,R),k(p,p),l(j,j,p);let ae=new Uint8Array(32);return K(ae,j),ae}r.convertPublicKeyToX25519=le;function _e(z){const B=(0,t.hash)(z.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const j=new Uint8Array(B.subarray(0,32));return(0,i.wipe)(B),j}r.convertSecretKeyToX25519=_e})(uf);const b6="EdDSA",m6="JWT",ug=".",fg="base64url",w6="utf8",E6="utf8",S6=":",D6="did",O6="key",pd="base58btc",x6="z",I6="K36",P6=32,A6=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t);function C6(r){return typeof r=="string"?r:A6(r)||""}function Zo(r){return lr(br(C6(r),w6),fg)}function lg(r){const e=br(I6,pd),t=x6+lr(uu([e,r]),pd);return[D6,O6,t].join(S6)}function R6(r){return lr(r,fg)}function T6(r){return br([Zo(r.header),Zo(r.payload)].join(ug),E6)}function $6(r){return[Zo(r.header),Zo(r.payload),R6(r.signature)].join(ug)}function gd(r=Mi.randomBytes(P6)){return uf.generateKeyPairFromSeed(r)}async function N6(r,e,t,i,o=ve.fromMiliseconds(Date.now())){const a={alg:b6,typ:m6},u=lg(i.publicKey),f=o+t,g={iss:u,sub:r,aud:e,iat:o,exp:f},d=T6({header:a,payload:g}),_=uf.sign(i.secretKey,d);return $6({header:a,payload:g,signature:_})}var j6={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Iu=function(r,e){return Iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Iu(r,e)};function F6(r,e){Iu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Pu=function(){return Pu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Pu.apply(this,arguments)};function L6(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function U6(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function M6(r,e){return function(t,i){e(t,i,r)}}function B6(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function q6(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function z6(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function H6(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function K6(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Au(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hg(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function V6(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(hg(arguments[e]));return r}function G6(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Is(r){return this instanceof Is?(this.v=r,this):new Is(r)}function k6(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Is?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function W6(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Is(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function J6(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Au=="function"?Au(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function Y6(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function X6(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Q6(r){return r&&r.__esModule?r:{default:r}}function Z6(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function eD(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const tD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Pu},__asyncDelegator:W6,__asyncGenerator:k6,__asyncValues:J6,__await:Is,__awaiter:q6,__classPrivateFieldGet:Z6,__classPrivateFieldSet:eD,__createBinding:H6,__decorate:U6,__exportStar:K6,__extends:F6,__generator:z6,__importDefault:Q6,__importStar:X6,__makeTemplateObject:Y6,__metadata:B6,__param:M6,__read:hg,__rest:L6,__spread:V6,__spreadArrays:G6,__values:Au},Symbol.toStringTag,{value:"Module"})),rD=nn(tD);var _n={},yd;function nD(){if(yd)return _n;yd=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.isBrowserCryptoAvailable=_n.getSubtleCrypto=_n.getBrowerCrypto=void 0;function r(){return(rt===null||rt===void 0?void 0:rt.crypto)||(rt===null||rt===void 0?void 0:rt.msCrypto)||{}}_n.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}_n.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return _n.isBrowserCryptoAvailable=t,_n}var vn={},_d;function iD(){if(_d)return vn;_d=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.isBrowser=vn.isNode=vn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vn.isNode=e;function t(){return!r()&&!e()}return vn.isBrowser=t,vn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=rD;e.__exportStar(nD(),r),e.__exportStar(iD(),r)})(j6);function dg(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function sD(r=6){return BigInt(dg(r))}function oD(r,e,t){return{id:t||dg(),jsonrpc:"2.0",method:r,params:e}}class aD{}class cD extends aD{constructor(){super()}}class uD extends cD{constructor(e){super()}}function fD(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function lD(r){return fD(r)&&(hD(r)||pg(r))}function hD(r){return"result"in r}function pg(r){return"error"in r}class qn extends uD{constructor(e){super(e),this.events=new xr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(oD(e.method,e.params||[],e.id||sD().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(a){o(a)}this.events.on(`${e.id}`,a=>{pg(a)?o(a.error):i(a.result)});try{await this.connection.send(e,t)}catch(a){o(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),lD(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const dD="PARSE_ERROR",pD="INVALID_REQUEST",gD="METHOD_NOT_FOUND",yD="INVALID_PARAMS",gg="INTERNAL_ERROR",ff="SERVER_ERROR",_D=[-32700,-32600,-32601,-32602,-32603],bs={[dD]:{code:-32700,message:"Parse error"},[pD]:{code:-32600,message:"Invalid Request"},[gD]:{code:-32601,message:"Method not found"},[yD]:{code:-32602,message:"Invalid params"},[gg]:{code:-32603,message:"Internal error"},[ff]:{code:-32e3,message:"Server error"}},yg=ff;function vD(r){return _D.includes(r)}function vd(r){return Object.keys(bs).includes(r)?bs[r]:bs[yg]}function bD(r){const e=Object.values(bs).find(t=>t.code===r);return e||bs[yg]}var mD={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cu=function(r,e){return Cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Cu(r,e)};function wD(r,e){Cu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ru=function(){return Ru=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ru.apply(this,arguments)};function ED(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function SD(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function DD(r,e){return function(t,i){e(t,i,r)}}function OD(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function xD(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function ID(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function PD(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function AD(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Tu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _g(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function CD(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(_g(arguments[e]));return r}function RD(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Ps(r){return this instanceof Ps?(this.v=r,this):new Ps(r)}function TD(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Ps?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function $D(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Ps(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function ND(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Tu=="function"?Tu(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function jD(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function FD(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function LD(r){return r&&r.__esModule?r:{default:r}}function UD(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function MD(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const BD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ru},__asyncDelegator:$D,__asyncGenerator:TD,__asyncValues:ND,__await:Ps,__awaiter:xD,__classPrivateFieldGet:UD,__classPrivateFieldSet:MD,__createBinding:PD,__decorate:SD,__exportStar:AD,__extends:wD,__generator:ID,__importDefault:LD,__importStar:FD,__makeTemplateObject:jD,__metadata:OD,__param:DD,__read:_g,__rest:ED,__spread:CD,__spreadArrays:RD,__values:Tu},Symbol.toStringTag,{value:"Module"})),qD=nn(BD);var bn={},bd;function zD(){if(bd)return bn;bd=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.isBrowserCryptoAvailable=bn.getSubtleCrypto=bn.getBrowerCrypto=void 0;function r(){return(rt===null||rt===void 0?void 0:rt.crypto)||(rt===null||rt===void 0?void 0:rt.msCrypto)||{}}bn.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}bn.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return bn.isBrowserCryptoAvailable=t,bn}var mn={},md;function HD(){if(md)return mn;md=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.isBrowser=mn.isNode=mn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mn.isNode=e;function t(){return!r()&&!e()}return mn.isBrowser=t,mn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=qD;e.__exportStar(zD(),r),e.__exportStar(HD(),r)})(mD);function vg(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function bg(r=6){return BigInt(vg(r))}function lf(r,e,t){return{id:t||vg(),jsonrpc:"2.0",method:r,params:e}}function hf(r,e){return{id:r,jsonrpc:"2.0",result:e}}function mg(r,e,t){return{id:r,jsonrpc:"2.0",error:KD(e,t)}}function KD(r,e){return typeof r>"u"?vd(gg):(typeof r=="string"&&(r=Object.assign(Object.assign({},vd(ff)),{message:r})),typeof e<"u"&&(r.data=e),vD(r.code)&&(r=bD(r.code)),r)}function wg(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function df(r){return wg(r)&&"method"in r}function pf(r){return wg(r)&&(On(r)||rn(r))}function On(r){return"result"in r}function rn(r){return"error"in r}const VD=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),GD=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function kD(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return GD(r)}catch{return r}}function WD(r){return typeof r=="string"?r:VD(r)||""}const JD="PARSE_ERROR",YD="INVALID_REQUEST",XD="METHOD_NOT_FOUND",QD="INVALID_PARAMS",Eg="INTERNAL_ERROR",gf="SERVER_ERROR",ZD=[-32700,-32600,-32601,-32602,-32603],ms={[JD]:{code:-32700,message:"Parse error"},[YD]:{code:-32600,message:"Invalid Request"},[XD]:{code:-32601,message:"Method not found"},[QD]:{code:-32602,message:"Invalid params"},[Eg]:{code:-32603,message:"Internal error"},[gf]:{code:-32e3,message:"Server error"}},Sg=gf;function eO(r){return ZD.includes(r)}function wd(r){return Object.keys(ms).includes(r)?ms[r]:ms[Sg]}function tO(r){const e=Object.values(ms).find(t=>t.code===r);return e||ms[Sg]}function rO(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var Dg={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $u=function(r,e){return $u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},$u(r,e)};function nO(r,e){$u(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nu=function(){return Nu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Nu.apply(this,arguments)};function iO(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function sO(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function oO(r,e){return function(t,i){e(t,i,r)}}function aO(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function cO(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function uO(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function fO(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function lO(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function ju(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Og(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function hO(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Og(arguments[e]));return r}function dO(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function As(r){return this instanceof As?(this.v=r,this):new As(r)}function pO(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof As?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function gO(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:As(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function yO(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ju=="function"?ju(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function _O(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function vO(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function bO(r){return r&&r.__esModule?r:{default:r}}function mO(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function wO(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const EO=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Nu},__asyncDelegator:gO,__asyncGenerator:pO,__asyncValues:yO,__await:As,__awaiter:cO,__classPrivateFieldGet:mO,__classPrivateFieldSet:wO,__createBinding:fO,__decorate:sO,__exportStar:lO,__extends:nO,__generator:uO,__importDefault:bO,__importStar:vO,__makeTemplateObject:_O,__metadata:aO,__param:oO,__read:Og,__rest:iO,__spread:hO,__spreadArrays:dO,__values:ju},Symbol.toStringTag,{value:"Module"})),SO=nn(EO);var wn={},Ed;function DO(){if(Ed)return wn;Ed=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.isBrowserCryptoAvailable=wn.getSubtleCrypto=wn.getBrowerCrypto=void 0;function r(){return(rt===null||rt===void 0?void 0:rt.crypto)||(rt===null||rt===void 0?void 0:rt.msCrypto)||{}}wn.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}wn.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return wn.isBrowserCryptoAvailable=t,wn}var En={},Sd;function OO(){if(Sd)return En;Sd=1,Object.defineProperty(En,"__esModule",{value:!0}),En.isBrowser=En.isNode=En.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}En.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}En.isNode=e;function t(){return!r()&&!e()}return En.isBrowser=t,En}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=SO;e.__exportStar(DO(),r),e.__exportStar(OO(),r)})(Dg);function xO(r,e,t){return{id:r,jsonrpc:"2.0",error:IO(e,t)}}function IO(r,e){return typeof r>"u"?wd(Eg):(typeof r=="string"&&(r=Object.assign(Object.assign({},wd(gf)),{message:r})),typeof e<"u"&&(r.data=e),eO(r.code)&&(r=tO(r.code)),r)}const PO="^wss?:";function AO(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function CO(r,e){const t=AO(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Dd(r){return CO(r,PO)}function RO(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}const TO=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),$O=()=>typeof window<"u",Od=r=>r.split("?")[0],xd=10,NO=TO();class jO{constructor(e){if(this.url=e,this.events=new xr.EventEmitter,this.registering=!1,!Dd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(WD(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!Dd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),o(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const o=Dg.isReactNative()?void 0:{rejectUnauthorized:!RO(e)},a=new NO(e,[],o);$O()?a.onerror=u=>{const f=u;i(this.emitError(f.error))}:a.on("error",u=>{i(this.emitError(u))}),a.onopen=()=>{this.onOpen(a),t(a)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?kD(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),a=xO(e,o);this.events.emit("payload",a)}parseError(e,t=this.url){return rO(e,Od(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>xd&&this.events.setMaxListeners(xd)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Od(this.url)}`));return this.events.emit("register_error",t),t}}var ea={exports:{}};ea.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",o=1,a=2,u=9007199254740991,f="[object Arguments]",g="[object Array]",d="[object AsyncFunction]",_="[object Boolean]",O="[object Date]",S="[object Error]",P="[object Function]",C="[object GeneratorFunction]",q="[object Map]",K="[object Number]",ie="[object Null]",N="[object Object]",L="[object Promise]",x="[object Proxy]",T="[object RegExp]",E="[object Set]",l="[object String]",m="[object Symbol]",k="[object Undefined]",W="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",w="[object Float64Array]",A="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",re="[object Uint32Array]",me=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[w]=le[A]=le[ee]=le[X]=le[V]=le[G]=le[Y]=le[re]=!0,le[f]=le[g]=le[se]=le[_]=le[ce]=le[O]=le[S]=le[P]=le[q]=le[K]=le[N]=le[T]=le[E]=le[l]=le[W]=!1;var _e=typeof rt=="object"&&rt&&rt.Object===Object&&rt,z=typeof self=="object"&&self&&self.Object===Object&&self,B=_e||z||Function("return this")(),j=e&&!e.nodeType&&e,p=j&&!0&&r&&!r.nodeType&&r,R=p&&p.exports===j,ae=R&&_e.process,he=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Oe=he&&he.isTypedArray;function ze(D,F){for(var te=-1,pe=D==null?0:D.length,ut=0,Re=[];++te<pe;){var pt=D[te];F(pt,te,D)&&(Re[ut++]=pt)}return Re}function Ve(D,F){for(var te=-1,pe=F.length,ut=D.length;++te<pe;)D[ut+te]=F[te];return D}function Le(D,F){for(var te=-1,pe=D==null?0:D.length;++te<pe;)if(F(D[te],te,D))return!0;return!1}function yt(D,F){for(var te=-1,pe=Array(D);++te<D;)pe[te]=F(te);return pe}function _t(D){return function(F){return D(F)}}function Me(D,F){return D.has(F)}function xe(D,F){return D==null?void 0:D[F]}function $e(D){var F=-1,te=Array(D.size);return D.forEach(function(pe,ut){te[++F]=[ut,pe]}),te}function Ne(D,F){return function(te){return D(F(te))}}function Be(D){var F=-1,te=Array(D.size);return D.forEach(function(pe){te[++F]=pe}),te}var Pe=Array.prototype,je=Function.prototype,De=Object.prototype,Ae=B["__core-js_shared__"],He=je.toString,Ie=De.hasOwnProperty,Ge=function(){var D=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),We=De.toString,et=RegExp("^"+He.call(Ie).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?B.Buffer:void 0,Ye=B.Symbol,rr=B.Uint8Array,hr=De.propertyIsEnumerable,Gr=Pe.splice,nr=Ye?Ye.toStringTag:void 0,sn=Object.getOwnPropertySymbols,In=tt?tt.isBuffer:void 0,Hn=Ne(Object.keys,Object),St=mr(B,"DataView"),vt=mr(B,"Map"),Dt=mr(B,"Promise"),Ot=mr(B,"Set"),wt=mr(B,"WeakMap"),bt=mr(Object,"create"),Lt=an(St),Ut=an(vt),xt=an(Dt),Mt=an(Ot),It=an(wt),Rt=Ye?Ye.prototype:void 0,Pt=Rt?Rt.valueOf:void 0;function ht(D){var F=-1,te=D==null?0:D.length;for(this.clear();++F<te;){var pe=D[F];this.set(pe[0],pe[1])}}function Bt(){this.__data__=bt?bt(null):{},this.size=0}function qt(D){var F=this.has(D)&&delete this.__data__[D];return this.size-=F?1:0,F}function da(D){var F=this.__data__;if(bt){var te=F[D];return te===i?void 0:te}return Ie.call(F,D)?F[D]:void 0}function pa(D){var F=this.__data__;return bt?F[D]!==void 0:Ie.call(F,D)}function ga(D,F){var te=this.__data__;return this.size+=this.has(D)?0:1,te[D]=bt&&F===void 0?i:F,this}ht.prototype.clear=Bt,ht.prototype.delete=qt,ht.prototype.get=da,ht.prototype.has=pa,ht.prototype.set=ga;function Pr(D){var F=-1,te=D==null?0:D.length;for(this.clear();++F<te;){var pe=D[F];this.set(pe[0],pe[1])}}function ya(){this.__data__=[],this.size=0}function _a(D){var F=this.__data__,te=Kn(F,D);if(te<0)return!1;var pe=F.length-1;return te==pe?F.pop():Gr.call(F,te,1),--this.size,!0}function va(D){var F=this.__data__,te=Kn(F,D);return te<0?void 0:F[te][1]}function ba(D){return Kn(this.__data__,D)>-1}function ma(D,F){var te=this.__data__,pe=Kn(te,D);return pe<0?(++this.size,te.push([D,F])):te[pe][1]=F,this}Pr.prototype.clear=ya,Pr.prototype.delete=_a,Pr.prototype.get=va,Pr.prototype.has=ba,Pr.prototype.set=ma;function on(D){var F=-1,te=D==null?0:D.length;for(this.clear();++F<te;){var pe=D[F];this.set(pe[0],pe[1])}}function di(){this.size=0,this.__data__={hash:new ht,map:new(vt||Pr),string:new ht}}function wa(D){var F=Pn(this,D).delete(D);return this.size-=F?1:0,F}function pi(D){return Pn(this,D).get(D)}function Ea(D){return Pn(this,D).has(D)}function Sa(D,F){var te=Pn(this,D),pe=te.size;return te.set(D,F),this.size+=te.size==pe?0:1,this}on.prototype.clear=di,on.prototype.delete=wa,on.prototype.get=pi,on.prototype.has=Ea,on.prototype.set=Sa;function gi(D){var F=-1,te=D==null?0:D.length;for(this.__data__=new on;++F<te;)this.add(D[F])}function Ls(D){return this.__data__.set(D,i),this}function Us(D){return this.__data__.has(D)}gi.prototype.add=gi.prototype.push=Ls,gi.prototype.has=Us;function Br(D){var F=this.__data__=new Pr(D);this.size=F.size}function Da(){this.__data__=new Pr,this.size=0}function Oa(D){var F=this.__data__,te=F.delete(D);return this.size=F.size,te}function xa(D){return this.__data__.get(D)}function Ia(D){return this.__data__.has(D)}function Ms(D,F){var te=this.__data__;if(te instanceof Pr){var pe=te.__data__;if(!vt||pe.length<t-1)return pe.push([D,F]),this.size=++te.size,this;te=this.__data__=new on(pe)}return te.set(D,F),this.size=te.size,this}Br.prototype.clear=Da,Br.prototype.delete=Oa,Br.prototype.get=xa,Br.prototype.has=Ia,Br.prototype.set=Ms;function Bs(D,F){var te=vi(D),pe=!te&&Qs(D),ut=!te&&!pe&&Ki(D),Re=!te&&!pe&&!ut&&to(D),pt=te||pe||ut||Re,zt=pt?yt(D.length,String):[],Xe=zt.length;for(var ft in D)(F||Ie.call(D,ft))&&!(pt&&(ft=="length"||ut&&(ft=="offset"||ft=="parent")||Re&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||ks(ft,Xe)))&&zt.push(ft);return zt}function Kn(D,F){for(var te=D.length;te--;)if(Xs(D[te][0],F))return te;return-1}function zi(D,F,te){var pe=F(D);return vi(D)?pe:Ve(pe,te(D))}function Vn(D){return D==null?D===void 0?k:ie:nr&&nr in Object(D)?Vs(D):Ca(D)}function Hi(D){return kn(D)&&Vn(D)==f}function Gn(D,F,te,pe,ut){return D===F?!0:D==null||F==null||!kn(D)&&!kn(F)?D!==D&&F!==F:qs(D,F,te,pe,Gn,ut)}function qs(D,F,te,pe,ut,Re){var pt=vi(D),zt=vi(F),Xe=pt?g:kr(D),ft=zt?g:kr(F);Xe=Xe==f?N:Xe,ft=ft==f?N:ft;var Tt=Xe==N,dr=ft==N,Ht=Xe==ft;if(Ht&&Ki(D)){if(!Ki(F))return!1;pt=!0,Tt=!1}if(Ht&&!Tt)return Re||(Re=new Br),pt||to(D)?yi(D,F,te,pe,ut,Re):Aa(D,F,Xe,te,pe,ut,Re);if(!(te&o)){var gt=Tt&&Ie.call(D,"__wrapped__"),ir=dr&&Ie.call(F,"__wrapped__");if(gt||ir){var qr=gt?D.value():D,Ar=ir?F.value():F;return Re||(Re=new Br),ut(qr,Ar,te,pe,Re)}}return Ht?(Re||(Re=new Br),Ks(D,F,te,pe,ut,Re)):!1}function Pa(D){if(!eo(D)||Js(D))return!1;var F=bi(D)?et:oe;return F.test(an(D))}function zs(D){return kn(D)&&Zs(D.length)&&!!le[Vn(D)]}function Hs(D){if(!Ys(D))return Hn(D);var F=[];for(var te in Object(D))Ie.call(D,te)&&te!="constructor"&&F.push(te);return F}function yi(D,F,te,pe,ut,Re){var pt=te&o,zt=D.length,Xe=F.length;if(zt!=Xe&&!(pt&&Xe>zt))return!1;var ft=Re.get(D);if(ft&&Re.get(F))return ft==F;var Tt=-1,dr=!0,Ht=te&a?new gi:void 0;for(Re.set(D,F),Re.set(F,D);++Tt<zt;){var gt=D[Tt],ir=F[Tt];if(pe)var qr=pt?pe(ir,gt,Tt,F,D,Re):pe(gt,ir,Tt,D,F,Re);if(qr!==void 0){if(qr)continue;dr=!1;break}if(Ht){if(!Le(F,function(Ar,Wr){if(!Me(Ht,Wr)&&(gt===Ar||ut(gt,Ar,te,pe,Re)))return Ht.push(Wr)})){dr=!1;break}}else if(!(gt===ir||ut(gt,ir,te,pe,Re))){dr=!1;break}}return Re.delete(D),Re.delete(F),dr}function Aa(D,F,te,pe,ut,Re,pt){switch(te){case ce:if(D.byteLength!=F.byteLength||D.byteOffset!=F.byteOffset)return!1;D=D.buffer,F=F.buffer;case se:return!(D.byteLength!=F.byteLength||!Re(new rr(D),new rr(F)));case _:case O:case K:return Xs(+D,+F);case S:return D.name==F.name&&D.message==F.message;case T:case l:return D==F+"";case q:var zt=$e;case E:var Xe=pe&o;if(zt||(zt=Be),D.size!=F.size&&!Xe)return!1;var ft=pt.get(D);if(ft)return ft==F;pe|=a,pt.set(D,F);var Tt=yi(zt(D),zt(F),pe,ut,Re,pt);return pt.delete(D),Tt;case m:if(Pt)return Pt.call(D)==Pt.call(F)}return!1}function Ks(D,F,te,pe,ut,Re){var pt=te&o,zt=_i(D),Xe=zt.length,ft=_i(F),Tt=ft.length;if(Xe!=Tt&&!pt)return!1;for(var dr=Xe;dr--;){var Ht=zt[dr];if(!(pt?Ht in F:Ie.call(F,Ht)))return!1}var gt=Re.get(D);if(gt&&Re.get(F))return gt==F;var ir=!0;Re.set(D,F),Re.set(F,D);for(var qr=pt;++dr<Xe;){Ht=zt[dr];var Ar=D[Ht],Wr=F[Ht];if(pe)var Vi=pt?pe(Wr,Ar,Ht,F,D,Re):pe(Ar,Wr,Ht,D,F,Re);if(!(Vi===void 0?Ar===Wr||ut(Ar,Wr,te,pe,Re):Vi)){ir=!1;break}qr||(qr=Ht=="constructor")}if(ir&&!qr){var Wn=D.constructor,kt=F.constructor;Wn!=kt&&"constructor"in D&&"constructor"in F&&!(typeof Wn=="function"&&Wn instanceof Wn&&typeof kt=="function"&&kt instanceof kt)&&(ir=!1)}return Re.delete(D),Re.delete(F),ir}function _i(D){return zi(D,$a,Gs)}function Pn(D,F){var te=D.__data__;return Ws(F)?te[typeof F=="string"?"string":"hash"]:te.map}function mr(D,F){var te=xe(D,F);return Pa(te)?te:void 0}function Vs(D){var F=Ie.call(D,nr),te=D[nr];try{D[nr]=void 0;var pe=!0}catch{}var ut=We.call(D);return pe&&(F?D[nr]=te:delete D[nr]),ut}var Gs=sn?function(D){return D==null?[]:(D=Object(D),ze(sn(D),function(F){return hr.call(D,F)}))}:ct,kr=Vn;(St&&kr(new St(new ArrayBuffer(1)))!=ce||vt&&kr(new vt)!=q||Dt&&kr(Dt.resolve())!=L||Ot&&kr(new Ot)!=E||wt&&kr(new wt)!=W)&&(kr=function(D){var F=Vn(D),te=F==N?D.constructor:void 0,pe=te?an(te):"";if(pe)switch(pe){case Lt:return ce;case Ut:return q;case xt:return L;case Mt:return E;case It:return W}return F});function ks(D,F){return F=F??u,!!F&&(typeof D=="number"||we.test(D))&&D>-1&&D%1==0&&D<F}function Ws(D){var F=typeof D;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?D!=="__proto__":D===null}function Js(D){return!!Ge&&Ge in D}function Ys(D){var F=D&&D.constructor,te=typeof F=="function"&&F.prototype||De;return D===te}function Ca(D){return We.call(D)}function an(D){if(D!=null){try{return He.call(D)}catch{}try{return D+""}catch{}}return""}function Xs(D,F){return D===F||D!==D&&F!==F}var Qs=Hi(function(){return arguments}())?Hi:function(D){return kn(D)&&Ie.call(D,"callee")&&!hr.call(D,"callee")},vi=Array.isArray;function Ra(D){return D!=null&&Zs(D.length)&&!bi(D)}var Ki=In||ot;function Ta(D,F){return Gn(D,F)}function bi(D){if(!eo(D))return!1;var F=Vn(D);return F==P||F==C||F==d||F==x}function Zs(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=u}function eo(D){var F=typeof D;return D!=null&&(F=="object"||F=="function")}function kn(D){return D!=null&&typeof D=="object"}var to=Oe?_t(Oe):zs;function $a(D){return Ra(D)?Bs(D):Hs(D)}function ct(){return[]}function ot(){return!1}r.exports=Ta})(ea,ea.exports);var FO=ea.exports;const LO=ku(FO);function UO(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<r.length;o++){var a=r.charAt(o),u=a.charCodeAt(0);if(t[u]!==255)throw new TypeError(a+" is ambiguous");t[u]=o}var f=r.length,g=r.charAt(0),d=Math.log(f)/Math.log(256),_=Math.log(256)/Math.log(f);function O(C){if(C instanceof Uint8Array||(ArrayBuffer.isView(C)?C=new Uint8Array(C.buffer,C.byteOffset,C.byteLength):Array.isArray(C)&&(C=Uint8Array.from(C))),!(C instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(C.length===0)return"";for(var q=0,K=0,ie=0,N=C.length;ie!==N&&C[ie]===0;)ie++,q++;for(var L=(N-ie)*_+1>>>0,x=new Uint8Array(L);ie!==N;){for(var T=C[ie],E=0,l=L-1;(T!==0||E<K)&&l!==-1;l--,E++)T+=256*x[l]>>>0,x[l]=T%f>>>0,T=T/f>>>0;if(T!==0)throw new Error("Non-zero carry");K=E,ie++}for(var m=L-K;m!==L&&x[m]===0;)m++;for(var k=g.repeat(q);m<L;++m)k+=r.charAt(x[m]);return k}function S(C){if(typeof C!="string")throw new TypeError("Expected String");if(C.length===0)return new Uint8Array;var q=0;if(C[q]!==" "){for(var K=0,ie=0;C[q]===g;)K++,q++;for(var N=(C.length-q)*d+1>>>0,L=new Uint8Array(N);C[q];){var x=t[C.charCodeAt(q)];if(x===255)return;for(var T=0,E=N-1;(x!==0||T<ie)&&E!==-1;E--,T++)x+=f*L[E]>>>0,L[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ie=T,q++}if(C[q]!==" "){for(var l=N-ie;l!==N&&L[l]===0;)l++;for(var m=new Uint8Array(K+(N-l)),k=K;l!==N;)m[k++]=L[l++];return m}}}function P(C){var q=S(C);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:O,decodeUnsafe:S,decode:P}}var MO=UO,BO=MO;const xg=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},qO=r=>new TextEncoder().encode(r),zO=r=>new TextDecoder().decode(r);class HO{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class KO{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ig(this,e)}}class VO{constructor(e){this.decoders=e}or(e){return Ig(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ig=(r,e)=>new VO({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class GO{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new HO(e,t,i),this.decoder=new KO(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const la=({name:r,prefix:e,encode:t,decode:i})=>new GO(r,e,t,i),Fs=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:o}=BO(t,e);return la({prefix:r,name:e,encode:i,decode:a=>xg(o(a))})},kO=(r,e,t,i)=>{const o={};for(let _=0;_<e.length;++_)o[e[_]]=_;let a=r.length;for(;r[a-1]==="=";)--a;const u=new Uint8Array(a*t/8|0);let f=0,g=0,d=0;for(let _=0;_<a;++_){const O=o[r[_]];if(O===void 0)throw new SyntaxError(`Non-${i} character`);g=g<<t|O,f+=t,f>=8&&(f-=8,u[d++]=255&g>>f)}if(f>=t||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return u},WO=(r,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let a="",u=0,f=0;for(let g=0;g<r.length;++g)for(f=f<<8|r[g],u+=8;u>t;)u-=t,a+=e[o&f>>u];if(u&&(a+=e[o&f<<t-u]),i)for(;a.length*t&7;)a+="=";return a},Qt=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>la({prefix:e,name:r,encode(o){return WO(o,i,t)},decode(o){return kO(o,i,t,r)}}),JO=la({prefix:"\0",name:"identity",encode:r=>zO(r),decode:r=>qO(r)});var YO=Object.freeze({__proto__:null,identity:JO});const XO=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var QO=Object.freeze({__proto__:null,base2:XO});const ZO=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e5=Object.freeze({__proto__:null,base8:ZO});const t5=Fs({prefix:"9",name:"base10",alphabet:"0123456789"});var r5=Object.freeze({__proto__:null,base10:t5});const n5=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),i5=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var s5=Object.freeze({__proto__:null,base16:n5,base16upper:i5});const o5=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a5=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c5=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),u5=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f5=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l5=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h5=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d5=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p5=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var g5=Object.freeze({__proto__:null,base32:o5,base32upper:a5,base32pad:c5,base32padupper:u5,base32hex:f5,base32hexupper:l5,base32hexpad:h5,base32hexpadupper:d5,base32z:p5});const y5=Fs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_5=Fs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var v5=Object.freeze({__proto__:null,base36:y5,base36upper:_5});const b5=Fs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),m5=Fs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var w5=Object.freeze({__proto__:null,base58btc:b5,base58flickr:m5});const E5=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S5=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),D5=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O5=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var x5=Object.freeze({__proto__:null,base64:E5,base64pad:S5,base64url:D5,base64urlpad:O5});const Pg=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),I5=Pg.reduce((r,e,t)=>(r[t]=e,r),[]),P5=Pg.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function A5(r){return r.reduce((e,t)=>(e+=I5[t],e),"")}function C5(r){const e=[];for(const t of r){const i=P5[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const R5=la({prefix:"ðŸš€",name:"base256emoji",encode:A5,decode:C5});var T5=Object.freeze({__proto__:null,base256emoji:R5}),$5=Ag,Id=128,N5=127,j5=~N5,F5=Math.pow(2,31);function Ag(r,e,t){e=e||[],t=t||0;for(var i=t;r>=F5;)e[t++]=r&255|Id,r/=128;for(;r&j5;)e[t++]=r&255|Id,r>>>=7;return e[t]=r|0,Ag.bytes=t-i+1,e}var L5=Fu,U5=128,Pd=127;function Fu(r,i){var t=0,i=i||0,o=0,a=i,u,f=r.length;do{if(a>=f)throw Fu.bytes=0,new RangeError("Could not decode varint");u=r[a++],t+=o<28?(u&Pd)<<o:(u&Pd)*Math.pow(2,o),o+=7}while(u>=U5);return Fu.bytes=a-i,t}var M5=Math.pow(2,7),B5=Math.pow(2,14),q5=Math.pow(2,21),z5=Math.pow(2,28),H5=Math.pow(2,35),K5=Math.pow(2,42),V5=Math.pow(2,49),G5=Math.pow(2,56),k5=Math.pow(2,63),W5=function(r){return r<M5?1:r<B5?2:r<q5?3:r<z5?4:r<H5?5:r<K5?6:r<V5?7:r<G5?8:r<k5?9:10},J5={encode:$5,decode:L5,encodingLength:W5},Cg=J5;const Ad=(r,e,t=0)=>(Cg.encode(r,e,t),e),Cd=r=>Cg.encodingLength(r),Lu=(r,e)=>{const t=e.byteLength,i=Cd(r),o=i+Cd(t),a=new Uint8Array(o+t);return Ad(r,a,0),Ad(t,a,i),a.set(e,o),new Y5(r,t,e,a)};class Y5{constructor(e,t,i,o){this.code=e,this.size=t,this.digest=i,this.bytes=o}}const Rg=({name:r,code:e,encode:t})=>new X5(r,e,t);class X5{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Lu(this.code,t):t.then(i=>Lu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Tg=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Q5=Rg({name:"sha2-256",code:18,encode:Tg("SHA-256")}),Z5=Rg({name:"sha2-512",code:19,encode:Tg("SHA-512")});var ex=Object.freeze({__proto__:null,sha256:Q5,sha512:Z5});const $g=0,tx="identity",Ng=xg,rx=r=>Lu($g,Ng(r)),nx={code:$g,name:tx,encode:Ng,digest:rx};var ix=Object.freeze({__proto__:null,identity:nx});new TextEncoder,new TextDecoder;const Rd={...YO,...QO,...e5,...r5,...s5,...g5,...v5,...w5,...x5,...T5};({...ex,...ix});function jg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function sx(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Fg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Td=Fg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Wc=Fg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=sx(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ox={utf8:Td,"utf-8":Td,hex:Rd.base16,latin1:Wc,ascii:Wc,binary:Wc,...Rd};function ax(r,e="utf8"){const t=ox[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const Lg="wc",cx=2,yf="core",Mn=`${Lg}@2:${yf}:`,ux={name:yf,logger:"error"},fx={database:":memory:"},lx="crypto",$d="client_ed25519_seed",hx=ve.ONE_DAY,dx="keychain",px="0.3",gx="messages",yx="0.3",_x=ve.SIX_HOURS,vx="publisher",Ug="irn",bx="error",Mg="wss://relay.walletconnect.com",mx="relayer",Ct={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},wx="_subscription",ps={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Ex=ve.ONE_SECOND/2,Sx="2.8.1",Dx=1e4,Ox="0.3",xx="WALLETCONNECT_CLIENT_ID",en={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Ix="subscription",Px="0.3",Ax=ve.FIVE_SECONDS*1e3,Cx="pairing",Rx="0.3",gs={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Zr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Tx="history",$x="0.3",Nx="expirer",Ur={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},jx="0.3",Jc="verify-api",Nd="https://verify.walletconnect.com";class Fx{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=dx,this.version=px,this.initialized=!1,this.storagePrefix=Mn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,o)=>{this.isInitialized(),this.keychain.set(i,o),await this.persist()},this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:a}=fe("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return o},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,kp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Lx{constructor(e,t,i){this.core=e,this.logger=t,this.name=lx,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),a=gd(o);return lg(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=I3();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const a=await this.getClientSeed(),u=gd(a),f=yu();return await N6(f,o,hx,u)},this.generateSharedKey=(o,a,u)=>{this.isInitialized();const f=this.getPrivateKey(o),g=P3(f,a);return this.setSymKey(g,u)},this.setSymKey=async(o,a)=>{this.isInitialized();const u=a||A3(o);return await this.keychain.set(u,o),u},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,a,u)=>{this.isInitialized();const f=Kp(u),g=v6(a);if(Kh(f)){const S=f.senderPublicKey,P=f.receiverPublicKey;o=await this.generateSharedKey(S,P)}const d=this.getSymKey(o),{type:_,senderPublicKey:O}=f;return R3({type:_,symKey:d,message:g,senderPublicKey:O})},this.decode=async(o,a,u)=>{this.isInitialized();const f=N3(a,u);if(Kh(f)){const _=f.receiverPublicKey,O=f.senderPublicKey;o=await this.generateSharedKey(_,O)}const g=this.getSymKey(o),d=T3({symKey:g,encoded:a});return _6(d)},this.getPayloadType=o=>{const a=Xo(o);return $s(a.type)},this.getPayloadSenderPublicKey=o=>{const a=Xo(o);return a.senderPublicKey?lr(a.senderPublicKey,fr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=i||new Fx(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get($d)}catch{e=yu(),await this.keychain.set($d,e)}return ax(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ux extends o6{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=gx,this.version=yx,this.initialized=!1,this.storagePrefix=Mn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,o)=>{this.isInitialized();const a=Li(o);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[a]<"u"||(u[a]=o,this.messages.set(i,u),await this.persist()),a},this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>{this.isInitialized();const a=this.get(i),u=Li(o);return typeof a[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,kp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}let Mx=class extends a6{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new xr.EventEmitter,this.name=vx,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(i,o,a)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:a}});try{const u=(a==null?void 0:a.ttl)||_x,f=_u(a),g=(a==null?void 0:a.prompt)||!1,d=(a==null?void 0:a.tag)||0,_=(a==null?void 0:a.id)||bg().toString(),O={topic:i,message:o,opts:{ttl:u,relay:f,prompt:g,tag:d,id:_}};this.queue.set(_,O);try{await await Qo(this.rpcPublish(i,o,u,f,g,d,_),this.publishTimeout),this.relayer.events.emit(Ct.publish,O)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(Ct.connection_stalled);return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:a}})}catch(u){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(u),u}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,i,o,a,u,f){var g,d,_,O;const S={method:Go(o.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:u},id:f};return ur((g=S.params)==null?void 0:g.prompt)&&((d=S.params)==null||delete d.prompt),ur((_=S.params)==null?void 0:_.tag)&&((O=S.params)==null||delete O.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:o}=e;await this.publish(t,i,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(js.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()}),this.relayer.on(Ct.message_ack,e=>{this.onPublish(e.id.toString())})}};class Bx{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const o=i.filter(a=>a!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var qx=Object.defineProperty,zx=Object.defineProperties,Hx=Object.getOwnPropertyDescriptors,jd=Object.getOwnPropertySymbols,Kx=Object.prototype.hasOwnProperty,Vx=Object.prototype.propertyIsEnumerable,Fd=(r,e,t)=>e in r?qx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ys=(r,e)=>{for(var t in e||(e={}))Kx.call(e,t)&&Fd(r,t,e[t]);if(jd)for(var t of jd(e))Vx.call(e,t)&&Fd(r,t,e[t]);return r},Yc=(r,e)=>zx(r,Hx(e));class Gx extends f6{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Bx,this.events=new xr.EventEmitter,this.name=Ix,this.version=Px,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}});try{const a=_u(o),u={topic:i,relay:a};this.pending.set(i,u);const f=await this.rpcSubscribe(i,a);return this.onSubscribe(f,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}}),f}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(i,o.id,o):await this.unsubscribeByTopic(i,o)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((o,a)=>{const u=new ve.Watch;u.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(f),u.stop(this.pendingSubscriptionWatchLabel),o(!0)),u.elapsed(this.pendingSubscriptionWatchLabel)>=Ax&&(clearInterval(f),u.stop(this.pendingSubscriptionWatchLabel),a(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const o=_u(i);await this.rpcUnsubscribe(e,t,o);const a=jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const i={method:Go(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}return Li(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Go(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Qo(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}}rpcUnsubscribe(e,t,i){const o={method:Go(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Yc(ys({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ys({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,ys({},t)),this.topicMap.set(t.topic,e),this.events.emit(en.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(en.deleted,Yc(ys({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(en.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(en.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);xn(t)&&this.onBatchSubscribe(t.map((i,o)=>Yc(ys({},e[o]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(js.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ct.connect,async()=>{await this.onConnect()}),this.relayer.on(Ct.disconnect,()=>{this.onDisconnect()}),this.events.on(en.created,async e=>{const t=en.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(en.deleted,async e=>{const t=en.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var kx=Object.defineProperty,Ld=Object.getOwnPropertySymbols,Wx=Object.prototype.hasOwnProperty,Jx=Object.prototype.propertyIsEnumerable,Ud=(r,e,t)=>e in r?kx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Yx=(r,e)=>{for(var t in e||(e={}))Wx.call(e,t)&&Ud(r,t,e[t]);if(Ld)for(var t of Ld(e))Jx.call(e,t)&&Ud(r,t,e[t]);return r};class Xx extends c6{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new xr.EventEmitter,this.name=mx,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||bx})),this.messages=new Ux(this.logger,e.core),this.subscriber=new Gx(this,this.logger),this.publisher=new Mx(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Mg,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Dx)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return o||(await Promise.all([new Promise(a=>{this.subscriber.once(en.created,u=>{u.topic===e&&a()})}),new Promise(async a=>{o=await this.subscriber.subscribe(e,t),a()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ct.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(en.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,i)=>{await Qo(this.provider.connect(),5e3,"socket stalled").catch(o=>i(o)).then(()=>t()).finally(()=>this.removeListener(Ct.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Ct.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(Ct.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(ps.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qn(new jO(V3({sdkVersion:Sx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),df(e)){if(!e.method.endsWith(wx))return;const t=e.params,{topic:i,message:o,publishedAt:a}=t.data,u={topic:i,message:o,publishedAt:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Yx({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else pf(e)&&this.events.emit(Ct.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ct.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=hf(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(ps.payload,e=>this.onProviderPayload(e)),this.provider.on(ps.connect,()=>{this.events.emit(Ct.connect)}),this.provider.on(ps.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ps.error,e=>{this.logger.error(e),this.events.emit(Ct.error,e)})}registerEventListeners(){this.events.on(Ct.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ct.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(Ex))}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Qx=Object.defineProperty,Md=Object.getOwnPropertySymbols,Zx=Object.prototype.hasOwnProperty,eI=Object.prototype.propertyIsEnumerable,Bd=(r,e,t)=>e in r?Qx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qd=(r,e)=>{for(var t in e||(e={}))Zx.call(e,t)&&Bd(r,t,e[t]);if(Md)for(var t of Md(e))eI.call(e,t)&&Bd(r,t,e[t]);return r};class ha extends u6{constructor(e,t,i,o=Mn,a=void 0){super(e,t,i,o),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=Ox,this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!ur(u)?this.map.set(this.getKey(u),u):pS(u)?this.map.set(u.id,u):gS(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,f)=>{this.isInitialized(),this.map.has(u)?await this.update(u,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:f}),this.map.set(u,f),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(f=>Object.keys(u).every(g=>LO(f[g],u[g]))):this.values),this.update=async(u,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:f});const g=qd(qd({},this.getData(u)),f);this.map.set(u,g),await this.persist()},this.delete=async(u,f)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:f}),this.map.delete(u),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=a}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class tI{constructor(e,t){this.core=e,this.logger=t,this.name=Cx,this.version=Rx,this.events=new Ju,this.initialized=!1,this.storagePrefix=Mn,this.ignoredPayloadTypes=[fi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=yu(),o=await this.core.crypto.setSymKey(i),a=tn(ve.FIVE_MINUTES),u={protocol:Ug},f={topic:o,expiry:a,relay:u,active:!1},g=iS({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:i,relay:u});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,a),{topic:o,uri:g}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:o,symKey:a,relay:u}=tS(i.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const f=tn(ve.FIVE_MINUTES),g={topic:o,relay:u,expiry:f,active:!1};return await this.pairings.set(o,g),await this.core.crypto.setSymKey(a,o),await this.core.relayer.subscribe(o,{relay:u}),this.core.expirer.set(o,f),i.activatePairing&&await this.activate({topic:o}),g},this.activate=async({topic:i})=>{this.isInitialized();const o=tn(ve.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:o}),this.core.expirer.set(i,o)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:o}=i;if(this.pairings.keys.includes(o)){const a=await this.sendRequest(o,"wc_pairingPing",{}),{done:u,resolve:f,reject:g}=Ni();this.events.once(Kt("pairing_ping",a),({error:d})=>{d?g(d):f()}),await u()}},this.updateExpiry=async({topic:i,expiry:o})=>{this.isInitialized(),await this.pairings.update(i,{expiry:o})},this.updateMetadata=async({topic:i,metadata:o})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:o}=i;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",jt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(i,o,a)=>{const u=lf(o,a),f=await this.core.crypto.encode(i,u),g=gs[o].req;return this.core.history.set(i,u),this.core.relayer.publish(i,f,g),u.id},this.sendResult=async(i,o,a)=>{const u=hf(i,a),f=await this.core.crypto.encode(o,u),g=await this.core.history.get(o,i),d=gs[g.request.method].res;await this.core.relayer.publish(o,f,d),await this.core.history.resolve(u)},this.sendError=async(i,o,a)=>{const u=mg(i,a),f=await this.core.crypto.encode(o,u),g=await this.core.history.get(o,i),d=gs[g.request.method]?gs[g.request.method].res:gs.unregistered_method.res;await this.core.relayer.publish(o,f,d),await this.core.history.resolve(u)},this.deletePairing=async(i,o)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),o?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(o=>Un(o.expiry));await Promise.all(i.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=i=>{const{topic:o,payload:a}=i,u=a.method;if(this.pairings.keys.includes(o))switch(u){case"wc_pairingPing":return this.onPairingPingRequest(o,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,a);default:return this.onUnknownRpcMethodRequest(o,a)}},this.onRelayEventResponse=async i=>{const{topic:o,payload:a}=i,u=(await this.core.history.get(o,a.id)).request.method;if(this.pairings.keys.includes(o))switch(u){case"wc_pairingPing":return this.onPairingPingResponse(o,a);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,o)=>{const{id:a}=o;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit("pairing_ping",{id:a,topic:i})}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,o)=>{const{id:a}=o;setTimeout(()=>{On(o)?this.events.emit(Kt("pairing_ping",a),{}):rn(o)&&this.events.emit(Kt("pairing_ping",a),{error:o.error})},500)},this.onPairingDeleteRequest=async(i,o)=>{const{id:a}=o;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:a,topic:i})}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,o)=>{const{id:a,method:u}=o;try{if(this.registeredMethods.includes(u))return;const f=jt("WC_METHOD_UNSUPPORTED",u);await this.sendError(a,i,f),this.logger.error(f)}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(jt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!vr(i)){const{message:o}=fe("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(o)}if(!dS(i.uri)){const{message:o}=fe("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(o)}},this.isValidPing=async i=>{if(!vr(i)){const{message:a}=fe("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidDisconnect=async i=>{if(!vr(i)){const{message:a}=fe("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async i=>{if(!Jt(i,!1)){const{message:o}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(o)}if(!this.pairings.keys.includes(i)){const{message:o}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(o)}if(Un(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:o}=fe("EXPIRED",`pairing topic: ${i}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new ha(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ct.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const o=await this.core.crypto.decode(t,i);df(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):pf(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:t,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Ur.expired,async e=>{const{topic:t}=Yp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class rI extends s6{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new xr.EventEmitter,this.name=Tx,this.version=$x,this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,o,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:a}),this.records.has(o.id))return;const u={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:a};this.records.set(u.id,u),this.events.emit(Zr.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const o=await this.getRecord(i.id);typeof o.response>"u"&&(o.response=rn(i)?{error:i.error}:{result:i.result},this.records.set(o.id,o),this.events.emit(Zr.updated,o))},this.get=async(i,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:o}),await this.getRecord(o)),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(a=>{if(a.topic===i){if(typeof o<"u"&&a.id!==o)return;this.records.delete(a.id),this.events.emit(Zr.deleted,a)}})},this.exists=async(i,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===i:!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:lf(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Zr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Zr.created,e=>{const t=Zr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.updated,e=>{const t=Zr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Zr.deleted,e=>{const t=Zr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nI extends l6{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new xr.EventEmitter,this.name=Nx,this.version=jx,this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const a=this.formatTarget(i),u={target:a,expiry:o};this.expirations.set(a,u),this.checkExpiry(a,u),this.events.emit(Ur.created,{target:a,expiration:u})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),a=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Ur.deleted,{target:o,expiration:a})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return G3(e);if(typeof e=="number")return k3(e);const{message:t}=fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ur.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;ve.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ur.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(js.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ur.created,e=>{const t=Ur.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ur.expired,e=>{const t=Ur.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ur.deleted,e=>{const t=Ur.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class iI extends h6{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Jc,this.initialized=!1,this.init=async i=>{Vp()||!of()||(this.verifyUrl=(i==null?void 0:i.verifyUrl)||Nd,await this.createIframe())},this.register=async i=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`))},this.resolve=async i=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const a=this.startAbortTimer(ve.FIVE_SECONDS),u=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(a),u.status===200?(o=await u.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((i,o)=>{if(document.getElementById(Jc))return i();const a=document.createElement("iframe");a.setAttribute("id",Jc),a.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),a.style.display="none",a.addEventListener("load",()=>{this.initialized=!0,i()}),a.addEventListener("error",u=>{o(u)}),document.body.append(a),this.iframe=a}),new Promise(i=>{setTimeout(()=>i("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=Nd,this.abortController=new AbortController,this.isDevEnv=sf()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var sI=Object.defineProperty,zd=Object.getOwnPropertySymbols,oI=Object.prototype.hasOwnProperty,aI=Object.prototype.propertyIsEnumerable,Hd=(r,e,t)=>e in r?sI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Kd=(r,e)=>{for(var t in e||(e={}))oI.call(e,t)&&Hd(r,t,e[t]);if(zd)for(var t of zd(e))aI.call(e,t)&&Hd(r,t,e[t]);return r};let cI=class Bg extends i6{constructor(e){super(e),this.protocol=Lg,this.version=cx,this.name=yf,this.events=new xr.EventEmitter,this.initialized=!1,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Mg;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||ux.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new js.HeartBeat,this.crypto=new Lx(this,this.logger,e==null?void 0:e.keychain),this.history=new rI(this,this.logger),this.expirer=new nI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new c2(Kd(Kd({},fx),e==null?void 0:e.storageOptions)),this.relayer=new Xx({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new tI(this,this.logger),this.verify=new iI(this.projectId||"",this.logger)}static async init(e){const t=new Bg(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(xx,i),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const uI=cI,qg="wc",zg=2,Hg="client",_f=`${qg}@${zg}:${Hg}:`,Xc={name:Hg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},fI="WALLETCONNECT_DEEPLINK_CHOICE",lI="proposal",Kg="Proposal expired",hI="session",zo=ve.SEVEN_DAYS,dI="engine",_s={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},Qc={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},pI="request",gI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var yI=Object.defineProperty,_I=Object.defineProperties,vI=Object.getOwnPropertyDescriptors,Vd=Object.getOwnPropertySymbols,bI=Object.prototype.hasOwnProperty,mI=Object.prototype.propertyIsEnumerable,Gd=(r,e,t)=>e in r?yI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lr=(r,e)=>{for(var t in e||(e={}))bI.call(e,t)&&Gd(r,t,e[t]);if(Vd)for(var t of Vd(e))mI.call(e,t)&&Gd(r,t,e[t]);return r},Zc=(r,e)=>_I(r,vI(e));class wI extends p6{constructor(e){super(e),this.name=dI,this.events=new Ju,this.initialized=!1,this.ignoredPayloadTypes=[fi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(_s)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const i=Zc(Lr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:o,requiredNamespaces:a,optionalNamespaces:u,sessionProperties:f,relays:g}=i;let d=o,_,O=!1;if(d&&(O=this.client.core.pairing.pairings.get(d).active),!d||!O){const{topic:L,uri:x}=await this.client.core.pairing.create();d=L,_=x}const S=await this.client.core.crypto.generateKeyPair(),P=Lr({requiredNamespaces:a,optionalNamespaces:u,relays:g??[{protocol:Ug}],proposer:{publicKey:S,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:C,resolve:q,done:K}=Ni(ve.FIVE_MINUTES,Kg);if(this.events.once(Kt("session_connect"),async({error:L,session:x})=>{if(L)C(L);else if(x){x.self.publicKey=S;const T=Zc(Lr({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,T),await this.setExpiry(x.topic,x.expiry),d&&await this.client.core.pairing.updateMetadata({topic:d,metadata:x.peer.metadata}),q(T)}}),!d){const{message:L}=fe("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(L)}const ie=await this.sendRequest(d,"wc_sessionPropose",P),N=tn(ve.FIVE_MINUTES);return await this.setProposal(ie,Lr({id:ie,expiry:N},P)),{uri:_,approval:K}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:o,namespaces:a,sessionProperties:u}=t,f=this.client.proposal.get(i);let{pairingTopic:g,proposer:d,requiredNamespaces:_,optionalNamespaces:O}=f;g=g||"",Ui(_)||(_=cS(a,"approve()"));const S=await this.client.core.crypto.generateKeyPair(),P=d.publicKey,C=await this.client.core.crypto.generateSharedKey(S,P);g&&i&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:d.metadata}),await this.sendResult(i,g,{relay:{protocol:o??"irn"},responderPublicKey:S}),await this.client.proposal.delete(i,jt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const q=Lr({relay:{protocol:o??"irn"},namespaces:a,requiredNamespaces:_,optionalNamespaces:O,pairingTopic:g,controller:{publicKey:S,metadata:this.client.metadata},expiry:tn(zo)},u&&{sessionProperties:u});await this.client.core.relayer.subscribe(C),await this.sendRequest(C,"wc_sessionSettle",q);const K=Zc(Lr({},q),{topic:C,pairingTopic:g,acknowledged:!1,self:q.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:S});return await this.client.session.set(C,K),await this.setExpiry(C,tn(zo)),{topic:C,acknowledged:()=>new Promise(ie=>setTimeout(()=>ie(this.client.session.get(C)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:i,reason:o}=t,{pairingTopic:a}=this.client.proposal.get(i);a&&(await this.sendError(i,a,o),await this.client.proposal.delete(i,jt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:o}=t,a=await this.sendRequest(i,"wc_sessionUpdate",{namespaces:o}),{done:u,resolve:f,reject:g}=Ni();return this.events.once(Kt("session_update",a),({error:d})=>{d?g(d):f()}),await this.client.session.update(i,{namespaces:o}),{acknowledged:u}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,o=await this.sendRequest(i,"wc_sessionExtend",{}),{done:a,resolve:u,reject:f}=Ni();return this.events.once(Kt("session_extend",o),({error:g})=>{g?f(g):u()}),await this.setExpiry(i,tn(zo)),{acknowledged:a}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:o,topic:a,expiry:u}=t,f=await this.sendRequest(a,"wc_sessionRequest",{request:o,chainId:i},u),{done:g,resolve:d,reject:_}=Ni(u);this.events.once(Kt("session_request",f),({error:S,result:P})=>{S?_(S):d(P)}),this.client.events.emit("session_request_sent",{topic:a,request:o,chainId:i,id:f});const O=await this.client.core.storage.getItem(fI);return W3({id:f,topic:a,wcDeepLink:O}),await g()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:o}=t,{id:a}=o;On(o)?await this.sendResult(a,i,o.result):rn(o)&&await this.sendError(a,i,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const o=await this.sendRequest(i,"wc_sessionPing",{}),{done:a,resolve:u,reject:f}=Ni();this.events.once(Kt("session_ping",o),({error:g})=>{g?f(g):u()}),await a()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:o,chainId:a}=t;await this.sendRequest(i,"wc_sessionEvent",{event:o,chainId:a})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const o=bg().toString();let a;const u=f=>{(f==null?void 0:f.id.toString())===o&&(this.client.core.relayer.events.removeListener(Ct.message_ack,u),a())};await Promise.all([new Promise(f=>{a=f,this.client.core.relayer.on(Ct.message_ack,u)}),this.sendRequest(i,"wc_sessionDelete",jt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(i)}else await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>lS(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(a=>{var u,f;return((u=a.peerMetadata)==null?void 0:u.url)&&((f=a.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(t,i)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,jt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t)},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,jt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{const i=_s.wc_sessionRequest.req.ttl,{id:o,topic:a,params:u}=t;await this.client.pendingRequest.set(o,{id:o,topic:a,params:u}),i&&this.client.core.expirer.set(o,tn(i))},this.sendRequest=async(t,i,o,a,u)=>{const f=lf(i,o);if(of()&&gI.includes(i)){const _=Li(JSON.stringify(f));await this.client.core.verify.register({attestationId:_})}const g=await this.client.core.crypto.encode(t,f),d=_s[i].req;return a&&(d.ttl=a),u&&(d.id=u),this.client.core.history.set(t,f),this.client.core.relayer.publish(t,g,d),f.id},this.sendResult=async(t,i,o)=>{const a=hf(t,o),u=await this.client.core.crypto.encode(i,a),f=await this.client.core.history.get(i,t),g=_s[f.request.method].res;this.client.core.relayer.publish(i,u,g),await this.client.core.history.resolve(a)},this.sendError=async(t,i,o)=>{const a=mg(t,o),u=await this.client.core.crypto.encode(i,a),f=await this.client.core.history.get(i,t),g=_s[f.request.method].res;this.client.core.relayer.publish(i,u,g),await this.client.core.history.resolve(a)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(o=>{Un(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Un(o.expiry)&&i.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...i.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:i,payload:o}=t,a=o.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${a}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:o}=t,a=(await this.client.core.history.get(i,o.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(i,o);case"wc_sessionSettle":return this.onSessionSettleResponse(i,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,o);case"wc_sessionExtend":return this.onSessionExtendResponse(i,o);case"wc_sessionPing":return this.onSessionPingResponse(i,o);case"wc_sessionRequest":return this.onSessionRequestResponse(i,o);default:return this.client.logger.info(`Unsupported response method ${a}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:o}=fe("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,i)=>{const{params:o,id:a}=i;try{this.isValidConnect(Lr({},i.params));const u=tn(ve.FIVE_MINUTES),f=Lr({id:a,pairingTopic:t,expiry:u},o);await this.setProposal(a,f);const g=Li(JSON.stringify(i)),d=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:a,params:f,verifyContext:d})}catch(u){await this.sendError(a,t,u),this.client.logger.error(u)}},this.onSessionProposeResponse=async(t,i)=>{const{id:o}=i;if(On(i)){const{result:a}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const u=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const f=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const d=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const _=await this.client.core.relayer.subscribe(d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:_}),await this.client.core.pairing.activate({topic:t})}else rn(i)&&(await this.client.proposal.delete(o,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:o,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:u,controller:f,expiry:g,namespaces:d,requiredNamespaces:_,optionalNamespaces:O,sessionProperties:S,pairingTopic:P}=i.params,C=Lr({topic:t,relay:u,expiry:g,namespaces:d,acknowledged:!0,pairingTopic:P,requiredNamespaces:_,optionalNamespaces:O,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},S&&{sessionProperties:S});await this.sendResult(i.id,t,!0),this.events.emit(Kt("session_connect"),{session:C}),this.cleanupDuplicatePairings(C)}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionSettleResponse=async(t,i)=>{const{id:o}=i;On(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Kt("session_approve",o),{})):rn(i)&&(await this.client.session.delete(t,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_approve",o),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:o,id:a}=i;try{this.isValidUpdate(Lr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(a,t,!0),this.client.events.emit("session_update",{id:a,topic:t,params:o})}catch(u){await this.sendError(a,t,u),this.client.logger.error(u)}},this.onSessionUpdateResponse=(t,i)=>{const{id:o}=i;On(i)?this.events.emit(Kt("session_update",o),{}):rn(i)&&this.events.emit(Kt("session_update",o),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:o}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,tn(zo)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(a){await this.sendError(o,t,a),this.client.logger.error(a)}},this.onSessionExtendResponse=(t,i)=>{const{id:o}=i;On(i)?this.events.emit(Kt("session_extend",o),{}):rn(i)&&this.events.emit(Kt("session_extend",o),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:o}=i;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(a){await this.sendError(o,t,a),this.client.logger.error(a)}},this.onSessionPingResponse=(t,i)=>{const{id:o}=i;setTimeout(()=>{On(i)?this.events.emit(Kt("session_ping",o),{}):rn(i)&&this.events.emit(Kt("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(a=>{this.client.core.relayer.once(Ct.publish,async()=>{a(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async(t,i)=>{const{id:o,params:a}=i;try{this.isValidRequest(Lr({topic:t},a)),await this.setPendingSessionRequest({id:o,topic:t,params:a});const u=Li(JSON.stringify(i)),f=this.client.session.get(t),g=await this.getVerifyContext(u,f.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:a,verifyContext:g})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.onSessionRequestResponse=(t,i)=>{const{id:o}=i;On(i)?this.events.emit(Kt("session_request",o),{result:i.result}):rn(i)&&this.events.emit(Kt("session_request",o),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:o,params:a}=i;try{this.isValidEmit(Lr({topic:t},a)),this.client.events.emit("session_event",{id:o,topic:t,params:a})}catch(u){await this.sendError(o,t,u),this.client.logger.error(u)}},this.isValidConnect=async t=>{if(!vr(t)){const{message:g}=fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(g)}const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:u,relays:f}=t;if(ur(i)||await this.isValidPairingTopic(i),!SS(f,!0)){const{message:g}=fe("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!ur(o)&&Ui(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(a)&&Ui(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),ur(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(t,i)=>{const o=ES(t,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!vr(t))throw new Error(fe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:o,relayProtocol:a,sessionProperties:u}=t;await this.isValidProposalId(i);const f=this.client.proposal.get(i),g=Wo(o,"approve()");if(g)throw new Error(g.message);const d=Qh(f.requiredNamespaces,o,"approve()");if(d)throw new Error(d.message);if(!Jt(a,!0)){const{message:_}=fe("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(_)}ur(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async t=>{if(!vr(t)){const{message:a}=fe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:i,reason:o}=t;if(await this.isValidProposalId(i),!OS(o)){const{message:a}=fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(a)}},this.isValidSessionSettleRequest=t=>{if(!vr(t)){const{message:d}=fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(d)}const{relay:i,controller:o,namespaces:a,expiry:u}=t;if(!Zp(i)){const{message:d}=fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const f=yS(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=Wo(a,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Un(u)){const{message:d}=fe("EXPIRED","onSessionSettleRequest()");throw new Error(d)}},this.isValidUpdate=async t=>{if(!vr(t)){const{message:g}=fe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(g)}const{topic:i,namespaces:o}=t;await this.isValidSessionTopic(i);const a=this.client.session.get(i),u=Wo(o,"update()");if(u)throw new Error(u.message);const f=Qh(a.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!vr(t)){const{message:o}=fe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!vr(t)){const{message:g}=fe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(g)}const{topic:i,request:o,chainId:a,expiry:u}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!Xh(f,a)){const{message:g}=fe("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(g)}if(!xS(o)){const{message:g}=fe("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(g)}if(!AS(f,a,o.method)){const{message:g}=fe("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(g)}if(u&&!$S(u,Qc)){const{message:g}=fe("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${Qc.min} and ${Qc.max}`);throw new Error(g)}},this.isValidRespond=async t=>{if(!vr(t)){const{message:a}=fe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(a)}const{topic:i,response:o}=t;if(await this.isValidSessionTopic(i),!IS(o)){const{message:a}=fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(a)}},this.isValidPing=async t=>{if(!vr(t)){const{message:o}=fe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!vr(t)){const{message:f}=fe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:i,event:o,chainId:a}=t;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Xh(u,a)){const{message:f}=fe("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(f)}if(!PS(o)){const{message:f}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!CS(u,a,o.name)){const{message:f}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!vr(t)){const{message:o}=fe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const o={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{const a=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});a&&(o.verified.origin=a,o.verified.validation=a===i.url?"VALID":"INVALID")}catch(a){this.client.logger.error(a)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(o=>{if(!Jt(o,!1)){const{message:a}=fe("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(a)}})}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ct.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const o=await this.client.core.crypto.decode(t,i);df(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):pf(o)?(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:t,payload:o})):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Ur.expired,async e=>{const{topic:t,id:i}=Yp(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,fe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!Jt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Un(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=fe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Jt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Un(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=fe("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Jt(e,!1)){const{message:t}=fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!DS(e)){const{message:t}=fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Un(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=fe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class EI extends ha{constructor(e,t){super(e,t,lI,_f),this.core=e,this.logger=t}}class SI extends ha{constructor(e,t){super(e,t,hI,_f),this.core=e,this.logger=t}}class DI extends ha{constructor(e,t){super(e,t,pI,_f,i=>i.id),this.core=e,this.logger=t}}let OI=class Vg extends d6{constructor(e){super(e),this.protocol=qg,this.version=zg,this.name=Xc.name,this.events=new xr.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(o){throw this.logger.error(o.message),o}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(o){throw this.logger.error(o.message),o}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(o){throw this.logger.error(o.message),o}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(o){throw this.logger.error(o.message),o}},this.update=async i=>{try{return await this.engine.update(i)}catch(o){throw this.logger.error(o.message),o}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(o){throw this.logger.error(o.message),o}},this.request=async i=>{try{return await this.engine.request(i)}catch(o){throw this.logger.error(o.message),o}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(o){throw this.logger.error(o.message),o}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(o){throw this.logger.error(o.message),o}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(o){throw this.logger.error(o.message),o}},this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||Xc.name,this.metadata=(e==null?void 0:e.metadata)||q3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Xc.logger}));this.core=(e==null?void 0:e.core)||new uI(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new SI(this.core,this.logger),this.proposal=new EI(this.core,this.logger),this.pendingRequest=new DI(this.core,this.logger),this.engine=new wI(this)}static async init(e){const t=new Vg(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Uu={exports:{}};(function(r,e){var t=typeof self<"u"?self:rt,i=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(u){var f={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function g(w){return w&&DataView.prototype.isPrototypeOf(w)}if(f.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=ArrayBuffer.isView||function(w){return w&&d.indexOf(Object.prototype.toString.call(w))>-1};function O(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function S(w){return typeof w!="string"&&(w=String(w)),w}function P(w){var A={next:function(){var ee=w.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(A[Symbol.iterator]=function(){return A}),A}function C(w){this.map={},w instanceof C?w.forEach(function(A,ee){this.append(ee,A)},this):Array.isArray(w)?w.forEach(function(A){this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}C.prototype.append=function(w,A){w=O(w),A=S(A);var ee=this.map[w];this.map[w]=ee?ee+", "+A:A},C.prototype.delete=function(w){delete this.map[O(w)]},C.prototype.get=function(w){return w=O(w),this.has(w)?this.map[w]:null},C.prototype.has=function(w){return this.map.hasOwnProperty(O(w))},C.prototype.set=function(w,A){this.map[O(w)]=S(A)},C.prototype.forEach=function(w,A){for(var ee in this.map)this.map.hasOwnProperty(ee)&&w.call(A,this.map[ee],ee,this)},C.prototype.keys=function(){var w=[];return this.forEach(function(A,ee){w.push(ee)}),P(w)},C.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),P(w)},C.prototype.entries=function(){var w=[];return this.forEach(function(A,ee){w.push([ee,A])}),P(w)},f.iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);function q(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function K(w){return new Promise(function(A,ee){w.onload=function(){A(w.result)},w.onerror=function(){ee(w.error)}})}function ie(w){var A=new FileReader,ee=K(A);return A.readAsArrayBuffer(w),ee}function N(w){var A=new FileReader,ee=K(A);return A.readAsText(w),ee}function L(w){for(var A=new Uint8Array(w),ee=new Array(A.length),X=0;X<A.length;X++)ee[X]=String.fromCharCode(A[X]);return ee.join("")}function x(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:f.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:f.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():f.arrayBuffer&&f.blob&&g(w)?(this._bodyArrayBuffer=x(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||_(w))?this._bodyArrayBuffer=x(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var w=q(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ie)}),this.text=function(){var w=q(this);if(w)return w;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function l(w){var A=w.toUpperCase();return E.indexOf(A)>-1?A:w}function m(w,A){A=A||{};var ee=A.body;if(w instanceof m){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new C(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!ee&&w._bodyInit!=null&&(ee=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new C(A.headers)),this.method=l(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function k(w){var A=new FormData;return w.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),V=X.shift().replace(/\+/g," "),G=X.join("=").replace(/\+/g," ");A.append(decodeURIComponent(V),decodeURIComponent(G))}}),A}function W(w){var A=new C,ee=w.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var V=X.split(":"),G=V.shift().trim();if(G){var Y=V.join(":").trim();A.append(G,Y)}}),A}T.call(m.prototype);function se(w,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new C(A.headers),this.url=A.url||"",this._initBody(w)}T.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},se.error=function(){var w=new se(null,{status:0,statusText:""});return w.type="error",w};var ce=[301,302,303,307,308];se.redirect=function(w,A){if(ce.indexOf(A)===-1)throw new RangeError("Invalid status code");return new se(null,{status:A,headers:{location:w}})},u.DOMException=a.DOMException;try{new u.DOMException}catch{u.DOMException=function(A,ee){this.message=A,this.name=ee;var X=Error(A);this.stack=X.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function de(w,A){return new Promise(function(ee,X){var V=new m(w,A);if(V.signal&&V.signal.aborted)return X(new u.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function Y(){G.abort()}G.onload=function(){var re={status:G.status,statusText:G.statusText,headers:W(G.getAllResponseHeaders()||"")};re.url="responseURL"in G?G.responseURL:re.headers.get("X-Request-URL");var me="response"in G?G.response:G.responseText;ee(new se(me,re))},G.onerror=function(){X(new TypeError("Network request failed"))},G.ontimeout=function(){X(new TypeError("Network request failed"))},G.onabort=function(){X(new u.DOMException("Aborted","AbortError"))},G.open(V.method,V.url,!0),V.credentials==="include"?G.withCredentials=!0:V.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&f.blob&&(G.responseType="blob"),V.headers.forEach(function(re,me){G.setRequestHeader(me,re)}),V.signal&&(V.signal.addEventListener("abort",Y),G.onreadystatechange=function(){G.readyState===4&&V.signal.removeEventListener("abort",Y)}),G.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return de.polyfill=!0,a.fetch||(a.fetch=de,a.Headers=C,a.Request=m,a.Response=se),u.Headers=C,u.Request=m,u.Response=se,u.fetch=de,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,r.exports=e})(Uu,Uu.exports);var xI=Uu.exports;const kd=ku(xI),II=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),PI=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function AI(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return PI(r)}catch{return r}}function Wd(r){return typeof r=="string"?r:II(r)||""}const CI="PARSE_ERROR",RI="INVALID_REQUEST",TI="METHOD_NOT_FOUND",$I="INVALID_PARAMS",Gg="INTERNAL_ERROR",vf="SERVER_ERROR",NI=[-32700,-32600,-32601,-32602,-32603],ws={[CI]:{code:-32700,message:"Parse error"},[RI]:{code:-32600,message:"Invalid Request"},[TI]:{code:-32601,message:"Method not found"},[$I]:{code:-32602,message:"Invalid params"},[Gg]:{code:-32603,message:"Internal error"},[vf]:{code:-32e3,message:"Server error"}},kg=vf;function jI(r){return NI.includes(r)}function Jd(r){return Object.keys(ws).includes(r)?ws[r]:ws[kg]}function FI(r){const e=Object.values(ws).find(t=>t.code===r);return e||ws[kg]}function LI(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var UI={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mu=function(r,e){return Mu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},Mu(r,e)};function MI(r,e){Mu(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Bu=function(){return Bu=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Bu.apply(this,arguments)};function BI(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function qI(r,e,t,i){var o=arguments.length,a=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(a=(o<3?u(a):o>3?u(e,t,a):u(e,t))||a);return o>3&&a&&Object.defineProperty(e,t,a),a}function zI(r,e){return function(t,i){e(t,i,r)}}function HI(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function KI(r,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function f(_){try{d(i.next(_))}catch(O){u(O)}}function g(_){try{d(i.throw(_))}catch(O){u(O)}}function d(_){_.done?a(_.value):o(_.value).then(f,g)}d((i=i.apply(r,e||[])).next())})}function VI(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(d){return function(_){return g([d,_])}}function g(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,o=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(_){d=[6,_],o=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function GI(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function kI(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function qu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wg(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(f){u={error:f}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return a}function WI(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Wg(arguments[e]));return r}function JI(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var a=arguments[e],u=0,f=a.length;u<f;u++,o++)i[o]=a[u];return i}function Cs(r){return this instanceof Cs?(this.v=r,this):new Cs(r)}function YI(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(S){i[S]&&(o[S]=function(P){return new Promise(function(C,q){a.push([S,P,C,q])>1||f(S,P)})})}function f(S,P){try{g(i[S](P))}catch(C){O(a[0][3],C)}}function g(S){S.value instanceof Cs?Promise.resolve(S.value.v).then(d,_):O(a[0][2],S)}function d(S){f("next",S)}function _(S){f("throw",S)}function O(S,P){S(P),a.shift(),a.length&&f(a[0][0],a[0][1])}}function XI(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,a){e[o]=r[o]?function(u){return(t=!t)?{value:Cs(r[o](u)),done:o==="return"}:a?a(u):u}:a}}function QI(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof qu=="function"?qu(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(u){return new Promise(function(f,g){u=r[a](u),o(f,g,u.done,u.value)})}}function o(a,u,f,g){Promise.resolve(g).then(function(d){a({value:d,done:f})},u)}}function ZI(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function eP(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function tP(r){return r&&r.__esModule?r:{default:r}}function rP(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function nP(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const iP=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Bu},__asyncDelegator:XI,__asyncGenerator:YI,__asyncValues:QI,__await:Cs,__awaiter:KI,__classPrivateFieldGet:rP,__classPrivateFieldSet:nP,__createBinding:GI,__decorate:qI,__exportStar:kI,__extends:MI,__generator:VI,__importDefault:tP,__importStar:eP,__makeTemplateObject:ZI,__metadata:HI,__param:zI,__read:Wg,__rest:BI,__spread:WI,__spreadArrays:JI,__values:qu},Symbol.toStringTag,{value:"Module"})),sP=nn(iP);var Sn={},Yd;function oP(){if(Yd)return Sn;Yd=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.isBrowserCryptoAvailable=Sn.getSubtleCrypto=Sn.getBrowerCrypto=void 0;function r(){return(rt===null||rt===void 0?void 0:rt.crypto)||(rt===null||rt===void 0?void 0:rt.msCrypto)||{}}Sn.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}Sn.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Sn.isBrowserCryptoAvailable=t,Sn}var Dn={},Xd;function aP(){if(Xd)return Dn;Xd=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.isBrowser=Dn.isNode=Dn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Dn.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Dn.isNode=e;function t(){return!r()&&!e()}return Dn.isBrowser=t,Dn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=sP;e.__exportStar(oP(),r),e.__exportStar(aP(),r)})(UI);function cP(r,e,t){return{id:r,jsonrpc:"2.0",error:uP(e,t)}}function uP(r,e){return typeof r>"u"?Jd(Gg):(typeof r=="string"&&(r=Object.assign(Object.assign({},Jd(vf)),{message:r})),typeof e<"u"&&(r.data=e),jI(r.code)&&(r=FI(r.code)),r)}const fP="^https?:";function lP(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function hP(r,e){const t=lP(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Qd(r){return hP(r,fP)}const dP={Accept:"application/json","Content-Type":"application/json"},pP="POST",Zd={headers:dP,method:pP},ep=10;class hi{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new xr.EventEmitter,this.isAvailable=!1,this.registering=!1,!Qd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const i=Wd(e),a=await(await kd(this.url,Object.assign(Object.assign({},Zd),{body:i}))).json();this.onPayload({data:a})}catch(i){this.onError(e.id,i)}}async register(e=this.url){if(!Qd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),o(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Wd({id:1,jsonrpc:"2.0",method:"test",params:[]});await kd(e,Object.assign(Object.assign({},Zd),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?AI(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),a=cP(e,o);this.events.emit("payload",a)}parseError(e,t=this.url){return LI(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ep&&this.events.setMaxListeners(ep)}}const tp="error",gP="wss://relay.walletconnect.com",yP="wc",_P="universal_provider",rp=`${yP}@2:${_P}:`,vP="https://rpc.walletconnect.com/v1",zn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",d=500,_="__lodash_placeholder__",O=1,S=2,P=4,C=1,q=2,K=1,ie=2,N=4,L=8,x=16,T=32,E=64,l=128,m=256,k=512,W=30,se="...",ce=800,de=16,w=1,A=2,ee=3,X=1/0,V=9007199254740991,G=17976931348623157e292,Y=0/0,re=4294967295,me=re-1,oe=re>>>1,we=[["ary",l],["bind",K],["bindKey",ie],["curry",L],["curryRight",x],["flip",k],["partial",T],["partialRight",E],["rearg",m]],le="[object Arguments]",_e="[object Array]",z="[object AsyncFunction]",B="[object Boolean]",j="[object Date]",p="[object DOMException]",R="[object Error]",ae="[object Function]",he="[object GeneratorFunction]",Oe="[object Map]",ze="[object Number]",Ve="[object Null]",Le="[object Object]",yt="[object Promise]",_t="[object Proxy]",Me="[object RegExp]",xe="[object Set]",$e="[object String]",Ne="[object Symbol]",Be="[object Undefined]",Pe="[object WeakMap]",je="[object WeakSet]",De="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",Ie="[object Float64Array]",Ge="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Ye="[object Uint8ClampedArray]",rr="[object Uint16Array]",hr="[object Uint32Array]",Gr=/\b__p \+= '';/g,nr=/\b(__p \+=) '' \+/g,sn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,In=/&(?:amp|lt|gt|quot|#39);/g,Hn=/[&<>"']/g,St=RegExp(In.source),vt=RegExp(Hn.source),Dt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(xt.source),It=/^\s+/,Rt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,da=/[()=,{}\[\]\/\s]/,pa=/\\(\\)?/g,ga=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pr=/\w*$/,ya=/^[-+]0x[0-9a-f]+$/i,_a=/^0b[01]+$/i,va=/^\[object .+?Constructor\]$/,ba=/^0o[0-7]+$/i,ma=/^(?:0|[1-9]\d*)$/,on=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,di=/($^)/,wa=/['\n\r\u2028\u2029\\]/g,pi="\\ud800-\\udfff",Ea="\\u0300-\\u036f",Sa="\\ufe20-\\ufe2f",gi="\\u20d0-\\u20ff",Ls=Ea+Sa+gi,Us="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",Da="\\xac\\xb1\\xd7\\xf7",Oa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xa="\\u2000-\\u206f",Ia=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ms="A-Z\\xc0-\\xd6\\xd8-\\xde",Bs="\\ufe0e\\ufe0f",Kn=Da+Oa+xa+Ia,zi="['â€™]",Vn="["+pi+"]",Hi="["+Kn+"]",Gn="["+Ls+"]",qs="\\d+",Pa="["+Us+"]",zs="["+Br+"]",Hs="[^"+pi+Kn+qs+Us+Br+Ms+"]",yi="\\ud83c[\\udffb-\\udfff]",Aa="(?:"+Gn+"|"+yi+")",Ks="[^"+pi+"]",_i="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+Ms+"]",Vs="\\u200d",Gs="(?:"+zs+"|"+Hs+")",kr="(?:"+mr+"|"+Hs+")",ks="(?:"+zi+"(?:d|ll|m|re|s|t|ve))?",Ws="(?:"+zi+"(?:D|LL|M|RE|S|T|VE))?",Js=Aa+"?",Ys="["+Bs+"]?",Ca="(?:"+Vs+"(?:"+[Ks,_i,Pn].join("|")+")"+Ys+Js+")*",an="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qs=Ys+Js+Ca,vi="(?:"+[Pa,_i,Pn].join("|")+")"+Qs,Ra="(?:"+[Ks+Gn+"?",Gn,_i,Pn,Vn].join("|")+")",Ki=RegExp(zi,"g"),Ta=RegExp(Gn,"g"),bi=RegExp(yi+"(?="+yi+")|"+Ra+Qs,"g"),Zs=RegExp([mr+"?"+zs+"+"+ks+"(?="+[Hi,mr,"$"].join("|")+")",kr+"+"+Ws+"(?="+[Hi,mr+Gs,"$"].join("|")+")",mr+"?"+Gs+"+"+ks,mr+"+"+Ws,Xs,an,qs,vi].join("|"),"g"),eo=RegExp("["+Vs+pi+Ls+Bs+"]"),kn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,to=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$a=-1,ct={};ct[He]=ct[Ie]=ct[Ge]=ct[We]=ct[et]=ct[tt]=ct[Ye]=ct[rr]=ct[hr]=!0,ct[le]=ct[_e]=ct[De]=ct[B]=ct[Ae]=ct[j]=ct[R]=ct[ae]=ct[Oe]=ct[ze]=ct[Le]=ct[Me]=ct[xe]=ct[$e]=ct[Pe]=!1;var ot={};ot[le]=ot[_e]=ot[De]=ot[Ae]=ot[B]=ot[j]=ot[He]=ot[Ie]=ot[Ge]=ot[We]=ot[et]=ot[Oe]=ot[ze]=ot[Le]=ot[Me]=ot[xe]=ot[$e]=ot[Ne]=ot[tt]=ot[Ye]=ot[rr]=ot[hr]=!0,ot[R]=ot[ae]=ot[Pe]=!1;var D={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,Re=parseInt,pt=typeof vs=="object"&&vs&&vs.Object===Object&&vs,zt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=pt||zt||Function("return this")(),ft=e&&!e.nodeType&&e,Tt=ft&&!0&&r&&!r.nodeType&&r,dr=Tt&&Tt.exports===ft,Ht=dr&&pt.process,gt=function(){try{var U=Tt&&Tt.require&&Tt.require("util").types;return U||Ht&&Ht.binding&&Ht.binding("util")}catch{}}(),ir=gt&&gt.isArrayBuffer,qr=gt&&gt.isDate,Ar=gt&&gt.isMap,Wr=gt&&gt.isRegExp,Vi=gt&&gt.isSet,Wn=gt&&gt.isTypedArray;function kt(U,J,H){switch(H.length){case 0:return U.call(J);case 1:return U.call(J,H[0]);case 2:return U.call(J,H[0],H[1]);case 3:return U.call(J,H[0],H[1],H[2])}return U.apply(J,H)}function Yg(U,J,H,ge){for(var Ce=-1,nt=U==null?0:U.length;++Ce<nt;){var Vt=U[Ce];J(ge,Vt,H(Vt),U)}return ge}function Cr(U,J){for(var H=-1,ge=U==null?0:U.length;++H<ge&&J(U[H],H,U)!==!1;);return U}function Xg(U,J){for(var H=U==null?0:U.length;H--&&J(U[H],H,U)!==!1;);return U}function wf(U,J){for(var H=-1,ge=U==null?0:U.length;++H<ge;)if(!J(U[H],H,U))return!1;return!0}function An(U,J){for(var H=-1,ge=U==null?0:U.length,Ce=0,nt=[];++H<ge;){var Vt=U[H];J(Vt,H,U)&&(nt[Ce++]=Vt)}return nt}function ro(U,J){var H=U==null?0:U.length;return!!H&&mi(U,J,0)>-1}function Na(U,J,H){for(var ge=-1,Ce=U==null?0:U.length;++ge<Ce;)if(H(J,U[ge]))return!0;return!1}function mt(U,J){for(var H=-1,ge=U==null?0:U.length,Ce=Array(ge);++H<ge;)Ce[H]=J(U[H],H,U);return Ce}function Cn(U,J){for(var H=-1,ge=J.length,Ce=U.length;++H<ge;)U[Ce+H]=J[H];return U}function ja(U,J,H,ge){var Ce=-1,nt=U==null?0:U.length;for(ge&&nt&&(H=U[++Ce]);++Ce<nt;)H=J(H,U[Ce],Ce,U);return H}function Qg(U,J,H,ge){var Ce=U==null?0:U.length;for(ge&&Ce&&(H=U[--Ce]);Ce--;)H=J(H,U[Ce],Ce,U);return H}function Fa(U,J){for(var H=-1,ge=U==null?0:U.length;++H<ge;)if(J(U[H],H,U))return!0;return!1}var Zg=La("length");function e0(U){return U.split("")}function t0(U){return U.match(qt)||[]}function Ef(U,J,H){var ge;return H(U,function(Ce,nt,Vt){if(J(Ce,nt,Vt))return ge=nt,!1}),ge}function no(U,J,H,ge){for(var Ce=U.length,nt=H+(ge?1:-1);ge?nt--:++nt<Ce;)if(J(U[nt],nt,U))return nt;return-1}function mi(U,J,H){return J===J?d0(U,J,H):no(U,Sf,H)}function r0(U,J,H,ge){for(var Ce=H-1,nt=U.length;++Ce<nt;)if(ge(U[Ce],J))return Ce;return-1}function Sf(U){return U!==U}function Df(U,J){var H=U==null?0:U.length;return H?Ma(U,J)/H:Y}function La(U){return function(J){return J==null?t:J[U]}}function Ua(U){return function(J){return U==null?t:U[J]}}function Of(U,J,H,ge,Ce){return Ce(U,function(nt,Vt,lt){H=ge?(ge=!1,nt):J(H,nt,Vt,lt)}),H}function n0(U,J){var H=U.length;for(U.sort(J);H--;)U[H]=U[H].value;return U}function Ma(U,J){for(var H,ge=-1,Ce=U.length;++ge<Ce;){var nt=J(U[ge]);nt!==t&&(H=H===t?nt:H+nt)}return H}function Ba(U,J){for(var H=-1,ge=Array(U);++H<U;)ge[H]=J(H);return ge}function i0(U,J){return mt(J,function(H){return[H,U[H]]})}function xf(U){return U&&U.slice(0,Cf(U)+1).replace(It,"")}function wr(U){return function(J){return U(J)}}function qa(U,J){return mt(J,function(H){return U[H]})}function Gi(U,J){return U.has(J)}function If(U,J){for(var H=-1,ge=U.length;++H<ge&&mi(J,U[H],0)>-1;);return H}function Pf(U,J){for(var H=U.length;H--&&mi(J,U[H],0)>-1;);return H}function s0(U,J){for(var H=U.length,ge=0;H--;)U[H]===J&&++ge;return ge}var o0=Ua(D),a0=Ua(F);function c0(U){return"\\"+pe[U]}function u0(U,J){return U==null?t:U[J]}function wi(U){return eo.test(U)}function f0(U){return kn.test(U)}function l0(U){for(var J,H=[];!(J=U.next()).done;)H.push(J.value);return H}function za(U){var J=-1,H=Array(U.size);return U.forEach(function(ge,Ce){H[++J]=[Ce,ge]}),H}function Af(U,J){return function(H){return U(J(H))}}function Rn(U,J){for(var H=-1,ge=U.length,Ce=0,nt=[];++H<ge;){var Vt=U[H];(Vt===J||Vt===_)&&(U[H]=_,nt[Ce++]=H)}return nt}function io(U){var J=-1,H=Array(U.size);return U.forEach(function(ge){H[++J]=ge}),H}function h0(U){var J=-1,H=Array(U.size);return U.forEach(function(ge){H[++J]=[ge,ge]}),H}function d0(U,J,H){for(var ge=H-1,Ce=U.length;++ge<Ce;)if(U[ge]===J)return ge;return-1}function p0(U,J,H){for(var ge=H+1;ge--;)if(U[ge]===J)return ge;return ge}function Ei(U){return wi(U)?y0(U):Zg(U)}function zr(U){return wi(U)?_0(U):e0(U)}function Cf(U){for(var J=U.length;J--&&Rt.test(U.charAt(J)););return J}var g0=Ua(te);function y0(U){for(var J=bi.lastIndex=0;bi.test(U);)++J;return J}function _0(U){return U.match(bi)||[]}function v0(U){return U.match(Zs)||[]}var b0=function U(J){J=J==null?Xe:Si.defaults(Xe.Object(),J,Si.pick(Xe,to));var H=J.Array,ge=J.Date,Ce=J.Error,nt=J.Function,Vt=J.Math,lt=J.Object,Ha=J.RegExp,m0=J.String,Rr=J.TypeError,so=H.prototype,w0=nt.prototype,Di=lt.prototype,oo=J["__core-js_shared__"],ao=w0.toString,st=Di.hasOwnProperty,E0=0,Rf=function(){var n=/[^.]+$/.exec(oo&&oo.keys&&oo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),co=Di.toString,S0=ao.call(lt),D0=Xe._,O0=Ha("^"+ao.call(st).replace(xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uo=dr?J.Buffer:t,Tn=J.Symbol,fo=J.Uint8Array,Tf=uo?uo.allocUnsafe:t,lo=Af(lt.getPrototypeOf,lt),$f=lt.create,Nf=Di.propertyIsEnumerable,ho=so.splice,jf=Tn?Tn.isConcatSpreadable:t,ki=Tn?Tn.iterator:t,Jn=Tn?Tn.toStringTag:t,po=function(){try{var n=ei(lt,"defineProperty");return n({},"",{}),n}catch{}}(),x0=J.clearTimeout!==Xe.clearTimeout&&J.clearTimeout,I0=ge&&ge.now!==Xe.Date.now&&ge.now,P0=J.setTimeout!==Xe.setTimeout&&J.setTimeout,go=Vt.ceil,yo=Vt.floor,Ka=lt.getOwnPropertySymbols,A0=uo?uo.isBuffer:t,Ff=J.isFinite,C0=so.join,R0=Af(lt.keys,lt),Gt=Vt.max,Zt=Vt.min,T0=ge.now,$0=J.parseInt,Lf=Vt.random,N0=so.reverse,Va=ei(J,"DataView"),Wi=ei(J,"Map"),Ga=ei(J,"Promise"),Oi=ei(J,"Set"),Ji=ei(J,"WeakMap"),Yi=ei(lt,"create"),_o=Ji&&new Ji,xi={},j0=ti(Va),F0=ti(Wi),L0=ti(Ga),U0=ti(Oi),M0=ti(Ji),vo=Tn?Tn.prototype:t,Xi=vo?vo.valueOf:t,Uf=vo?vo.toString:t;function v(n){if(At(n)&&!Te(n)&&!(n instanceof Je)){if(n instanceof Tr)return n;if(st.call(n,"__wrapped__"))return Ml(n)}return new Tr(n)}var Ii=function(){function n(){}return function(s){if(!Et(s))return{};if($f)return $f(s);n.prototype=s;var c=new n;return n.prototype=t,c}}();function bo(){}function Tr(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}v.templateSettings={escape:Dt,evaluate:Ot,interpolate:wt,variable:"",imports:{_:v}},v.prototype=bo.prototype,v.prototype.constructor=v,Tr.prototype=Ii(bo.prototype),Tr.prototype.constructor=Tr;function Je(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function B0(){var n=new Je(this.__wrapped__);return n.__actions__=pr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=pr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=pr(this.__views__),n}function q0(){if(this.__filtered__){var n=new Je(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function z0(){var n=this.__wrapped__.value(),s=this.__dir__,c=Te(n),h=s<0,y=c?n.length:0,b=e_(0,y,this.__views__),I=b.start,$=b.end,M=$-I,Q=h?$:I-1,Z=this.__iteratees__,ne=Z.length,ue=0,ye=Zt(M,this.__takeCount__);if(!c||!h&&y==M&&ye==M)return cl(n,this.__actions__);var Ee=[];e:for(;M--&&ue<ye;){Q+=s;for(var qe=-1,Se=n[Q];++qe<ne;){var ke=Z[qe],Qe=ke.iteratee,Dr=ke.type,ar=Qe(Se);if(Dr==A)Se=ar;else if(!ar){if(Dr==w)continue e;break e}}Ee[ue++]=Se}return Ee}Je.prototype=Ii(bo.prototype),Je.prototype.constructor=Je;function Yn(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var h=n[s];this.set(h[0],h[1])}}function H0(){this.__data__=Yi?Yi(null):{},this.size=0}function K0(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}function V0(n){var s=this.__data__;if(Yi){var c=s[n];return c===g?t:c}return st.call(s,n)?s[n]:t}function G0(n){var s=this.__data__;return Yi?s[n]!==t:st.call(s,n)}function k0(n,s){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=Yi&&s===t?g:s,this}Yn.prototype.clear=H0,Yn.prototype.delete=K0,Yn.prototype.get=V0,Yn.prototype.has=G0,Yn.prototype.set=k0;function cn(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var h=n[s];this.set(h[0],h[1])}}function W0(){this.__data__=[],this.size=0}function J0(n){var s=this.__data__,c=mo(s,n);if(c<0)return!1;var h=s.length-1;return c==h?s.pop():ho.call(s,c,1),--this.size,!0}function Y0(n){var s=this.__data__,c=mo(s,n);return c<0?t:s[c][1]}function X0(n){return mo(this.__data__,n)>-1}function Q0(n,s){var c=this.__data__,h=mo(c,n);return h<0?(++this.size,c.push([n,s])):c[h][1]=s,this}cn.prototype.clear=W0,cn.prototype.delete=J0,cn.prototype.get=Y0,cn.prototype.has=X0,cn.prototype.set=Q0;function un(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var h=n[s];this.set(h[0],h[1])}}function Z0(){this.size=0,this.__data__={hash:new Yn,map:new(Wi||cn),string:new Yn}}function ey(n){var s=To(this,n).delete(n);return this.size-=s?1:0,s}function ty(n){return To(this,n).get(n)}function ry(n){return To(this,n).has(n)}function ny(n,s){var c=To(this,n),h=c.size;return c.set(n,s),this.size+=c.size==h?0:1,this}un.prototype.clear=Z0,un.prototype.delete=ey,un.prototype.get=ty,un.prototype.has=ry,un.prototype.set=ny;function Xn(n){var s=-1,c=n==null?0:n.length;for(this.__data__=new un;++s<c;)this.add(n[s])}function iy(n){return this.__data__.set(n,g),this}function sy(n){return this.__data__.has(n)}Xn.prototype.add=Xn.prototype.push=iy,Xn.prototype.has=sy;function Hr(n){var s=this.__data__=new cn(n);this.size=s.size}function oy(){this.__data__=new cn,this.size=0}function ay(n){var s=this.__data__,c=s.delete(n);return this.size=s.size,c}function cy(n){return this.__data__.get(n)}function uy(n){return this.__data__.has(n)}function fy(n,s){var c=this.__data__;if(c instanceof cn){var h=c.__data__;if(!Wi||h.length<o-1)return h.push([n,s]),this.size=++c.size,this;c=this.__data__=new un(h)}return c.set(n,s),this.size=c.size,this}Hr.prototype.clear=oy,Hr.prototype.delete=ay,Hr.prototype.get=cy,Hr.prototype.has=uy,Hr.prototype.set=fy;function Mf(n,s){var c=Te(n),h=!c&&ri(n),y=!c&&!h&&Ln(n),b=!c&&!h&&!y&&Ri(n),I=c||h||y||b,$=I?Ba(n.length,m0):[],M=$.length;for(var Q in n)(s||st.call(n,Q))&&!(I&&(Q=="length"||y&&(Q=="offset"||Q=="parent")||b&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||dn(Q,M)))&&$.push(Q);return $}function Bf(n){var s=n.length;return s?n[nc(0,s-1)]:t}function ly(n,s){return $o(pr(n),Qn(s,0,n.length))}function hy(n){return $o(pr(n))}function ka(n,s,c){(c!==t&&!Kr(n[s],c)||c===t&&!(s in n))&&fn(n,s,c)}function Qi(n,s,c){var h=n[s];(!(st.call(n,s)&&Kr(h,c))||c===t&&!(s in n))&&fn(n,s,c)}function mo(n,s){for(var c=n.length;c--;)if(Kr(n[c][0],s))return c;return-1}function dy(n,s,c,h){return $n(n,function(y,b,I){s(h,y,c(y),I)}),h}function qf(n,s){return n&&Yr(s,Wt(s),n)}function py(n,s){return n&&Yr(s,yr(s),n)}function fn(n,s,c){s=="__proto__"&&po?po(n,s,{configurable:!0,enumerable:!0,value:c,writable:!0}):n[s]=c}function Wa(n,s){for(var c=-1,h=s.length,y=H(h),b=n==null;++c<h;)y[c]=b?t:Pc(n,s[c]);return y}function Qn(n,s,c){return n===n&&(c!==t&&(n=n<=c?n:c),s!==t&&(n=n>=s?n:s)),n}function $r(n,s,c,h,y,b){var I,$=s&O,M=s&S,Q=s&P;if(c&&(I=y?c(n,h,y,b):c(n)),I!==t)return I;if(!Et(n))return n;var Z=Te(n);if(Z){if(I=r_(n),!$)return pr(n,I)}else{var ne=er(n),ue=ne==ae||ne==he;if(Ln(n))return ll(n,$);if(ne==Le||ne==le||ue&&!y){if(I=M||ue?{}:Cl(n),!$)return M?Vy(n,py(I,n)):Ky(n,qf(I,n))}else{if(!ot[ne])return y?n:{};I=n_(n,ne,$)}}b||(b=new Hr);var ye=b.get(n);if(ye)return ye;b.set(n,I),sh(n)?n.forEach(function(Se){I.add($r(Se,s,c,Se,n,b))}):nh(n)&&n.forEach(function(Se,ke){I.set(ke,$r(Se,s,c,ke,n,b))});var Ee=Q?M?pc:dc:M?yr:Wt,qe=Z?t:Ee(n);return Cr(qe||n,function(Se,ke){qe&&(ke=Se,Se=n[ke]),Qi(I,ke,$r(Se,s,c,ke,n,b))}),I}function gy(n){var s=Wt(n);return function(c){return zf(c,n,s)}}function zf(n,s,c){var h=c.length;if(n==null)return!h;for(n=lt(n);h--;){var y=c[h],b=s[y],I=n[y];if(I===t&&!(y in n)||!b(I))return!1}return!0}function Hf(n,s,c){if(typeof n!="function")throw new Rr(u);return ss(function(){n.apply(t,c)},s)}function Zi(n,s,c,h){var y=-1,b=ro,I=!0,$=n.length,M=[],Q=s.length;if(!$)return M;c&&(s=mt(s,wr(c))),h?(b=Na,I=!1):s.length>=o&&(b=Gi,I=!1,s=new Xn(s));e:for(;++y<$;){var Z=n[y],ne=c==null?Z:c(Z);if(Z=h||Z!==0?Z:0,I&&ne===ne){for(var ue=Q;ue--;)if(s[ue]===ne)continue e;M.push(Z)}else b(s,ne,h)||M.push(Z)}return M}var $n=yl(Jr),Kf=yl(Ya,!0);function yy(n,s){var c=!0;return $n(n,function(h,y,b){return c=!!s(h,y,b),c}),c}function wo(n,s,c){for(var h=-1,y=n.length;++h<y;){var b=n[h],I=s(b);if(I!=null&&($===t?I===I&&!Sr(I):c(I,$)))var $=I,M=b}return M}function _y(n,s,c,h){var y=n.length;for(c=Ue(c),c<0&&(c=-c>y?0:y+c),h=h===t||h>y?y:Ue(h),h<0&&(h+=y),h=c>h?0:ah(h);c<h;)n[c++]=s;return n}function Vf(n,s){var c=[];return $n(n,function(h,y,b){s(h,y,b)&&c.push(h)}),c}function Yt(n,s,c,h,y){var b=-1,I=n.length;for(c||(c=s_),y||(y=[]);++b<I;){var $=n[b];s>0&&c($)?s>1?Yt($,s-1,c,h,y):Cn(y,$):h||(y[y.length]=$)}return y}var Ja=_l(),Gf=_l(!0);function Jr(n,s){return n&&Ja(n,s,Wt)}function Ya(n,s){return n&&Gf(n,s,Wt)}function Eo(n,s){return An(s,function(c){return pn(n[c])})}function Zn(n,s){s=jn(s,n);for(var c=0,h=s.length;n!=null&&c<h;)n=n[Xr(s[c++])];return c&&c==h?n:t}function kf(n,s,c){var h=s(n);return Te(n)?h:Cn(h,c(n))}function sr(n){return n==null?n===t?Be:Ve:Jn&&Jn in lt(n)?Zy(n):h_(n)}function Xa(n,s){return n>s}function vy(n,s){return n!=null&&st.call(n,s)}function by(n,s){return n!=null&&s in lt(n)}function my(n,s,c){return n>=Zt(s,c)&&n<Gt(s,c)}function Qa(n,s,c){for(var h=c?Na:ro,y=n[0].length,b=n.length,I=b,$=H(b),M=1/0,Q=[];I--;){var Z=n[I];I&&s&&(Z=mt(Z,wr(s))),M=Zt(Z.length,M),$[I]=!c&&(s||y>=120&&Z.length>=120)?new Xn(I&&Z):t}Z=n[0];var ne=-1,ue=$[0];e:for(;++ne<y&&Q.length<M;){var ye=Z[ne],Ee=s?s(ye):ye;if(ye=c||ye!==0?ye:0,!(ue?Gi(ue,Ee):h(Q,Ee,c))){for(I=b;--I;){var qe=$[I];if(!(qe?Gi(qe,Ee):h(n[I],Ee,c)))continue e}ue&&ue.push(Ee),Q.push(ye)}}return Q}function wy(n,s,c,h){return Jr(n,function(y,b,I){s(h,c(y),b,I)}),h}function es(n,s,c){s=jn(s,n),n=Nl(n,s);var h=n==null?n:n[Xr(jr(s))];return h==null?t:kt(h,n,c)}function Wf(n){return At(n)&&sr(n)==le}function Ey(n){return At(n)&&sr(n)==De}function Sy(n){return At(n)&&sr(n)==j}function ts(n,s,c,h,y){return n===s?!0:n==null||s==null||!At(n)&&!At(s)?n!==n&&s!==s:Dy(n,s,c,h,ts,y)}function Dy(n,s,c,h,y,b){var I=Te(n),$=Te(s),M=I?_e:er(n),Q=$?_e:er(s);M=M==le?Le:M,Q=Q==le?Le:Q;var Z=M==Le,ne=Q==Le,ue=M==Q;if(ue&&Ln(n)){if(!Ln(s))return!1;I=!0,Z=!1}if(ue&&!Z)return b||(b=new Hr),I||Ri(n)?Il(n,s,c,h,y,b):Xy(n,s,M,c,h,y,b);if(!(c&C)){var ye=Z&&st.call(n,"__wrapped__"),Ee=ne&&st.call(s,"__wrapped__");if(ye||Ee){var qe=ye?n.value():n,Se=Ee?s.value():s;return b||(b=new Hr),y(qe,Se,c,h,b)}}return ue?(b||(b=new Hr),Qy(n,s,c,h,y,b)):!1}function Oy(n){return At(n)&&er(n)==Oe}function Za(n,s,c,h){var y=c.length,b=y,I=!h;if(n==null)return!b;for(n=lt(n);y--;){var $=c[y];if(I&&$[2]?$[1]!==n[$[0]]:!($[0]in n))return!1}for(;++y<b;){$=c[y];var M=$[0],Q=n[M],Z=$[1];if(I&&$[2]){if(Q===t&&!(M in n))return!1}else{var ne=new Hr;if(h)var ue=h(Q,Z,M,n,s,ne);if(!(ue===t?ts(Z,Q,C|q,h,ne):ue))return!1}}return!0}function Jf(n){if(!Et(n)||a_(n))return!1;var s=pn(n)?O0:va;return s.test(ti(n))}function xy(n){return At(n)&&sr(n)==Me}function Iy(n){return At(n)&&er(n)==xe}function Py(n){return At(n)&&Mo(n.length)&&!!ct[sr(n)]}function Yf(n){return typeof n=="function"?n:n==null?_r:typeof n=="object"?Te(n)?Zf(n[0],n[1]):Qf(n):vh(n)}function ec(n){if(!is(n))return R0(n);var s=[];for(var c in lt(n))st.call(n,c)&&c!="constructor"&&s.push(c);return s}function Ay(n){if(!Et(n))return l_(n);var s=is(n),c=[];for(var h in n)h=="constructor"&&(s||!st.call(n,h))||c.push(h);return c}function tc(n,s){return n<s}function Xf(n,s){var c=-1,h=gr(n)?H(n.length):[];return $n(n,function(y,b,I){h[++c]=s(y,b,I)}),h}function Qf(n){var s=yc(n);return s.length==1&&s[0][2]?Tl(s[0][0],s[0][1]):function(c){return c===n||Za(c,n,s)}}function Zf(n,s){return vc(n)&&Rl(s)?Tl(Xr(n),s):function(c){var h=Pc(c,n);return h===t&&h===s?Ac(c,n):ts(s,h,C|q)}}function So(n,s,c,h,y){n!==s&&Ja(s,function(b,I){if(y||(y=new Hr),Et(b))Cy(n,s,I,c,So,h,y);else{var $=h?h(mc(n,I),b,I+"",n,s,y):t;$===t&&($=b),ka(n,I,$)}},yr)}function Cy(n,s,c,h,y,b,I){var $=mc(n,c),M=mc(s,c),Q=I.get(M);if(Q){ka(n,c,Q);return}var Z=b?b($,M,c+"",n,s,I):t,ne=Z===t;if(ne){var ue=Te(M),ye=!ue&&Ln(M),Ee=!ue&&!ye&&Ri(M);Z=M,ue||ye||Ee?Te($)?Z=$:$t($)?Z=pr($):ye?(ne=!1,Z=ll(M,!0)):Ee?(ne=!1,Z=hl(M,!0)):Z=[]:os(M)||ri(M)?(Z=$,ri($)?Z=ch($):(!Et($)||pn($))&&(Z=Cl(M))):ne=!1}ne&&(I.set(M,Z),y(Z,M,h,b,I),I.delete(M)),ka(n,c,Z)}function el(n,s){var c=n.length;if(c)return s+=s<0?c:0,dn(s,c)?n[s]:t}function tl(n,s,c){s.length?s=mt(s,function(b){return Te(b)?function(I){return Zn(I,b.length===1?b[0]:b)}:b}):s=[_r];var h=-1;s=mt(s,wr(be()));var y=Xf(n,function(b,I,$){var M=mt(s,function(Q){return Q(b)});return{criteria:M,index:++h,value:b}});return n0(y,function(b,I){return Hy(b,I,c)})}function Ry(n,s){return rl(n,s,function(c,h){return Ac(n,h)})}function rl(n,s,c){for(var h=-1,y=s.length,b={};++h<y;){var I=s[h],$=Zn(n,I);c($,I)&&rs(b,jn(I,n),$)}return b}function Ty(n){return function(s){return Zn(s,n)}}function rc(n,s,c,h){var y=h?r0:mi,b=-1,I=s.length,$=n;for(n===s&&(s=pr(s)),c&&($=mt(n,wr(c)));++b<I;)for(var M=0,Q=s[b],Z=c?c(Q):Q;(M=y($,Z,M,h))>-1;)$!==n&&ho.call($,M,1),ho.call(n,M,1);return n}function nl(n,s){for(var c=n?s.length:0,h=c-1;c--;){var y=s[c];if(c==h||y!==b){var b=y;dn(y)?ho.call(n,y,1):oc(n,y)}}return n}function nc(n,s){return n+yo(Lf()*(s-n+1))}function $y(n,s,c,h){for(var y=-1,b=Gt(go((s-n)/(c||1)),0),I=H(b);b--;)I[h?b:++y]=n,n+=c;return I}function ic(n,s){var c="";if(!n||s<1||s>V)return c;do s%2&&(c+=n),s=yo(s/2),s&&(n+=n);while(s);return c}function Ke(n,s){return wc($l(n,s,_r),n+"")}function Ny(n){return Bf(Ti(n))}function jy(n,s){var c=Ti(n);return $o(c,Qn(s,0,c.length))}function rs(n,s,c,h){if(!Et(n))return n;s=jn(s,n);for(var y=-1,b=s.length,I=b-1,$=n;$!=null&&++y<b;){var M=Xr(s[y]),Q=c;if(M==="__proto__"||M==="constructor"||M==="prototype")return n;if(y!=I){var Z=$[M];Q=h?h(Z,M,$):t,Q===t&&(Q=Et(Z)?Z:dn(s[y+1])?[]:{})}Qi($,M,Q),$=$[M]}return n}var il=_o?function(n,s){return _o.set(n,s),n}:_r,Fy=po?function(n,s){return po(n,"toString",{configurable:!0,enumerable:!1,value:Rc(s),writable:!0})}:_r;function Ly(n){return $o(Ti(n))}function Nr(n,s,c){var h=-1,y=n.length;s<0&&(s=-s>y?0:y+s),c=c>y?y:c,c<0&&(c+=y),y=s>c?0:c-s>>>0,s>>>=0;for(var b=H(y);++h<y;)b[h]=n[h+s];return b}function Uy(n,s){var c;return $n(n,function(h,y,b){return c=s(h,y,b),!c}),!!c}function Do(n,s,c){var h=0,y=n==null?h:n.length;if(typeof s=="number"&&s===s&&y<=oe){for(;h<y;){var b=h+y>>>1,I=n[b];I!==null&&!Sr(I)&&(c?I<=s:I<s)?h=b+1:y=b}return y}return sc(n,s,_r,c)}function sc(n,s,c,h){var y=0,b=n==null?0:n.length;if(b===0)return 0;s=c(s);for(var I=s!==s,$=s===null,M=Sr(s),Q=s===t;y<b;){var Z=yo((y+b)/2),ne=c(n[Z]),ue=ne!==t,ye=ne===null,Ee=ne===ne,qe=Sr(ne);if(I)var Se=h||Ee;else Q?Se=Ee&&(h||ue):$?Se=Ee&&ue&&(h||!ye):M?Se=Ee&&ue&&!ye&&(h||!qe):ye||qe?Se=!1:Se=h?ne<=s:ne<s;Se?y=Z+1:b=Z}return Zt(b,me)}function sl(n,s){for(var c=-1,h=n.length,y=0,b=[];++c<h;){var I=n[c],$=s?s(I):I;if(!c||!Kr($,M)){var M=$;b[y++]=I===0?0:I}}return b}function ol(n){return typeof n=="number"?n:Sr(n)?Y:+n}function Er(n){if(typeof n=="string")return n;if(Te(n))return mt(n,Er)+"";if(Sr(n))return Uf?Uf.call(n):"";var s=n+"";return s=="0"&&1/n==-X?"-0":s}function Nn(n,s,c){var h=-1,y=ro,b=n.length,I=!0,$=[],M=$;if(c)I=!1,y=Na;else if(b>=o){var Q=s?null:Jy(n);if(Q)return io(Q);I=!1,y=Gi,M=new Xn}else M=s?[]:$;e:for(;++h<b;){var Z=n[h],ne=s?s(Z):Z;if(Z=c||Z!==0?Z:0,I&&ne===ne){for(var ue=M.length;ue--;)if(M[ue]===ne)continue e;s&&M.push(ne),$.push(Z)}else y(M,ne,c)||(M!==$&&M.push(ne),$.push(Z))}return $}function oc(n,s){return s=jn(s,n),n=Nl(n,s),n==null||delete n[Xr(jr(s))]}function al(n,s,c,h){return rs(n,s,c(Zn(n,s)),h)}function Oo(n,s,c,h){for(var y=n.length,b=h?y:-1;(h?b--:++b<y)&&s(n[b],b,n););return c?Nr(n,h?0:b,h?b+1:y):Nr(n,h?b+1:0,h?y:b)}function cl(n,s){var c=n;return c instanceof Je&&(c=c.value()),ja(s,function(h,y){return y.func.apply(y.thisArg,Cn([h],y.args))},c)}function ac(n,s,c){var h=n.length;if(h<2)return h?Nn(n[0]):[];for(var y=-1,b=H(h);++y<h;)for(var I=n[y],$=-1;++$<h;)$!=y&&(b[y]=Zi(b[y]||I,n[$],s,c));return Nn(Yt(b,1),s,c)}function ul(n,s,c){for(var h=-1,y=n.length,b=s.length,I={};++h<y;){var $=h<b?s[h]:t;c(I,n[h],$)}return I}function cc(n){return $t(n)?n:[]}function uc(n){return typeof n=="function"?n:_r}function jn(n,s){return Te(n)?n:vc(n,s)?[n]:Ul(it(n))}var My=Ke;function Fn(n,s,c){var h=n.length;return c=c===t?h:c,!s&&c>=h?n:Nr(n,s,c)}var fl=x0||function(n){return Xe.clearTimeout(n)};function ll(n,s){if(s)return n.slice();var c=n.length,h=Tf?Tf(c):new n.constructor(c);return n.copy(h),h}function fc(n){var s=new n.constructor(n.byteLength);return new fo(s).set(new fo(n)),s}function By(n,s){var c=s?fc(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.byteLength)}function qy(n){var s=new n.constructor(n.source,Pr.exec(n));return s.lastIndex=n.lastIndex,s}function zy(n){return Xi?lt(Xi.call(n)):{}}function hl(n,s){var c=s?fc(n.buffer):n.buffer;return new n.constructor(c,n.byteOffset,n.length)}function dl(n,s){if(n!==s){var c=n!==t,h=n===null,y=n===n,b=Sr(n),I=s!==t,$=s===null,M=s===s,Q=Sr(s);if(!$&&!Q&&!b&&n>s||b&&I&&M&&!$&&!Q||h&&I&&M||!c&&M||!y)return 1;if(!h&&!b&&!Q&&n<s||Q&&c&&y&&!h&&!b||$&&c&&y||!I&&y||!M)return-1}return 0}function Hy(n,s,c){for(var h=-1,y=n.criteria,b=s.criteria,I=y.length,$=c.length;++h<I;){var M=dl(y[h],b[h]);if(M){if(h>=$)return M;var Q=c[h];return M*(Q=="desc"?-1:1)}}return n.index-s.index}function pl(n,s,c,h){for(var y=-1,b=n.length,I=c.length,$=-1,M=s.length,Q=Gt(b-I,0),Z=H(M+Q),ne=!h;++$<M;)Z[$]=s[$];for(;++y<I;)(ne||y<b)&&(Z[c[y]]=n[y]);for(;Q--;)Z[$++]=n[y++];return Z}function gl(n,s,c,h){for(var y=-1,b=n.length,I=-1,$=c.length,M=-1,Q=s.length,Z=Gt(b-$,0),ne=H(Z+Q),ue=!h;++y<Z;)ne[y]=n[y];for(var ye=y;++M<Q;)ne[ye+M]=s[M];for(;++I<$;)(ue||y<b)&&(ne[ye+c[I]]=n[y++]);return ne}function pr(n,s){var c=-1,h=n.length;for(s||(s=H(h));++c<h;)s[c]=n[c];return s}function Yr(n,s,c,h){var y=!c;c||(c={});for(var b=-1,I=s.length;++b<I;){var $=s[b],M=h?h(c[$],n[$],$,c,n):t;M===t&&(M=n[$]),y?fn(c,$,M):Qi(c,$,M)}return c}function Ky(n,s){return Yr(n,_c(n),s)}function Vy(n,s){return Yr(n,Pl(n),s)}function xo(n,s){return function(c,h){var y=Te(c)?Yg:dy,b=s?s():{};return y(c,n,be(h,2),b)}}function Pi(n){return Ke(function(s,c){var h=-1,y=c.length,b=y>1?c[y-1]:t,I=y>2?c[2]:t;for(b=n.length>3&&typeof b=="function"?(y--,b):t,I&&or(c[0],c[1],I)&&(b=y<3?t:b,y=1),s=lt(s);++h<y;){var $=c[h];$&&n(s,$,h,b)}return s})}function yl(n,s){return function(c,h){if(c==null)return c;if(!gr(c))return n(c,h);for(var y=c.length,b=s?y:-1,I=lt(c);(s?b--:++b<y)&&h(I[b],b,I)!==!1;);return c}}function _l(n){return function(s,c,h){for(var y=-1,b=lt(s),I=h(s),$=I.length;$--;){var M=I[n?$:++y];if(c(b[M],M,b)===!1)break}return s}}function Gy(n,s,c){var h=s&K,y=ns(n);function b(){var I=this&&this!==Xe&&this instanceof b?y:n;return I.apply(h?c:this,arguments)}return b}function vl(n){return function(s){s=it(s);var c=wi(s)?zr(s):t,h=c?c[0]:s.charAt(0),y=c?Fn(c,1).join(""):s.slice(1);return h[n]()+y}}function Ai(n){return function(s){return ja(yh(gh(s).replace(Ki,"")),n,"")}}function ns(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var c=Ii(n.prototype),h=n.apply(c,s);return Et(h)?h:c}}function ky(n,s,c){var h=ns(n);function y(){for(var b=arguments.length,I=H(b),$=b,M=Ci(y);$--;)I[$]=arguments[$];var Q=b<3&&I[0]!==M&&I[b-1]!==M?[]:Rn(I,M);if(b-=Q.length,b<c)return Sl(n,s,Io,y.placeholder,t,I,Q,t,t,c-b);var Z=this&&this!==Xe&&this instanceof y?h:n;return kt(Z,this,I)}return y}function bl(n){return function(s,c,h){var y=lt(s);if(!gr(s)){var b=be(c,3);s=Wt(s),c=function($){return b(y[$],$,y)}}var I=n(s,c,h);return I>-1?y[b?s[I]:I]:t}}function ml(n){return hn(function(s){var c=s.length,h=c,y=Tr.prototype.thru;for(n&&s.reverse();h--;){var b=s[h];if(typeof b!="function")throw new Rr(u);if(y&&!I&&Ro(b)=="wrapper")var I=new Tr([],!0)}for(h=I?h:c;++h<c;){b=s[h];var $=Ro(b),M=$=="wrapper"?gc(b):t;M&&bc(M[0])&&M[1]==(l|L|T|m)&&!M[4].length&&M[9]==1?I=I[Ro(M[0])].apply(I,M[3]):I=b.length==1&&bc(b)?I[$]():I.thru(b)}return function(){var Q=arguments,Z=Q[0];if(I&&Q.length==1&&Te(Z))return I.plant(Z).value();for(var ne=0,ue=c?s[ne].apply(this,Q):Z;++ne<c;)ue=s[ne].call(this,ue);return ue}})}function Io(n,s,c,h,y,b,I,$,M,Q){var Z=s&l,ne=s&K,ue=s&ie,ye=s&(L|x),Ee=s&k,qe=ue?t:ns(n);function Se(){for(var ke=arguments.length,Qe=H(ke),Dr=ke;Dr--;)Qe[Dr]=arguments[Dr];if(ye)var ar=Ci(Se),Or=s0(Qe,ar);if(h&&(Qe=pl(Qe,h,y,ye)),b&&(Qe=gl(Qe,b,I,ye)),ke-=Or,ye&&ke<Q){var Nt=Rn(Qe,ar);return Sl(n,s,Io,Se.placeholder,c,Qe,Nt,$,M,Q-ke)}var Vr=ne?c:this,yn=ue?Vr[n]:n;return ke=Qe.length,$?Qe=d_(Qe,$):Ee&&ke>1&&Qe.reverse(),Z&&M<ke&&(Qe.length=M),this&&this!==Xe&&this instanceof Se&&(yn=qe||ns(yn)),yn.apply(Vr,Qe)}return Se}function wl(n,s){return function(c,h){return wy(c,n,s(h),{})}}function Po(n,s){return function(c,h){var y;if(c===t&&h===t)return s;if(c!==t&&(y=c),h!==t){if(y===t)return h;typeof c=="string"||typeof h=="string"?(c=Er(c),h=Er(h)):(c=ol(c),h=ol(h)),y=n(c,h)}return y}}function lc(n){return hn(function(s){return s=mt(s,wr(be())),Ke(function(c){var h=this;return n(s,function(y){return kt(y,h,c)})})})}function Ao(n,s){s=s===t?" ":Er(s);var c=s.length;if(c<2)return c?ic(s,n):s;var h=ic(s,go(n/Ei(s)));return wi(s)?Fn(zr(h),0,n).join(""):h.slice(0,n)}function Wy(n,s,c,h){var y=s&K,b=ns(n);function I(){for(var $=-1,M=arguments.length,Q=-1,Z=h.length,ne=H(Z+M),ue=this&&this!==Xe&&this instanceof I?b:n;++Q<Z;)ne[Q]=h[Q];for(;M--;)ne[Q++]=arguments[++$];return kt(ue,y?c:this,ne)}return I}function El(n){return function(s,c,h){return h&&typeof h!="number"&&or(s,c,h)&&(c=h=t),s=gn(s),c===t?(c=s,s=0):c=gn(c),h=h===t?s<c?1:-1:gn(h),$y(s,c,h,n)}}function Co(n){return function(s,c){return typeof s=="string"&&typeof c=="string"||(s=Fr(s),c=Fr(c)),n(s,c)}}function Sl(n,s,c,h,y,b,I,$,M,Q){var Z=s&L,ne=Z?I:t,ue=Z?t:I,ye=Z?b:t,Ee=Z?t:b;s|=Z?T:E,s&=~(Z?E:T),s&N||(s&=~(K|ie));var qe=[n,s,y,ye,ne,Ee,ue,$,M,Q],Se=c.apply(t,qe);return bc(n)&&jl(Se,qe),Se.placeholder=h,Fl(Se,n,s)}function hc(n){var s=Vt[n];return function(c,h){if(c=Fr(c),h=h==null?0:Zt(Ue(h),292),h&&Ff(c)){var y=(it(c)+"e").split("e"),b=s(y[0]+"e"+(+y[1]+h));return y=(it(b)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return s(c)}}var Jy=Oi&&1/io(new Oi([,-0]))[1]==X?function(n){return new Oi(n)}:Nc;function Dl(n){return function(s){var c=er(s);return c==Oe?za(s):c==xe?h0(s):i0(s,n(s))}}function ln(n,s,c,h,y,b,I,$){var M=s&ie;if(!M&&typeof n!="function")throw new Rr(u);var Q=h?h.length:0;if(Q||(s&=~(T|E),h=y=t),I=I===t?I:Gt(Ue(I),0),$=$===t?$:Ue($),Q-=y?y.length:0,s&E){var Z=h,ne=y;h=y=t}var ue=M?t:gc(n),ye=[n,s,c,h,y,Z,ne,b,I,$];if(ue&&f_(ye,ue),n=ye[0],s=ye[1],c=ye[2],h=ye[3],y=ye[4],$=ye[9]=ye[9]===t?M?0:n.length:Gt(ye[9]-Q,0),!$&&s&(L|x)&&(s&=~(L|x)),!s||s==K)var Ee=Gy(n,s,c);else s==L||s==x?Ee=ky(n,s,$):(s==T||s==(K|T))&&!y.length?Ee=Wy(n,s,c,h):Ee=Io.apply(t,ye);var qe=ue?il:jl;return Fl(qe(Ee,ye),n,s)}function Ol(n,s,c,h){return n===t||Kr(n,Di[c])&&!st.call(h,c)?s:n}function xl(n,s,c,h,y,b){return Et(n)&&Et(s)&&(b.set(s,n),So(n,s,t,xl,b),b.delete(s)),n}function Yy(n){return os(n)?t:n}function Il(n,s,c,h,y,b){var I=c&C,$=n.length,M=s.length;if($!=M&&!(I&&M>$))return!1;var Q=b.get(n),Z=b.get(s);if(Q&&Z)return Q==s&&Z==n;var ne=-1,ue=!0,ye=c&q?new Xn:t;for(b.set(n,s),b.set(s,n);++ne<$;){var Ee=n[ne],qe=s[ne];if(h)var Se=I?h(qe,Ee,ne,s,n,b):h(Ee,qe,ne,n,s,b);if(Se!==t){if(Se)continue;ue=!1;break}if(ye){if(!Fa(s,function(ke,Qe){if(!Gi(ye,Qe)&&(Ee===ke||y(Ee,ke,c,h,b)))return ye.push(Qe)})){ue=!1;break}}else if(!(Ee===qe||y(Ee,qe,c,h,b))){ue=!1;break}}return b.delete(n),b.delete(s),ue}function Xy(n,s,c,h,y,b,I){switch(c){case Ae:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case De:return!(n.byteLength!=s.byteLength||!b(new fo(n),new fo(s)));case B:case j:case ze:return Kr(+n,+s);case R:return n.name==s.name&&n.message==s.message;case Me:case $e:return n==s+"";case Oe:var $=za;case xe:var M=h&C;if($||($=io),n.size!=s.size&&!M)return!1;var Q=I.get(n);if(Q)return Q==s;h|=q,I.set(n,s);var Z=Il($(n),$(s),h,y,b,I);return I.delete(n),Z;case Ne:if(Xi)return Xi.call(n)==Xi.call(s)}return!1}function Qy(n,s,c,h,y,b){var I=c&C,$=dc(n),M=$.length,Q=dc(s),Z=Q.length;if(M!=Z&&!I)return!1;for(var ne=M;ne--;){var ue=$[ne];if(!(I?ue in s:st.call(s,ue)))return!1}var ye=b.get(n),Ee=b.get(s);if(ye&&Ee)return ye==s&&Ee==n;var qe=!0;b.set(n,s),b.set(s,n);for(var Se=I;++ne<M;){ue=$[ne];var ke=n[ue],Qe=s[ue];if(h)var Dr=I?h(Qe,ke,ue,s,n,b):h(ke,Qe,ue,n,s,b);if(!(Dr===t?ke===Qe||y(ke,Qe,c,h,b):Dr)){qe=!1;break}Se||(Se=ue=="constructor")}if(qe&&!Se){var ar=n.constructor,Or=s.constructor;ar!=Or&&"constructor"in n&&"constructor"in s&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(qe=!1)}return b.delete(n),b.delete(s),qe}function hn(n){return wc($l(n,t,zl),n+"")}function dc(n){return kf(n,Wt,_c)}function pc(n){return kf(n,yr,Pl)}var gc=_o?function(n){return _o.get(n)}:Nc;function Ro(n){for(var s=n.name+"",c=xi[s],h=st.call(xi,s)?c.length:0;h--;){var y=c[h],b=y.func;if(b==null||b==n)return y.name}return s}function Ci(n){var s=st.call(v,"placeholder")?v:n;return s.placeholder}function be(){var n=v.iteratee||Tc;return n=n===Tc?Yf:n,arguments.length?n(arguments[0],arguments[1]):n}function To(n,s){var c=n.__data__;return o_(s)?c[typeof s=="string"?"string":"hash"]:c.map}function yc(n){for(var s=Wt(n),c=s.length;c--;){var h=s[c],y=n[h];s[c]=[h,y,Rl(y)]}return s}function ei(n,s){var c=u0(n,s);return Jf(c)?c:t}function Zy(n){var s=st.call(n,Jn),c=n[Jn];try{n[Jn]=t;var h=!0}catch{}var y=co.call(n);return h&&(s?n[Jn]=c:delete n[Jn]),y}var _c=Ka?function(n){return n==null?[]:(n=lt(n),An(Ka(n),function(s){return Nf.call(n,s)}))}:jc,Pl=Ka?function(n){for(var s=[];n;)Cn(s,_c(n)),n=lo(n);return s}:jc,er=sr;(Va&&er(new Va(new ArrayBuffer(1)))!=Ae||Wi&&er(new Wi)!=Oe||Ga&&er(Ga.resolve())!=yt||Oi&&er(new Oi)!=xe||Ji&&er(new Ji)!=Pe)&&(er=function(n){var s=sr(n),c=s==Le?n.constructor:t,h=c?ti(c):"";if(h)switch(h){case j0:return Ae;case F0:return Oe;case L0:return yt;case U0:return xe;case M0:return Pe}return s});function e_(n,s,c){for(var h=-1,y=c.length;++h<y;){var b=c[h],I=b.size;switch(b.type){case"drop":n+=I;break;case"dropRight":s-=I;break;case"take":s=Zt(s,n+I);break;case"takeRight":n=Gt(n,s-I);break}}return{start:n,end:s}}function t_(n){var s=n.match(ht);return s?s[1].split(Bt):[]}function Al(n,s,c){s=jn(s,n);for(var h=-1,y=s.length,b=!1;++h<y;){var I=Xr(s[h]);if(!(b=n!=null&&c(n,I)))break;n=n[I]}return b||++h!=y?b:(y=n==null?0:n.length,!!y&&Mo(y)&&dn(I,y)&&(Te(n)||ri(n)))}function r_(n){var s=n.length,c=new n.constructor(s);return s&&typeof n[0]=="string"&&st.call(n,"index")&&(c.index=n.index,c.input=n.input),c}function Cl(n){return typeof n.constructor=="function"&&!is(n)?Ii(lo(n)):{}}function n_(n,s,c){var h=n.constructor;switch(s){case De:return fc(n);case B:case j:return new h(+n);case Ae:return By(n,c);case He:case Ie:case Ge:case We:case et:case tt:case Ye:case rr:case hr:return hl(n,c);case Oe:return new h;case ze:case $e:return new h(n);case Me:return qy(n);case xe:return new h;case Ne:return zy(n)}}function i_(n,s){var c=s.length;if(!c)return n;var h=c-1;return s[h]=(c>1?"& ":"")+s[h],s=s.join(c>2?", ":" "),n.replace(Pt,`{
/* [wrapped with `+s+`] */
`)}function s_(n){return Te(n)||ri(n)||!!(jf&&n&&n[jf])}function dn(n,s){var c=typeof n;return s=s??V,!!s&&(c=="number"||c!="symbol"&&ma.test(n))&&n>-1&&n%1==0&&n<s}function or(n,s,c){if(!Et(c))return!1;var h=typeof s;return(h=="number"?gr(c)&&dn(s,c.length):h=="string"&&s in c)?Kr(c[s],n):!1}function vc(n,s){if(Te(n))return!1;var c=typeof n;return c=="number"||c=="symbol"||c=="boolean"||n==null||Sr(n)?!0:Lt.test(n)||!bt.test(n)||s!=null&&n in lt(s)}function o_(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}function bc(n){var s=Ro(n),c=v[s];if(typeof c!="function"||!(s in Je.prototype))return!1;if(n===c)return!0;var h=gc(c);return!!h&&n===h[0]}function a_(n){return!!Rf&&Rf in n}var c_=oo?pn:Fc;function is(n){var s=n&&n.constructor,c=typeof s=="function"&&s.prototype||Di;return n===c}function Rl(n){return n===n&&!Et(n)}function Tl(n,s){return function(c){return c==null?!1:c[n]===s&&(s!==t||n in lt(c))}}function u_(n){var s=Lo(n,function(h){return c.size===d&&c.clear(),h}),c=s.cache;return s}function f_(n,s){var c=n[1],h=s[1],y=c|h,b=y<(K|ie|l),I=h==l&&c==L||h==l&&c==m&&n[7].length<=s[8]||h==(l|m)&&s[7].length<=s[8]&&c==L;if(!(b||I))return n;h&K&&(n[2]=s[2],y|=c&K?0:N);var $=s[3];if($){var M=n[3];n[3]=M?pl(M,$,s[4]):$,n[4]=M?Rn(n[3],_):s[4]}return $=s[5],$&&(M=n[5],n[5]=M?gl(M,$,s[6]):$,n[6]=M?Rn(n[5],_):s[6]),$=s[7],$&&(n[7]=$),h&l&&(n[8]=n[8]==null?s[8]:Zt(n[8],s[8])),n[9]==null&&(n[9]=s[9]),n[0]=s[0],n[1]=y,n}function l_(n){var s=[];if(n!=null)for(var c in lt(n))s.push(c);return s}function h_(n){return co.call(n)}function $l(n,s,c){return s=Gt(s===t?n.length-1:s,0),function(){for(var h=arguments,y=-1,b=Gt(h.length-s,0),I=H(b);++y<b;)I[y]=h[s+y];y=-1;for(var $=H(s+1);++y<s;)$[y]=h[y];return $[s]=c(I),kt(n,this,$)}}function Nl(n,s){return s.length<2?n:Zn(n,Nr(s,0,-1))}function d_(n,s){for(var c=n.length,h=Zt(s.length,c),y=pr(n);h--;){var b=s[h];n[h]=dn(b,c)?y[b]:t}return n}function mc(n,s){if(!(s==="constructor"&&typeof n[s]=="function")&&s!="__proto__")return n[s]}var jl=Ll(il),ss=P0||function(n,s){return Xe.setTimeout(n,s)},wc=Ll(Fy);function Fl(n,s,c){var h=s+"";return wc(n,i_(h,p_(t_(h),c)))}function Ll(n){var s=0,c=0;return function(){var h=T0(),y=de-(h-c);if(c=h,y>0){if(++s>=ce)return arguments[0]}else s=0;return n.apply(t,arguments)}}function $o(n,s){var c=-1,h=n.length,y=h-1;for(s=s===t?h:s;++c<s;){var b=nc(c,y),I=n[b];n[b]=n[c],n[c]=I}return n.length=s,n}var Ul=u_(function(n){var s=[];return n.charCodeAt(0)===46&&s.push(""),n.replace(Ut,function(c,h,y,b){s.push(y?b.replace(pa,"$1"):h||c)}),s});function Xr(n){if(typeof n=="string"||Sr(n))return n;var s=n+"";return s=="0"&&1/n==-X?"-0":s}function ti(n){if(n!=null){try{return ao.call(n)}catch{}try{return n+""}catch{}}return""}function p_(n,s){return Cr(we,function(c){var h="_."+c[0];s&c[1]&&!ro(n,h)&&n.push(h)}),n.sort()}function Ml(n){if(n instanceof Je)return n.clone();var s=new Tr(n.__wrapped__,n.__chain__);return s.__actions__=pr(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}function g_(n,s,c){(c?or(n,s,c):s===t)?s=1:s=Gt(Ue(s),0);var h=n==null?0:n.length;if(!h||s<1)return[];for(var y=0,b=0,I=H(go(h/s));y<h;)I[b++]=Nr(n,y,y+=s);return I}function y_(n){for(var s=-1,c=n==null?0:n.length,h=0,y=[];++s<c;){var b=n[s];b&&(y[h++]=b)}return y}function __(){var n=arguments.length;if(!n)return[];for(var s=H(n-1),c=arguments[0],h=n;h--;)s[h-1]=arguments[h];return Cn(Te(c)?pr(c):[c],Yt(s,1))}var v_=Ke(function(n,s){return $t(n)?Zi(n,Yt(s,1,$t,!0)):[]}),b_=Ke(function(n,s){var c=jr(s);return $t(c)&&(c=t),$t(n)?Zi(n,Yt(s,1,$t,!0),be(c,2)):[]}),m_=Ke(function(n,s){var c=jr(s);return $t(c)&&(c=t),$t(n)?Zi(n,Yt(s,1,$t,!0),t,c):[]});function w_(n,s,c){var h=n==null?0:n.length;return h?(s=c||s===t?1:Ue(s),Nr(n,s<0?0:s,h)):[]}function E_(n,s,c){var h=n==null?0:n.length;return h?(s=c||s===t?1:Ue(s),s=h-s,Nr(n,0,s<0?0:s)):[]}function S_(n,s){return n&&n.length?Oo(n,be(s,3),!0,!0):[]}function D_(n,s){return n&&n.length?Oo(n,be(s,3),!0):[]}function O_(n,s,c,h){var y=n==null?0:n.length;return y?(c&&typeof c!="number"&&or(n,s,c)&&(c=0,h=y),_y(n,s,c,h)):[]}function Bl(n,s,c){var h=n==null?0:n.length;if(!h)return-1;var y=c==null?0:Ue(c);return y<0&&(y=Gt(h+y,0)),no(n,be(s,3),y)}function ql(n,s,c){var h=n==null?0:n.length;if(!h)return-1;var y=h-1;return c!==t&&(y=Ue(c),y=c<0?Gt(h+y,0):Zt(y,h-1)),no(n,be(s,3),y,!0)}function zl(n){var s=n==null?0:n.length;return s?Yt(n,1):[]}function x_(n){var s=n==null?0:n.length;return s?Yt(n,X):[]}function I_(n,s){var c=n==null?0:n.length;return c?(s=s===t?1:Ue(s),Yt(n,s)):[]}function P_(n){for(var s=-1,c=n==null?0:n.length,h={};++s<c;){var y=n[s];h[y[0]]=y[1]}return h}function Hl(n){return n&&n.length?n[0]:t}function A_(n,s,c){var h=n==null?0:n.length;if(!h)return-1;var y=c==null?0:Ue(c);return y<0&&(y=Gt(h+y,0)),mi(n,s,y)}function C_(n){var s=n==null?0:n.length;return s?Nr(n,0,-1):[]}var R_=Ke(function(n){var s=mt(n,cc);return s.length&&s[0]===n[0]?Qa(s):[]}),T_=Ke(function(n){var s=jr(n),c=mt(n,cc);return s===jr(c)?s=t:c.pop(),c.length&&c[0]===n[0]?Qa(c,be(s,2)):[]}),$_=Ke(function(n){var s=jr(n),c=mt(n,cc);return s=typeof s=="function"?s:t,s&&c.pop(),c.length&&c[0]===n[0]?Qa(c,t,s):[]});function N_(n,s){return n==null?"":C0.call(n,s)}function jr(n){var s=n==null?0:n.length;return s?n[s-1]:t}function j_(n,s,c){var h=n==null?0:n.length;if(!h)return-1;var y=h;return c!==t&&(y=Ue(c),y=y<0?Gt(h+y,0):Zt(y,h-1)),s===s?p0(n,s,y):no(n,Sf,y,!0)}function F_(n,s){return n&&n.length?el(n,Ue(s)):t}var L_=Ke(Kl);function Kl(n,s){return n&&n.length&&s&&s.length?rc(n,s):n}function U_(n,s,c){return n&&n.length&&s&&s.length?rc(n,s,be(c,2)):n}function M_(n,s,c){return n&&n.length&&s&&s.length?rc(n,s,t,c):n}var B_=hn(function(n,s){var c=n==null?0:n.length,h=Wa(n,s);return nl(n,mt(s,function(y){return dn(y,c)?+y:y}).sort(dl)),h});function q_(n,s){var c=[];if(!(n&&n.length))return c;var h=-1,y=[],b=n.length;for(s=be(s,3);++h<b;){var I=n[h];s(I,h,n)&&(c.push(I),y.push(h))}return nl(n,y),c}function Ec(n){return n==null?n:N0.call(n)}function z_(n,s,c){var h=n==null?0:n.length;return h?(c&&typeof c!="number"&&or(n,s,c)?(s=0,c=h):(s=s==null?0:Ue(s),c=c===t?h:Ue(c)),Nr(n,s,c)):[]}function H_(n,s){return Do(n,s)}function K_(n,s,c){return sc(n,s,be(c,2))}function V_(n,s){var c=n==null?0:n.length;if(c){var h=Do(n,s);if(h<c&&Kr(n[h],s))return h}return-1}function G_(n,s){return Do(n,s,!0)}function k_(n,s,c){return sc(n,s,be(c,2),!0)}function W_(n,s){var c=n==null?0:n.length;if(c){var h=Do(n,s,!0)-1;if(Kr(n[h],s))return h}return-1}function J_(n){return n&&n.length?sl(n):[]}function Y_(n,s){return n&&n.length?sl(n,be(s,2)):[]}function X_(n){var s=n==null?0:n.length;return s?Nr(n,1,s):[]}function Q_(n,s,c){return n&&n.length?(s=c||s===t?1:Ue(s),Nr(n,0,s<0?0:s)):[]}function Z_(n,s,c){var h=n==null?0:n.length;return h?(s=c||s===t?1:Ue(s),s=h-s,Nr(n,s<0?0:s,h)):[]}function ev(n,s){return n&&n.length?Oo(n,be(s,3),!1,!0):[]}function tv(n,s){return n&&n.length?Oo(n,be(s,3)):[]}var rv=Ke(function(n){return Nn(Yt(n,1,$t,!0))}),nv=Ke(function(n){var s=jr(n);return $t(s)&&(s=t),Nn(Yt(n,1,$t,!0),be(s,2))}),iv=Ke(function(n){var s=jr(n);return s=typeof s=="function"?s:t,Nn(Yt(n,1,$t,!0),t,s)});function sv(n){return n&&n.length?Nn(n):[]}function ov(n,s){return n&&n.length?Nn(n,be(s,2)):[]}function av(n,s){return s=typeof s=="function"?s:t,n&&n.length?Nn(n,t,s):[]}function Sc(n){if(!(n&&n.length))return[];var s=0;return n=An(n,function(c){if($t(c))return s=Gt(c.length,s),!0}),Ba(s,function(c){return mt(n,La(c))})}function Vl(n,s){if(!(n&&n.length))return[];var c=Sc(n);return s==null?c:mt(c,function(h){return kt(s,t,h)})}var cv=Ke(function(n,s){return $t(n)?Zi(n,s):[]}),uv=Ke(function(n){return ac(An(n,$t))}),fv=Ke(function(n){var s=jr(n);return $t(s)&&(s=t),ac(An(n,$t),be(s,2))}),lv=Ke(function(n){var s=jr(n);return s=typeof s=="function"?s:t,ac(An(n,$t),t,s)}),hv=Ke(Sc);function dv(n,s){return ul(n||[],s||[],Qi)}function pv(n,s){return ul(n||[],s||[],rs)}var gv=Ke(function(n){var s=n.length,c=s>1?n[s-1]:t;return c=typeof c=="function"?(n.pop(),c):t,Vl(n,c)});function Gl(n){var s=v(n);return s.__chain__=!0,s}function yv(n,s){return s(n),n}function No(n,s){return s(n)}var _v=hn(function(n){var s=n.length,c=s?n[0]:0,h=this.__wrapped__,y=function(b){return Wa(b,n)};return s>1||this.__actions__.length||!(h instanceof Je)||!dn(c)?this.thru(y):(h=h.slice(c,+c+(s?1:0)),h.__actions__.push({func:No,args:[y],thisArg:t}),new Tr(h,this.__chain__).thru(function(b){return s&&!b.length&&b.push(t),b}))});function vv(){return Gl(this)}function bv(){return new Tr(this.value(),this.__chain__)}function mv(){this.__values__===t&&(this.__values__=oh(this.value()));var n=this.__index__>=this.__values__.length,s=n?t:this.__values__[this.__index__++];return{done:n,value:s}}function wv(){return this}function Ev(n){for(var s,c=this;c instanceof bo;){var h=Ml(c);h.__index__=0,h.__values__=t,s?y.__wrapped__=h:s=h;var y=h;c=c.__wrapped__}return y.__wrapped__=n,s}function Sv(){var n=this.__wrapped__;if(n instanceof Je){var s=n;return this.__actions__.length&&(s=new Je(this)),s=s.reverse(),s.__actions__.push({func:No,args:[Ec],thisArg:t}),new Tr(s,this.__chain__)}return this.thru(Ec)}function Dv(){return cl(this.__wrapped__,this.__actions__)}var Ov=xo(function(n,s,c){st.call(n,c)?++n[c]:fn(n,c,1)});function xv(n,s,c){var h=Te(n)?wf:yy;return c&&or(n,s,c)&&(s=t),h(n,be(s,3))}function Iv(n,s){var c=Te(n)?An:Vf;return c(n,be(s,3))}var Pv=bl(Bl),Av=bl(ql);function Cv(n,s){return Yt(jo(n,s),1)}function Rv(n,s){return Yt(jo(n,s),X)}function Tv(n,s,c){return c=c===t?1:Ue(c),Yt(jo(n,s),c)}function kl(n,s){var c=Te(n)?Cr:$n;return c(n,be(s,3))}function Wl(n,s){var c=Te(n)?Xg:Kf;return c(n,be(s,3))}var $v=xo(function(n,s,c){st.call(n,c)?n[c].push(s):fn(n,c,[s])});function Nv(n,s,c,h){n=gr(n)?n:Ti(n),c=c&&!h?Ue(c):0;var y=n.length;return c<0&&(c=Gt(y+c,0)),Bo(n)?c<=y&&n.indexOf(s,c)>-1:!!y&&mi(n,s,c)>-1}var jv=Ke(function(n,s,c){var h=-1,y=typeof s=="function",b=gr(n)?H(n.length):[];return $n(n,function(I){b[++h]=y?kt(s,I,c):es(I,s,c)}),b}),Fv=xo(function(n,s,c){fn(n,c,s)});function jo(n,s){var c=Te(n)?mt:Xf;return c(n,be(s,3))}function Lv(n,s,c,h){return n==null?[]:(Te(s)||(s=s==null?[]:[s]),c=h?t:c,Te(c)||(c=c==null?[]:[c]),tl(n,s,c))}var Uv=xo(function(n,s,c){n[c?0:1].push(s)},function(){return[[],[]]});function Mv(n,s,c){var h=Te(n)?ja:Of,y=arguments.length<3;return h(n,be(s,4),c,y,$n)}function Bv(n,s,c){var h=Te(n)?Qg:Of,y=arguments.length<3;return h(n,be(s,4),c,y,Kf)}function qv(n,s){var c=Te(n)?An:Vf;return c(n,Uo(be(s,3)))}function zv(n){var s=Te(n)?Bf:Ny;return s(n)}function Hv(n,s,c){(c?or(n,s,c):s===t)?s=1:s=Ue(s);var h=Te(n)?ly:jy;return h(n,s)}function Kv(n){var s=Te(n)?hy:Ly;return s(n)}function Vv(n){if(n==null)return 0;if(gr(n))return Bo(n)?Ei(n):n.length;var s=er(n);return s==Oe||s==xe?n.size:ec(n).length}function Gv(n,s,c){var h=Te(n)?Fa:Uy;return c&&or(n,s,c)&&(s=t),h(n,be(s,3))}var kv=Ke(function(n,s){if(n==null)return[];var c=s.length;return c>1&&or(n,s[0],s[1])?s=[]:c>2&&or(s[0],s[1],s[2])&&(s=[s[0]]),tl(n,Yt(s,1),[])}),Fo=I0||function(){return Xe.Date.now()};function Wv(n,s){if(typeof s!="function")throw new Rr(u);return n=Ue(n),function(){if(--n<1)return s.apply(this,arguments)}}function Jl(n,s,c){return s=c?t:s,s=n&&s==null?n.length:s,ln(n,l,t,t,t,t,s)}function Yl(n,s){var c;if(typeof s!="function")throw new Rr(u);return n=Ue(n),function(){return--n>0&&(c=s.apply(this,arguments)),n<=1&&(s=t),c}}var Dc=Ke(function(n,s,c){var h=K;if(c.length){var y=Rn(c,Ci(Dc));h|=T}return ln(n,h,s,c,y)}),Xl=Ke(function(n,s,c){var h=K|ie;if(c.length){var y=Rn(c,Ci(Xl));h|=T}return ln(s,h,n,c,y)});function Ql(n,s,c){s=c?t:s;var h=ln(n,L,t,t,t,t,t,s);return h.placeholder=Ql.placeholder,h}function Zl(n,s,c){s=c?t:s;var h=ln(n,x,t,t,t,t,t,s);return h.placeholder=Zl.placeholder,h}function eh(n,s,c){var h,y,b,I,$,M,Q=0,Z=!1,ne=!1,ue=!0;if(typeof n!="function")throw new Rr(u);s=Fr(s)||0,Et(c)&&(Z=!!c.leading,ne="maxWait"in c,b=ne?Gt(Fr(c.maxWait)||0,s):b,ue="trailing"in c?!!c.trailing:ue);function ye(Nt){var Vr=h,yn=y;return h=y=t,Q=Nt,I=n.apply(yn,Vr),I}function Ee(Nt){return Q=Nt,$=ss(ke,s),Z?ye(Nt):I}function qe(Nt){var Vr=Nt-M,yn=Nt-Q,bh=s-Vr;return ne?Zt(bh,b-yn):bh}function Se(Nt){var Vr=Nt-M,yn=Nt-Q;return M===t||Vr>=s||Vr<0||ne&&yn>=b}function ke(){var Nt=Fo();if(Se(Nt))return Qe(Nt);$=ss(ke,qe(Nt))}function Qe(Nt){return $=t,ue&&h?ye(Nt):(h=y=t,I)}function Dr(){$!==t&&fl($),Q=0,h=M=y=$=t}function ar(){return $===t?I:Qe(Fo())}function Or(){var Nt=Fo(),Vr=Se(Nt);if(h=arguments,y=this,M=Nt,Vr){if($===t)return Ee(M);if(ne)return fl($),$=ss(ke,s),ye(M)}return $===t&&($=ss(ke,s)),I}return Or.cancel=Dr,Or.flush=ar,Or}var Jv=Ke(function(n,s){return Hf(n,1,s)}),Yv=Ke(function(n,s,c){return Hf(n,Fr(s)||0,c)});function Xv(n){return ln(n,k)}function Lo(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new Rr(u);var c=function(){var h=arguments,y=s?s.apply(this,h):h[0],b=c.cache;if(b.has(y))return b.get(y);var I=n.apply(this,h);return c.cache=b.set(y,I)||b,I};return c.cache=new(Lo.Cache||un),c}Lo.Cache=un;function Uo(n){if(typeof n!="function")throw new Rr(u);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}function Qv(n){return Yl(2,n)}var Zv=My(function(n,s){s=s.length==1&&Te(s[0])?mt(s[0],wr(be())):mt(Yt(s,1),wr(be()));var c=s.length;return Ke(function(h){for(var y=-1,b=Zt(h.length,c);++y<b;)h[y]=s[y].call(this,h[y]);return kt(n,this,h)})}),Oc=Ke(function(n,s){var c=Rn(s,Ci(Oc));return ln(n,T,t,s,c)}),th=Ke(function(n,s){var c=Rn(s,Ci(th));return ln(n,E,t,s,c)}),e1=hn(function(n,s){return ln(n,m,t,t,t,s)});function t1(n,s){if(typeof n!="function")throw new Rr(u);return s=s===t?s:Ue(s),Ke(n,s)}function r1(n,s){if(typeof n!="function")throw new Rr(u);return s=s==null?0:Gt(Ue(s),0),Ke(function(c){var h=c[s],y=Fn(c,0,s);return h&&Cn(y,h),kt(n,this,y)})}function n1(n,s,c){var h=!0,y=!0;if(typeof n!="function")throw new Rr(u);return Et(c)&&(h="leading"in c?!!c.leading:h,y="trailing"in c?!!c.trailing:y),eh(n,s,{leading:h,maxWait:s,trailing:y})}function i1(n){return Jl(n,1)}function s1(n,s){return Oc(uc(s),n)}function o1(){if(!arguments.length)return[];var n=arguments[0];return Te(n)?n:[n]}function a1(n){return $r(n,P)}function c1(n,s){return s=typeof s=="function"?s:t,$r(n,P,s)}function u1(n){return $r(n,O|P)}function f1(n,s){return s=typeof s=="function"?s:t,$r(n,O|P,s)}function l1(n,s){return s==null||zf(n,s,Wt(s))}function Kr(n,s){return n===s||n!==n&&s!==s}var h1=Co(Xa),d1=Co(function(n,s){return n>=s}),ri=Wf(function(){return arguments}())?Wf:function(n){return At(n)&&st.call(n,"callee")&&!Nf.call(n,"callee")},Te=H.isArray,p1=ir?wr(ir):Ey;function gr(n){return n!=null&&Mo(n.length)&&!pn(n)}function $t(n){return At(n)&&gr(n)}function g1(n){return n===!0||n===!1||At(n)&&sr(n)==B}var Ln=A0||Fc,y1=qr?wr(qr):Sy;function _1(n){return At(n)&&n.nodeType===1&&!os(n)}function v1(n){if(n==null)return!0;if(gr(n)&&(Te(n)||typeof n=="string"||typeof n.splice=="function"||Ln(n)||Ri(n)||ri(n)))return!n.length;var s=er(n);if(s==Oe||s==xe)return!n.size;if(is(n))return!ec(n).length;for(var c in n)if(st.call(n,c))return!1;return!0}function b1(n,s){return ts(n,s)}function m1(n,s,c){c=typeof c=="function"?c:t;var h=c?c(n,s):t;return h===t?ts(n,s,t,c):!!h}function xc(n){if(!At(n))return!1;var s=sr(n);return s==R||s==p||typeof n.message=="string"&&typeof n.name=="string"&&!os(n)}function w1(n){return typeof n=="number"&&Ff(n)}function pn(n){if(!Et(n))return!1;var s=sr(n);return s==ae||s==he||s==z||s==_t}function rh(n){return typeof n=="number"&&n==Ue(n)}function Mo(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=V}function Et(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}function At(n){return n!=null&&typeof n=="object"}var nh=Ar?wr(Ar):Oy;function E1(n,s){return n===s||Za(n,s,yc(s))}function S1(n,s,c){return c=typeof c=="function"?c:t,Za(n,s,yc(s),c)}function D1(n){return ih(n)&&n!=+n}function O1(n){if(c_(n))throw new Ce(a);return Jf(n)}function x1(n){return n===null}function I1(n){return n==null}function ih(n){return typeof n=="number"||At(n)&&sr(n)==ze}function os(n){if(!At(n)||sr(n)!=Le)return!1;var s=lo(n);if(s===null)return!0;var c=st.call(s,"constructor")&&s.constructor;return typeof c=="function"&&c instanceof c&&ao.call(c)==S0}var Ic=Wr?wr(Wr):xy;function P1(n){return rh(n)&&n>=-V&&n<=V}var sh=Vi?wr(Vi):Iy;function Bo(n){return typeof n=="string"||!Te(n)&&At(n)&&sr(n)==$e}function Sr(n){return typeof n=="symbol"||At(n)&&sr(n)==Ne}var Ri=Wn?wr(Wn):Py;function A1(n){return n===t}function C1(n){return At(n)&&er(n)==Pe}function R1(n){return At(n)&&sr(n)==je}var T1=Co(tc),$1=Co(function(n,s){return n<=s});function oh(n){if(!n)return[];if(gr(n))return Bo(n)?zr(n):pr(n);if(ki&&n[ki])return l0(n[ki]());var s=er(n),c=s==Oe?za:s==xe?io:Ti;return c(n)}function gn(n){if(!n)return n===0?n:0;if(n=Fr(n),n===X||n===-X){var s=n<0?-1:1;return s*G}return n===n?n:0}function Ue(n){var s=gn(n),c=s%1;return s===s?c?s-c:s:0}function ah(n){return n?Qn(Ue(n),0,re):0}function Fr(n){if(typeof n=="number")return n;if(Sr(n))return Y;if(Et(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=Et(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=xf(n);var c=_a.test(n);return c||ba.test(n)?Re(n.slice(2),c?2:8):ya.test(n)?Y:+n}function ch(n){return Yr(n,yr(n))}function N1(n){return n?Qn(Ue(n),-V,V):n===0?n:0}function it(n){return n==null?"":Er(n)}var j1=Pi(function(n,s){if(is(s)||gr(s)){Yr(s,Wt(s),n);return}for(var c in s)st.call(s,c)&&Qi(n,c,s[c])}),uh=Pi(function(n,s){Yr(s,yr(s),n)}),qo=Pi(function(n,s,c,h){Yr(s,yr(s),n,h)}),F1=Pi(function(n,s,c,h){Yr(s,Wt(s),n,h)}),L1=hn(Wa);function U1(n,s){var c=Ii(n);return s==null?c:qf(c,s)}var M1=Ke(function(n,s){n=lt(n);var c=-1,h=s.length,y=h>2?s[2]:t;for(y&&or(s[0],s[1],y)&&(h=1);++c<h;)for(var b=s[c],I=yr(b),$=-1,M=I.length;++$<M;){var Q=I[$],Z=n[Q];(Z===t||Kr(Z,Di[Q])&&!st.call(n,Q))&&(n[Q]=b[Q])}return n}),B1=Ke(function(n){return n.push(t,xl),kt(fh,t,n)});function q1(n,s){return Ef(n,be(s,3),Jr)}function z1(n,s){return Ef(n,be(s,3),Ya)}function H1(n,s){return n==null?n:Ja(n,be(s,3),yr)}function K1(n,s){return n==null?n:Gf(n,be(s,3),yr)}function V1(n,s){return n&&Jr(n,be(s,3))}function G1(n,s){return n&&Ya(n,be(s,3))}function k1(n){return n==null?[]:Eo(n,Wt(n))}function W1(n){return n==null?[]:Eo(n,yr(n))}function Pc(n,s,c){var h=n==null?t:Zn(n,s);return h===t?c:h}function J1(n,s){return n!=null&&Al(n,s,vy)}function Ac(n,s){return n!=null&&Al(n,s,by)}var Y1=wl(function(n,s,c){s!=null&&typeof s.toString!="function"&&(s=co.call(s)),n[s]=c},Rc(_r)),X1=wl(function(n,s,c){s!=null&&typeof s.toString!="function"&&(s=co.call(s)),st.call(n,s)?n[s].push(c):n[s]=[c]},be),Q1=Ke(es);function Wt(n){return gr(n)?Mf(n):ec(n)}function yr(n){return gr(n)?Mf(n,!0):Ay(n)}function Z1(n,s){var c={};return s=be(s,3),Jr(n,function(h,y,b){fn(c,s(h,y,b),h)}),c}function eb(n,s){var c={};return s=be(s,3),Jr(n,function(h,y,b){fn(c,y,s(h,y,b))}),c}var tb=Pi(function(n,s,c){So(n,s,c)}),fh=Pi(function(n,s,c,h){So(n,s,c,h)}),rb=hn(function(n,s){var c={};if(n==null)return c;var h=!1;s=mt(s,function(b){return b=jn(b,n),h||(h=b.length>1),b}),Yr(n,pc(n),c),h&&(c=$r(c,O|S|P,Yy));for(var y=s.length;y--;)oc(c,s[y]);return c});function nb(n,s){return lh(n,Uo(be(s)))}var ib=hn(function(n,s){return n==null?{}:Ry(n,s)});function lh(n,s){if(n==null)return{};var c=mt(pc(n),function(h){return[h]});return s=be(s),rl(n,c,function(h,y){return s(h,y[0])})}function sb(n,s,c){s=jn(s,n);var h=-1,y=s.length;for(y||(y=1,n=t);++h<y;){var b=n==null?t:n[Xr(s[h])];b===t&&(h=y,b=c),n=pn(b)?b.call(n):b}return n}function ob(n,s,c){return n==null?n:rs(n,s,c)}function ab(n,s,c,h){return h=typeof h=="function"?h:t,n==null?n:rs(n,s,c,h)}var hh=Dl(Wt),dh=Dl(yr);function cb(n,s,c){var h=Te(n),y=h||Ln(n)||Ri(n);if(s=be(s,4),c==null){var b=n&&n.constructor;y?c=h?new b:[]:Et(n)?c=pn(b)?Ii(lo(n)):{}:c={}}return(y?Cr:Jr)(n,function(I,$,M){return s(c,I,$,M)}),c}function ub(n,s){return n==null?!0:oc(n,s)}function fb(n,s,c){return n==null?n:al(n,s,uc(c))}function lb(n,s,c,h){return h=typeof h=="function"?h:t,n==null?n:al(n,s,uc(c),h)}function Ti(n){return n==null?[]:qa(n,Wt(n))}function hb(n){return n==null?[]:qa(n,yr(n))}function db(n,s,c){return c===t&&(c=s,s=t),c!==t&&(c=Fr(c),c=c===c?c:0),s!==t&&(s=Fr(s),s=s===s?s:0),Qn(Fr(n),s,c)}function pb(n,s,c){return s=gn(s),c===t?(c=s,s=0):c=gn(c),n=Fr(n),my(n,s,c)}function gb(n,s,c){if(c&&typeof c!="boolean"&&or(n,s,c)&&(s=c=t),c===t&&(typeof s=="boolean"?(c=s,s=t):typeof n=="boolean"&&(c=n,n=t)),n===t&&s===t?(n=0,s=1):(n=gn(n),s===t?(s=n,n=0):s=gn(s)),n>s){var h=n;n=s,s=h}if(c||n%1||s%1){var y=Lf();return Zt(n+y*(s-n+ut("1e-"+((y+"").length-1))),s)}return nc(n,s)}var yb=Ai(function(n,s,c){return s=s.toLowerCase(),n+(c?ph(s):s)});function ph(n){return Cc(it(n).toLowerCase())}function gh(n){return n=it(n),n&&n.replace(on,o0).replace(Ta,"")}function _b(n,s,c){n=it(n),s=Er(s);var h=n.length;c=c===t?h:Qn(Ue(c),0,h);var y=c;return c-=s.length,c>=0&&n.slice(c,y)==s}function vb(n){return n=it(n),n&&vt.test(n)?n.replace(Hn,a0):n}function bb(n){return n=it(n),n&&Mt.test(n)?n.replace(xt,"\\$&"):n}var mb=Ai(function(n,s,c){return n+(c?"-":"")+s.toLowerCase()}),wb=Ai(function(n,s,c){return n+(c?" ":"")+s.toLowerCase()}),Eb=vl("toLowerCase");function Sb(n,s,c){n=it(n),s=Ue(s);var h=s?Ei(n):0;if(!s||h>=s)return n;var y=(s-h)/2;return Ao(yo(y),c)+n+Ao(go(y),c)}function Db(n,s,c){n=it(n),s=Ue(s);var h=s?Ei(n):0;return s&&h<s?n+Ao(s-h,c):n}function Ob(n,s,c){n=it(n),s=Ue(s);var h=s?Ei(n):0;return s&&h<s?Ao(s-h,c)+n:n}function xb(n,s,c){return c||s==null?s=0:s&&(s=+s),$0(it(n).replace(It,""),s||0)}function Ib(n,s,c){return(c?or(n,s,c):s===t)?s=1:s=Ue(s),ic(it(n),s)}function Pb(){var n=arguments,s=it(n[0]);return n.length<3?s:s.replace(n[1],n[2])}var Ab=Ai(function(n,s,c){return n+(c?"_":"")+s.toLowerCase()});function Cb(n,s,c){return c&&typeof c!="number"&&or(n,s,c)&&(s=c=t),c=c===t?re:c>>>0,c?(n=it(n),n&&(typeof s=="string"||s!=null&&!Ic(s))&&(s=Er(s),!s&&wi(n))?Fn(zr(n),0,c):n.split(s,c)):[]}var Rb=Ai(function(n,s,c){return n+(c?" ":"")+Cc(s)});function Tb(n,s,c){return n=it(n),c=c==null?0:Qn(Ue(c),0,n.length),s=Er(s),n.slice(c,c+s.length)==s}function $b(n,s,c){var h=v.templateSettings;c&&or(n,s,c)&&(s=t),n=it(n),s=qo({},s,h,Ol);var y=qo({},s.imports,h.imports,Ol),b=Wt(y),I=qa(y,b),$,M,Q=0,Z=s.interpolate||di,ne="__p += '",ue=Ha((s.escape||di).source+"|"+Z.source+"|"+(Z===wt?ga:di).source+"|"+(s.evaluate||di).source+"|$","g"),ye="//# sourceURL="+(st.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$a+"]")+`
`;n.replace(ue,function(Se,ke,Qe,Dr,ar,Or){return Qe||(Qe=Dr),ne+=n.slice(Q,Or).replace(wa,c0),ke&&($=!0,ne+=`' +
__e(`+ke+`) +
'`),ar&&(M=!0,ne+=`';
`+ar+`;
__p += '`),Qe&&(ne+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),Q=Or+Se.length,Se}),ne+=`';
`;var Ee=st.call(s,"variable")&&s.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if(da.test(Ee))throw new Ce(f);ne=(M?ne.replace(Gr,""):ne).replace(nr,"$1").replace(sn,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var qe=_h(function(){return nt(b,ye+"return "+ne).apply(t,I)});if(qe.source=ne,xc(qe))throw qe;return qe}function Nb(n){return it(n).toLowerCase()}function jb(n){return it(n).toUpperCase()}function Fb(n,s,c){if(n=it(n),n&&(c||s===t))return xf(n);if(!n||!(s=Er(s)))return n;var h=zr(n),y=zr(s),b=If(h,y),I=Pf(h,y)+1;return Fn(h,b,I).join("")}function Lb(n,s,c){if(n=it(n),n&&(c||s===t))return n.slice(0,Cf(n)+1);if(!n||!(s=Er(s)))return n;var h=zr(n),y=Pf(h,zr(s))+1;return Fn(h,0,y).join("")}function Ub(n,s,c){if(n=it(n),n&&(c||s===t))return n.replace(It,"");if(!n||!(s=Er(s)))return n;var h=zr(n),y=If(h,zr(s));return Fn(h,y).join("")}function Mb(n,s){var c=W,h=se;if(Et(s)){var y="separator"in s?s.separator:y;c="length"in s?Ue(s.length):c,h="omission"in s?Er(s.omission):h}n=it(n);var b=n.length;if(wi(n)){var I=zr(n);b=I.length}if(c>=b)return n;var $=c-Ei(h);if($<1)return h;var M=I?Fn(I,0,$).join(""):n.slice(0,$);if(y===t)return M+h;if(I&&($+=M.length-$),Ic(y)){if(n.slice($).search(y)){var Q,Z=M;for(y.global||(y=Ha(y.source,it(Pr.exec(y))+"g")),y.lastIndex=0;Q=y.exec(Z);)var ne=Q.index;M=M.slice(0,ne===t?$:ne)}}else if(n.indexOf(Er(y),$)!=$){var ue=M.lastIndexOf(y);ue>-1&&(M=M.slice(0,ue))}return M+h}function Bb(n){return n=it(n),n&&St.test(n)?n.replace(In,g0):n}var qb=Ai(function(n,s,c){return n+(c?" ":"")+s.toUpperCase()}),Cc=vl("toUpperCase");function yh(n,s,c){return n=it(n),s=c?t:s,s===t?f0(n)?v0(n):t0(n):n.match(s)||[]}var _h=Ke(function(n,s){try{return kt(n,t,s)}catch(c){return xc(c)?c:new Ce(c)}}),zb=hn(function(n,s){return Cr(s,function(c){c=Xr(c),fn(n,c,Dc(n[c],n))}),n});function Hb(n){var s=n==null?0:n.length,c=be();return n=s?mt(n,function(h){if(typeof h[1]!="function")throw new Rr(u);return[c(h[0]),h[1]]}):[],Ke(function(h){for(var y=-1;++y<s;){var b=n[y];if(kt(b[0],this,h))return kt(b[1],this,h)}})}function Kb(n){return gy($r(n,O))}function Rc(n){return function(){return n}}function Vb(n,s){return n==null||n!==n?s:n}var Gb=ml(),kb=ml(!0);function _r(n){return n}function Tc(n){return Yf(typeof n=="function"?n:$r(n,O))}function Wb(n){return Qf($r(n,O))}function Jb(n,s){return Zf(n,$r(s,O))}var Yb=Ke(function(n,s){return function(c){return es(c,n,s)}}),Xb=Ke(function(n,s){return function(c){return es(n,c,s)}});function $c(n,s,c){var h=Wt(s),y=Eo(s,h);c==null&&!(Et(s)&&(y.length||!h.length))&&(c=s,s=n,n=this,y=Eo(s,Wt(s)));var b=!(Et(c)&&"chain"in c)||!!c.chain,I=pn(n);return Cr(y,function($){var M=s[$];n[$]=M,I&&(n.prototype[$]=function(){var Q=this.__chain__;if(b||Q){var Z=n(this.__wrapped__),ne=Z.__actions__=pr(this.__actions__);return ne.push({func:M,args:arguments,thisArg:n}),Z.__chain__=Q,Z}return M.apply(n,Cn([this.value()],arguments))})}),n}function Qb(){return Xe._===this&&(Xe._=D0),this}function Nc(){}function Zb(n){return n=Ue(n),Ke(function(s){return el(s,n)})}var em=lc(mt),tm=lc(wf),rm=lc(Fa);function vh(n){return vc(n)?La(Xr(n)):Ty(n)}function nm(n){return function(s){return n==null?t:Zn(n,s)}}var im=El(),sm=El(!0);function jc(){return[]}function Fc(){return!1}function om(){return{}}function am(){return""}function cm(){return!0}function um(n,s){if(n=Ue(n),n<1||n>V)return[];var c=re,h=Zt(n,re);s=be(s),n-=re;for(var y=Ba(h,s);++c<n;)s(c);return y}function fm(n){return Te(n)?mt(n,Xr):Sr(n)?[n]:pr(Ul(it(n)))}function lm(n){var s=++E0;return it(n)+s}var hm=Po(function(n,s){return n+s},0),dm=hc("ceil"),pm=Po(function(n,s){return n/s},1),gm=hc("floor");function ym(n){return n&&n.length?wo(n,_r,Xa):t}function _m(n,s){return n&&n.length?wo(n,be(s,2),Xa):t}function vm(n){return Df(n,_r)}function bm(n,s){return Df(n,be(s,2))}function mm(n){return n&&n.length?wo(n,_r,tc):t}function wm(n,s){return n&&n.length?wo(n,be(s,2),tc):t}var Em=Po(function(n,s){return n*s},1),Sm=hc("round"),Dm=Po(function(n,s){return n-s},0);function Om(n){return n&&n.length?Ma(n,_r):0}function xm(n,s){return n&&n.length?Ma(n,be(s,2)):0}return v.after=Wv,v.ary=Jl,v.assign=j1,v.assignIn=uh,v.assignInWith=qo,v.assignWith=F1,v.at=L1,v.before=Yl,v.bind=Dc,v.bindAll=zb,v.bindKey=Xl,v.castArray=o1,v.chain=Gl,v.chunk=g_,v.compact=y_,v.concat=__,v.cond=Hb,v.conforms=Kb,v.constant=Rc,v.countBy=Ov,v.create=U1,v.curry=Ql,v.curryRight=Zl,v.debounce=eh,v.defaults=M1,v.defaultsDeep=B1,v.defer=Jv,v.delay=Yv,v.difference=v_,v.differenceBy=b_,v.differenceWith=m_,v.drop=w_,v.dropRight=E_,v.dropRightWhile=S_,v.dropWhile=D_,v.fill=O_,v.filter=Iv,v.flatMap=Cv,v.flatMapDeep=Rv,v.flatMapDepth=Tv,v.flatten=zl,v.flattenDeep=x_,v.flattenDepth=I_,v.flip=Xv,v.flow=Gb,v.flowRight=kb,v.fromPairs=P_,v.functions=k1,v.functionsIn=W1,v.groupBy=$v,v.initial=C_,v.intersection=R_,v.intersectionBy=T_,v.intersectionWith=$_,v.invert=Y1,v.invertBy=X1,v.invokeMap=jv,v.iteratee=Tc,v.keyBy=Fv,v.keys=Wt,v.keysIn=yr,v.map=jo,v.mapKeys=Z1,v.mapValues=eb,v.matches=Wb,v.matchesProperty=Jb,v.memoize=Lo,v.merge=tb,v.mergeWith=fh,v.method=Yb,v.methodOf=Xb,v.mixin=$c,v.negate=Uo,v.nthArg=Zb,v.omit=rb,v.omitBy=nb,v.once=Qv,v.orderBy=Lv,v.over=em,v.overArgs=Zv,v.overEvery=tm,v.overSome=rm,v.partial=Oc,v.partialRight=th,v.partition=Uv,v.pick=ib,v.pickBy=lh,v.property=vh,v.propertyOf=nm,v.pull=L_,v.pullAll=Kl,v.pullAllBy=U_,v.pullAllWith=M_,v.pullAt=B_,v.range=im,v.rangeRight=sm,v.rearg=e1,v.reject=qv,v.remove=q_,v.rest=t1,v.reverse=Ec,v.sampleSize=Hv,v.set=ob,v.setWith=ab,v.shuffle=Kv,v.slice=z_,v.sortBy=kv,v.sortedUniq=J_,v.sortedUniqBy=Y_,v.split=Cb,v.spread=r1,v.tail=X_,v.take=Q_,v.takeRight=Z_,v.takeRightWhile=ev,v.takeWhile=tv,v.tap=yv,v.throttle=n1,v.thru=No,v.toArray=oh,v.toPairs=hh,v.toPairsIn=dh,v.toPath=fm,v.toPlainObject=ch,v.transform=cb,v.unary=i1,v.union=rv,v.unionBy=nv,v.unionWith=iv,v.uniq=sv,v.uniqBy=ov,v.uniqWith=av,v.unset=ub,v.unzip=Sc,v.unzipWith=Vl,v.update=fb,v.updateWith=lb,v.values=Ti,v.valuesIn=hb,v.without=cv,v.words=yh,v.wrap=s1,v.xor=uv,v.xorBy=fv,v.xorWith=lv,v.zip=hv,v.zipObject=dv,v.zipObjectDeep=pv,v.zipWith=gv,v.entries=hh,v.entriesIn=dh,v.extend=uh,v.extendWith=qo,$c(v,v),v.add=hm,v.attempt=_h,v.camelCase=yb,v.capitalize=ph,v.ceil=dm,v.clamp=db,v.clone=a1,v.cloneDeep=u1,v.cloneDeepWith=f1,v.cloneWith=c1,v.conformsTo=l1,v.deburr=gh,v.defaultTo=Vb,v.divide=pm,v.endsWith=_b,v.eq=Kr,v.escape=vb,v.escapeRegExp=bb,v.every=xv,v.find=Pv,v.findIndex=Bl,v.findKey=q1,v.findLast=Av,v.findLastIndex=ql,v.findLastKey=z1,v.floor=gm,v.forEach=kl,v.forEachRight=Wl,v.forIn=H1,v.forInRight=K1,v.forOwn=V1,v.forOwnRight=G1,v.get=Pc,v.gt=h1,v.gte=d1,v.has=J1,v.hasIn=Ac,v.head=Hl,v.identity=_r,v.includes=Nv,v.indexOf=A_,v.inRange=pb,v.invoke=Q1,v.isArguments=ri,v.isArray=Te,v.isArrayBuffer=p1,v.isArrayLike=gr,v.isArrayLikeObject=$t,v.isBoolean=g1,v.isBuffer=Ln,v.isDate=y1,v.isElement=_1,v.isEmpty=v1,v.isEqual=b1,v.isEqualWith=m1,v.isError=xc,v.isFinite=w1,v.isFunction=pn,v.isInteger=rh,v.isLength=Mo,v.isMap=nh,v.isMatch=E1,v.isMatchWith=S1,v.isNaN=D1,v.isNative=O1,v.isNil=I1,v.isNull=x1,v.isNumber=ih,v.isObject=Et,v.isObjectLike=At,v.isPlainObject=os,v.isRegExp=Ic,v.isSafeInteger=P1,v.isSet=sh,v.isString=Bo,v.isSymbol=Sr,v.isTypedArray=Ri,v.isUndefined=A1,v.isWeakMap=C1,v.isWeakSet=R1,v.join=N_,v.kebabCase=mb,v.last=jr,v.lastIndexOf=j_,v.lowerCase=wb,v.lowerFirst=Eb,v.lt=T1,v.lte=$1,v.max=ym,v.maxBy=_m,v.mean=vm,v.meanBy=bm,v.min=mm,v.minBy=wm,v.stubArray=jc,v.stubFalse=Fc,v.stubObject=om,v.stubString=am,v.stubTrue=cm,v.multiply=Em,v.nth=F_,v.noConflict=Qb,v.noop=Nc,v.now=Fo,v.pad=Sb,v.padEnd=Db,v.padStart=Ob,v.parseInt=xb,v.random=gb,v.reduce=Mv,v.reduceRight=Bv,v.repeat=Ib,v.replace=Pb,v.result=sb,v.round=Sm,v.runInContext=U,v.sample=zv,v.size=Vv,v.snakeCase=Ab,v.some=Gv,v.sortedIndex=H_,v.sortedIndexBy=K_,v.sortedIndexOf=V_,v.sortedLastIndex=G_,v.sortedLastIndexBy=k_,v.sortedLastIndexOf=W_,v.startCase=Rb,v.startsWith=Tb,v.subtract=Dm,v.sum=Om,v.sumBy=xm,v.template=$b,v.times=um,v.toFinite=gn,v.toInteger=Ue,v.toLength=ah,v.toLower=Nb,v.toNumber=Fr,v.toSafeInteger=N1,v.toString=it,v.toUpper=jb,v.trim=Fb,v.trimEnd=Lb,v.trimStart=Ub,v.truncate=Mb,v.unescape=Bb,v.uniqueId=lm,v.upperCase=qb,v.upperFirst=Cc,v.each=kl,v.eachRight=Wl,v.first=Hl,$c(v,function(){var n={};return Jr(v,function(s,c){st.call(v.prototype,c)||(n[c]=s)}),n}(),{chain:!1}),v.VERSION=i,Cr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){v[n].placeholder=v}),Cr(["drop","take"],function(n,s){Je.prototype[n]=function(c){c=c===t?1:Gt(Ue(c),0);var h=this.__filtered__&&!s?new Je(this):this.clone();return h.__filtered__?h.__takeCount__=Zt(c,h.__takeCount__):h.__views__.push({size:Zt(c,re),type:n+(h.__dir__<0?"Right":"")}),h},Je.prototype[n+"Right"]=function(c){return this.reverse()[n](c).reverse()}}),Cr(["filter","map","takeWhile"],function(n,s){var c=s+1,h=c==w||c==ee;Je.prototype[n]=function(y){var b=this.clone();return b.__iteratees__.push({iteratee:be(y,3),type:c}),b.__filtered__=b.__filtered__||h,b}}),Cr(["head","last"],function(n,s){var c="take"+(s?"Right":"");Je.prototype[n]=function(){return this[c](1).value()[0]}}),Cr(["initial","tail"],function(n,s){var c="drop"+(s?"":"Right");Je.prototype[n]=function(){return this.__filtered__?new Je(this):this[c](1)}}),Je.prototype.compact=function(){return this.filter(_r)},Je.prototype.find=function(n){return this.filter(n).head()},Je.prototype.findLast=function(n){return this.reverse().find(n)},Je.prototype.invokeMap=Ke(function(n,s){return typeof n=="function"?new Je(this):this.map(function(c){return es(c,n,s)})}),Je.prototype.reject=function(n){return this.filter(Uo(be(n)))},Je.prototype.slice=function(n,s){n=Ue(n);var c=this;return c.__filtered__&&(n>0||s<0)?new Je(c):(n<0?c=c.takeRight(-n):n&&(c=c.drop(n)),s!==t&&(s=Ue(s),c=s<0?c.dropRight(-s):c.take(s-n)),c)},Je.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Je.prototype.toArray=function(){return this.take(re)},Jr(Je.prototype,function(n,s){var c=/^(?:filter|find|map|reject)|While$/.test(s),h=/^(?:head|last)$/.test(s),y=v[h?"take"+(s=="last"?"Right":""):s],b=h||/^find/.test(s);y&&(v.prototype[s]=function(){var I=this.__wrapped__,$=h?[1]:arguments,M=I instanceof Je,Q=$[0],Z=M||Te(I),ne=function(ke){var Qe=y.apply(v,Cn([ke],$));return h&&ue?Qe[0]:Qe};Z&&c&&typeof Q=="function"&&Q.length!=1&&(M=Z=!1);var ue=this.__chain__,ye=!!this.__actions__.length,Ee=b&&!ue,qe=M&&!ye;if(!b&&Z){I=qe?I:new Je(this);var Se=n.apply(I,$);return Se.__actions__.push({func:No,args:[ne],thisArg:t}),new Tr(Se,ue)}return Ee&&qe?n.apply(this,$):(Se=this.thru(ne),Ee?h?Se.value()[0]:Se.value():Se)})}),Cr(["pop","push","shift","sort","splice","unshift"],function(n){var s=so[n],c=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",h=/^(?:pop|shift)$/.test(n);v.prototype[n]=function(){var y=arguments;if(h&&!this.__chain__){var b=this.value();return s.apply(Te(b)?b:[],y)}return this[c](function(I){return s.apply(Te(I)?I:[],y)})}}),Jr(Je.prototype,function(n,s){var c=v[s];if(c){var h=c.name+"";st.call(xi,h)||(xi[h]=[]),xi[h].push({name:s,func:c})}}),xi[Io(t,ie).name]=[{name:"wrapper",func:t}],Je.prototype.clone=B0,Je.prototype.reverse=q0,Je.prototype.value=z0,v.prototype.at=_v,v.prototype.chain=vv,v.prototype.commit=bv,v.prototype.next=mv,v.prototype.plant=Ev,v.prototype.reverse=Sv,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=Dv,v.prototype.first=v.prototype.head,ki&&(v.prototype[ki]=wv),v},Si=b0();Tt?((Tt.exports=Si)._=Si,ft._=Si):Xe._=Si}).call(vs)})(zu,zu.exports);var bP=Object.defineProperty,mP=Object.defineProperties,wP=Object.getOwnPropertyDescriptors,np=Object.getOwnPropertySymbols,EP=Object.prototype.hasOwnProperty,SP=Object.prototype.propertyIsEnumerable,ip=(r,e,t)=>e in r?bP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ho=(r,e)=>{for(var t in e||(e={}))EP.call(e,t)&&ip(r,t,e[t]);if(np)for(var t of np(e))SP.call(e,t)&&ip(r,t,e[t]);return r},DP=(r,e)=>mP(r,wP(e));function Mr(r,e,t){let i;const o=Hu(r);return e.rpcMap&&(i=e.rpcMap[o]),i||(i=`${vP}?chainId=eip155:${o}&projectId=${t}`),i}function Hu(r){return r.includes("eip155")?Number(r.split(":")[1]):Number(r)}function OP(r,e){if(!e.includes(r))throw new Error(`Chain '${r}' not approved. Please use one of the following: ${e.toString()}`)}function xP(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function IP(r,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(r));if(!t.length)return[];const i=[];return t.forEach(o=>{const a=e.namespaces[o].accounts;i.push(...a)}),i}function PP(r,e={}){const t=sp(r),i=sp(e);return zu.exports.merge(t,i)}function sp(r){var e,t,i,o;const a={};if(!Ui(r))return a;for(const[u,f]of Object.entries(r)){const g=Xp(u)?[u]:f.chains,d=f.methods||[],_=f.events||[],O=f.rpcMap||{},S=ko(u);a[S]=DP(Ho(Ho({},a[S]),f),{chains:zc(g,(e=a[S])==null?void 0:e.chains),methods:zc(d,(t=a[S])==null?void 0:t.methods),events:zc(_,(i=a[S])==null?void 0:i.events),rpcMap:Ho(Ho({},O),(o=a[S])==null?void 0:o.rpcMap)})}return a}const Jg={},Ft=r=>Jg[r],eu=(r,e)=>{Jg[r]=e};class AP{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Mr(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Mr(e,this.namespace);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}class CP{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var t;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const i=Hu(e);if(!this.httpProviders[i]){const o=t||Mr(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,o)}this.chainId=i,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=Hu(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16),i=`${this.name}:${t}`;OP(i,this.namespace.chains),this.setDefaultChain(`${t}`)}}class RP{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Mr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}class TP{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Mr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}class $P{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}class NP{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Mr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}class jP{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(zn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Mr(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new qn(new hi(i,Ft("disableProviderPing")))}}var FP=Object.defineProperty,LP=Object.defineProperties,UP=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertySymbols,MP=Object.prototype.hasOwnProperty,BP=Object.prototype.propertyIsEnumerable,ap=(r,e,t)=>e in r?FP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ko=(r,e)=>{for(var t in e||(e={}))MP.call(e,t)&&ap(r,t,e[t]);if(op)for(var t of op(e))BP.call(e,t)&&ap(r,t,e[t]);return r},tu=(r,e)=>LP(r,UP(e));class bf{constructor(e){this.events=new Ju,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||tp})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new bf(e);return await t.initialize(),t}async request(e,t){const[i,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Ko({},e),chainId:`${i}:${o}`,topic:this.session.topic})}sendAsync(e,t,i){this.request(e,i).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await o().then(a=>{this.session=a}).catch(a=>{if(a.message!==Kg)throw a;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[i,o]=this.validateChain(e);this.getProvider(i).setDefaultChain(o,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(xn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await OI.init({logger:this.providerOpts.logger||tp,relayUrl:this.providerOpts.relayUrl||gP,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>ko(t)))];eu("client",this.client),eu("events",this.events),eu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=IP(t,this.session),o=xP(i),a=PP(this.namespaces,this.optionalNamespaces),u=tu(Ko({},a[t]),{accounts:i,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new CP({namespace:u});break;case"solana":this.rpcProviders[t]=new RP({namespace:u});break;case"cosmos":this.rpcProviders[t]=new TP({namespace:u});break;case"polkadot":this.rpcProviders[t]=new AP({namespace:u});break;case"cip34":this.rpcProviders[t]=new $P({namespace:u});break;case"elrond":this.rpcProviders[t]=new NP({namespace:u});break;case"multiversx":this.rpcProviders[t]=new jP({namespace:u});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?this.events.emit("accountsChanged",i.data):i.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:o}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=tu(Ko({},a),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",tu(Ko({},jt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(zn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:o}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=i,this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(t&&!Object.keys(this.namespaces).map(u=>ko(u)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const o=ko(Object.keys(this.namespaces)[0]),a=this.rpcProviders[o].getDefaultChain();return[o,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var i;const[o,a]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(a),((i=this.namespaces[o])!=null?i:this.namespaces[`${o}:${a}`]).defaultChain=a,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",a)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${rp}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${rp}/${e}`)}}const qP=bf,zP="wc",HP="ethereum_provider",KP=`${zP}@2:${HP}:`,VP="https://rpc.walletconnect.com/v1/",Ku=["eth_sendTransaction","personal_sign"],oA=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Vu=["chainChanged","accountsChanged"],aA=["message","disconnect","connect"];var GP=Object.defineProperty,kP=Object.defineProperties,WP=Object.getOwnPropertyDescriptors,cp=Object.getOwnPropertySymbols,JP=Object.prototype.hasOwnProperty,YP=Object.prototype.propertyIsEnumerable,up=(r,e,t)=>e in r?GP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ru=(r,e)=>{for(var t in e||(e={}))JP.call(e,t)&&up(r,t,e[t]);if(cp)for(var t of cp(e))YP.call(e,t)&&up(r,t,e[t]);return r},fp=(r,e)=>kP(r,WP(e));function Gu(r){return Number(r[0].split(":")[1])}function nu(r){return`0x${r.toString(16)}`}function XP(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:o,events:a,optionalEvents:u,rpcMap:f}=r;if(!xn(e))throw new Error("Invalid chains");const g=e,d=i||Ku,_=a||Vu,O={[Gu(g)]:f[Gu(g)]},S={chains:g,methods:d,events:_,rpcMap:O},P=a==null?void 0:a.filter(ie=>!Vu.includes(ie)),C=i==null?void 0:i.filter(ie=>!Ku.includes(ie));if(!t&&!u&&!o&&!(P!=null&&P.length)&&!(C!=null&&C.length))return{required:S};const q=(P==null?void 0:P.length)&&(C==null?void 0:C.length)||!t,K={chains:[...new Set(q?g.concat(t||[]):t)],methods:[...new Set(d.concat(o||[]))],events:[...new Set(_.concat(u||[]))],rpcMap:f};return{required:S,optional:K}}class mf{constructor(){this.events=new xr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=KP,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new mf;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=XP(this.rpc);try{const o=await new Promise(async(u,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(fp(ru({namespaces:{[this.namespace]:t}},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(d=>{u(d)}).catch(d=>{f(new Error(d.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const a=O3(o.namespaces,[this.namespace]);this.setAccounts(a),this.events.emit("connect",{chainId:nu(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",nu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",fp(ru({},jt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",nu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.setHttpProvider(t)}}parseAccountId(e){const[t,i,o]=e.split(":");return{chainId:`${t}:${i}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;return{chains:((t=e.chains)==null?void 0:t.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:(e==null?void 0:e.methods)||Ku,events:(e==null?void 0:e.events)||Vu,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(i=e==null?void 0:e.qrModalOptions)!=null?i:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(o=>{i[o]=this.getRpcUrl(o,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=Gu(this.rpc.chains),this.signer=await qP.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await Im(()=>import("./index-020f1aea.js").then(o=>o.a),["assets/index-020f1aea.js","assets/index-eaeb17e0.js"]);t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(ru({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:o}=e;t&&xn(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=(o==null?void 0:o[a])||this.getRpcUrl(a)})),i&&xn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=(o==null?void 0:o[a])||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${VP}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(e?[this.formatChainId(e)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const cA=mf;export{cA as EthereumProvider,aA as OPTIONAL_EVENTS,oA as OPTIONAL_METHODS,Vu as REQUIRED_EVENTS,Ku as REQUIRED_METHODS,mf as default};
